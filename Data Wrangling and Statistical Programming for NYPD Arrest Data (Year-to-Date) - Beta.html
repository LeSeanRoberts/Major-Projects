<!DOCTYPE html>
<!-- saved from url=(0022)http://localhost:3787/ -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Le’Sean Roberts">

<title>Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta</title>
<style class="anchorjs"></style><style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/clipboard.min.js.download"></script><style type="text/css" id="operaUserStyle"></style>
<script src="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/quarto.js.download" type="module"></script>
<script src="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/tabsets.js.download" type="module"></script>
<script src="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/axe-check.js.download" type="module"></script>
<script src="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/popper.min.js.download"></script>
<script src="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/tippy.umd.min.js.download"></script>
<script src="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/anchor.min.js.download"></script>
<link href="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/tippy.css" rel="stylesheet">
<link href="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/bootstrap.min.js.download"></script>
<link href="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/bootstrap-icons.css" rel="stylesheet">
<link href="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/bootstrap-9e3ffae467580fdb927a41352e75a2e0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">

  <script src="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/polyfill.min.js.download"></script>
  <script src="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/tex-chtml-full.js.download" type="text/javascript"></script><style type="text/css">.CtxtMenu_InfoClose {  top:.2em; right:.2em;}
.CtxtMenu_InfoContent {  overflow:auto; text-align:left; font-size:80%;  padding:.4em .6em; border:1px inset; margin:1em 0px;  max-height:20em; max-width:30em; background-color:#EEEEEE;  white-space:normal;}
.CtxtMenu_Info.CtxtMenu_MousePost {outline:none;}
.CtxtMenu_Info {  position:fixed; left:50%; width:auto; text-align:center;  border:3px outset; padding:1em 2em; background-color:#DDDDDD;  color:black;  cursor:default; font-family:message-box; font-size:120%;  font-style:normal; text-indent:0; text-transform:none;  line-height:normal; letter-spacing:normal; word-spacing:normal;  word-wrap:normal; white-space:nowrap; float:none; z-index:201;  border-radius: 15px;                     /* Opera 10.5 and IE9 */  -webkit-border-radius:15px;               /* Safari and Chrome */  -moz-border-radius:15px;                  /* Firefox */  -khtml-border-radius:15px;                /* Konqueror */  box-shadow:0px 10px 20px #808080;         /* Opera 10.5 and IE9 */  -webkit-box-shadow:0px 10px 20px #808080; /* Safari 3 & Chrome */  -moz-box-shadow:0px 10px 20px #808080;    /* Forefox 3.5 */  -khtml-box-shadow:0px 10px 20px #808080;  /* Konqueror */  filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color="gray", Positive="true"); /* IE */}
</style><style type="text/css">.CtxtMenu_MenuClose {  position:absolute;  cursor:pointer;  display:inline-block;  border:2px solid #AAA;  border-radius:18px;  -webkit-border-radius: 18px;             /* Safari and Chrome */  -moz-border-radius: 18px;                /* Firefox */  -khtml-border-radius: 18px;              /* Konqueror */  font-family: "Courier New", Courier;  font-size:24px;  color:#F0F0F0}
.CtxtMenu_MenuClose span {  display:block; background-color:#AAA; border:1.5px solid;  border-radius:18px;  -webkit-border-radius: 18px;             /* Safari and Chrome */  -moz-border-radius: 18px;                /* Firefox */  -khtml-border-radius: 18px;              /* Konqueror */  line-height:0;  padding:8px 0 6px     /* may need to be browser-specific */}
.CtxtMenu_MenuClose:hover {  color:white!important;  border:2px solid #CCC!important}
.CtxtMenu_MenuClose:hover span {  background-color:#CCC!important}
.CtxtMenu_MenuClose:hover:focus {  outline:none}
</style><style type="text/css">.CtxtMenu_Menu {  position:absolute;  background-color:white;  color:black;  width:auto; padding:5px 0px;  border:1px solid #CCCCCC; margin:0; cursor:default;  font: menu; text-align:left; text-indent:0; text-transform:none;  line-height:normal; letter-spacing:normal; word-spacing:normal;  word-wrap:normal; white-space:nowrap; float:none; z-index:201;  border-radius: 5px;                     /* Opera 10.5 and IE9 */  -webkit-border-radius: 5px;             /* Safari and Chrome */  -moz-border-radius: 5px;                /* Firefox */  -khtml-border-radius: 5px;              /* Konqueror */  box-shadow:0px 10px 20px #808080;         /* Opera 10.5 and IE9 */  -webkit-box-shadow:0px 10px 20px #808080; /* Safari 3 & Chrome */  -moz-box-shadow:0px 10px 20px #808080;    /* Forefox 3.5 */  -khtml-box-shadow:0px 10px 20px #808080;  /* Konqueror */}
.CtxtMenu_MenuItem {  padding: 1px 2em;  background:transparent;}
.CtxtMenu_MenuArrow {  position:absolute; right:.5em; padding-top:.25em; color:#666666;  font-family: null; font-size: .75em}
.CtxtMenu_MenuActive .CtxtMenu_MenuArrow {color:white}
.CtxtMenu_MenuArrow.CtxtMenu_RTL {left:.5em; right:auto}
.CtxtMenu_MenuCheck {  position:absolute; left:.7em;  font-family: null}
.CtxtMenu_MenuCheck.CtxtMenu_RTL { right:.7em; left:auto }
.CtxtMenu_MenuRadioCheck {  position:absolute; left: .7em;}
.CtxtMenu_MenuRadioCheck.CtxtMenu_RTL {  right: .7em; left:auto}
.CtxtMenu_MenuInputBox {  padding-left: 1em; right:.5em; color:#666666;  font-family: null;}
.CtxtMenu_MenuInputBox.CtxtMenu_RTL {  left: .1em;}
.CtxtMenu_MenuComboBox {  left:.1em; padding-bottom:.5em;}
.CtxtMenu_MenuSlider {  left: .1em;}
.CtxtMenu_SliderValue {  position:absolute; right:.1em; padding-top:.25em; color:#333333;  font-size: .75em}
.CtxtMenu_SliderBar {  outline: none; background: #d3d3d3}
.CtxtMenu_MenuLabel {  padding: 1px 2em 3px 1.33em;  font-style:italic}
.CtxtMenu_MenuRule {  border-top: 1px solid #DDDDDD;  margin: 4px 3px;}
.CtxtMenu_MenuDisabled {  color:GrayText}
.CtxtMenu_MenuActive {  background-color: #606872;  color: white;}
.CtxtMenu_MenuDisabled:focus {  background-color: #E8E8E8}
.CtxtMenu_MenuLabel:focus {  background-color: #E8E8E8}
.CtxtMenu_ContextMenu:focus {  outline:none}
.CtxtMenu_ContextMenu .CtxtMenu_MenuItem:focus {  outline:none}
.CtxtMenu_SelectionMenu {  position:relative; float:left;  border-bottom: none; -webkit-box-shadow:none; -webkit-border-radius:0px; }
.CtxtMenu_SelectionItem {  padding-right: 1em;}
.CtxtMenu_Selection {  right: 40%; width:50%; }
.CtxtMenu_SelectionBox {  padding: 0em; max-height:20em; max-width: none;  background-color:#FFFFFF;}
.CtxtMenu_SelectionDivider {  clear: both; border-top: 2px solid #000000;}
.CtxtMenu_Menu .CtxtMenu_MenuClose {  top:-10px; left:-10px}
</style>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<style>.ansi-display{font-family:monospace;white-space:pre-wrap;--ansiBlack: #000000;--ansiRed: #cd3131;--ansiGreen: #00BC00;--ansiYellow: #949800;--ansiBlue: #0451a5;--ansiMagenta: #bc05bc;--ansiCyan: #0598bc;--ansiWhite: #555555;--ansiBrightBlack: #666666;--ansiBrightRed: #cd3131;--ansiBrightGreen: #14CE14;--ansiBrightYellow: #b5ba00;--ansiBrightBlue: #0451a5;--ansiBrightMagenta: #bc05bc;--ansiBrightCyan: #0598bc;--ansiBrightWhite: #a5a5a5}.dark-mode .ansi-display{--ansiBlack: #000000;--ansiRed: #cd3131;--ansiGreen: #0DBC79;--ansiYellow: #e5e510;--ansiBlue: #2472c8;--ansiMagenta: #bc3fbc;--ansiCyan: #11a8cd;--ansiWhite: #e5e5e5;--ansiBrightBlack: #666666;--ansiBrightRed: #f14c4c;--ansiBrightGreen: #23d18b;--ansiBrightYellow: #f5f543;--ansiBrightBlue: #3b8eea;--ansiBrightMagenta: #d670d6;--ansiBrightCyan: #29b8db;--ansiBrightWhite: #e5e5e5}@keyframes ansi-displaly-run-blink{50%{opacity:0}}.fui-FluentProvider h2{border-bottom:none;padding-bottom:0}</style><style id="MJX-CHTML-styles">
mjx-container[jax="CHTML"] {
  line-height: 0;
}

mjx-container [space="1"] {
  margin-left: .111em;
}

mjx-container [space="2"] {
  margin-left: .167em;
}

mjx-container [space="3"] {
  margin-left: .222em;
}

mjx-container [space="4"] {
  margin-left: .278em;
}

mjx-container [space="5"] {
  margin-left: .333em;
}

mjx-container [rspace="1"] {
  margin-right: .111em;
}

mjx-container [rspace="2"] {
  margin-right: .167em;
}

mjx-container [rspace="3"] {
  margin-right: .222em;
}

mjx-container [rspace="4"] {
  margin-right: .278em;
}

mjx-container [rspace="5"] {
  margin-right: .333em;
}

mjx-container [size="s"] {
  font-size: 70.7%;
}

mjx-container [size="ss"] {
  font-size: 50%;
}

mjx-container [size="Tn"] {
  font-size: 60%;
}

mjx-container [size="sm"] {
  font-size: 85%;
}

mjx-container [size="lg"] {
  font-size: 120%;
}

mjx-container [size="Lg"] {
  font-size: 144%;
}

mjx-container [size="LG"] {
  font-size: 173%;
}

mjx-container [size="hg"] {
  font-size: 207%;
}

mjx-container [size="HG"] {
  font-size: 249%;
}

mjx-container [width="full"] {
  width: 100%;
}

mjx-box {
  display: inline-block;
}

mjx-block {
  display: block;
}

mjx-itable {
  display: inline-table;
}

mjx-row {
  display: table-row;
}

mjx-row > * {
  display: table-cell;
}

mjx-mtext {
  display: inline-block;
  text-align: left;
}

mjx-mstyle {
  display: inline-block;
}

mjx-merror {
  display: inline-block;
  color: red;
  background-color: yellow;
}

mjx-mphantom {
  visibility: hidden;
}

_::-webkit-full-page-media, _:future, :root mjx-container {
  will-change: opacity;
}

mjx-assistive-mml {
  position: absolute !important;
  top: 0px;
  left: 0px;
  clip: rect(1px, 1px, 1px, 1px);
  padding: 1px 0px 0px 0px !important;
  border: 0px !important;
  display: block !important;
  width: auto !important;
  overflow: hidden !important;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

mjx-assistive-mml[display="block"] {
  width: 100% !important;
}

mjx-math {
  display: inline-block;
  text-align: left;
  line-height: 0;
  text-indent: 0;
  font-style: normal;
  font-weight: normal;
  font-size: 100%;
  font-size-adjust: none;
  letter-spacing: normal;
  border-collapse: collapse;
  word-wrap: normal;
  word-spacing: normal;
  white-space: nowrap;
  direction: ltr;
  padding: 1px 0;
}

mjx-container[jax="CHTML"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="CHTML"][display="true"][width="full"] {
  display: flex;
}

mjx-container[jax="CHTML"][display="true"] mjx-math {
  padding: 0;
}

mjx-container[jax="CHTML"][justify="left"] {
  text-align: left;
}

mjx-container[jax="CHTML"][justify="right"] {
  text-align: right;
}

mjx-c {
  display: inline-block;
}

mjx-utext {
  display: inline-block;
  padding: .75em 0 .2em 0;
}

mjx-mspace {
  display: inline-block;
  text-align: left;
}

mjx-mo {
  display: inline-block;
  text-align: left;
}

mjx-stretchy-h {
  display: inline-table;
  width: 100%;
}

mjx-stretchy-h > * {
  display: table-cell;
  width: 0;
}

mjx-stretchy-h > * > mjx-c {
  display: inline-block;
  transform: scalex(1.0000001);
}

mjx-stretchy-h > * > mjx-c::before {
  display: inline-block;
  width: initial;
}

mjx-stretchy-h > mjx-ext {
  /* IE */ overflow: hidden;
  /* others */ overflow: clip visible;
  width: 100%;
}

mjx-stretchy-h > mjx-ext > mjx-c::before {
  transform: scalex(500);
}

mjx-stretchy-h > mjx-ext > mjx-c {
  width: 0;
}

mjx-stretchy-h > mjx-beg > mjx-c {
  margin-right: -.1em;
}

mjx-stretchy-h > mjx-end > mjx-c {
  margin-left: -.1em;
}

mjx-stretchy-v {
  display: inline-block;
}

mjx-stretchy-v > * {
  display: block;
}

mjx-stretchy-v > mjx-beg {
  height: 0;
}

mjx-stretchy-v > mjx-end > mjx-c {
  display: block;
}

mjx-stretchy-v > * > mjx-c {
  transform: scaley(1.0000001);
  transform-origin: left center;
  overflow: hidden;
}

mjx-stretchy-v > mjx-ext {
  display: block;
  height: 100%;
  box-sizing: border-box;
  border: 0px solid transparent;
  /* IE */ overflow: hidden;
  /* others */ overflow: visible clip;
}

mjx-stretchy-v > mjx-ext > mjx-c::before {
  width: initial;
  box-sizing: border-box;
}

mjx-stretchy-v > mjx-ext > mjx-c {
  transform: scaleY(500) translateY(.075em);
  overflow: visible;
}

mjx-mark {
  display: inline-block;
  height: 0px;
}

mjx-mfrac {
  display: inline-block;
  text-align: left;
}

mjx-frac {
  display: inline-block;
  vertical-align: 0.17em;
  padding: 0 .22em;
}

mjx-frac[type="d"] {
  vertical-align: .04em;
}

mjx-frac[delims] {
  padding: 0 .1em;
}

mjx-frac[atop] {
  padding: 0 .12em;
}

mjx-frac[atop][delims] {
  padding: 0;
}

mjx-dtable {
  display: inline-table;
  width: 100%;
}

mjx-dtable > * {
  font-size: 2000%;
}

mjx-dbox {
  display: block;
  font-size: 5%;
}

mjx-num {
  display: block;
  text-align: center;
}

mjx-den {
  display: block;
  text-align: center;
}

mjx-mfrac[bevelled] > mjx-num {
  display: inline-block;
}

mjx-mfrac[bevelled] > mjx-den {
  display: inline-block;
}

mjx-den[align="right"], mjx-num[align="right"] {
  text-align: right;
}

mjx-den[align="left"], mjx-num[align="left"] {
  text-align: left;
}

mjx-nstrut {
  display: inline-block;
  height: .054em;
  width: 0;
  vertical-align: -.054em;
}

mjx-nstrut[type="d"] {
  height: .217em;
  vertical-align: -.217em;
}

mjx-dstrut {
  display: inline-block;
  height: .505em;
  width: 0;
}

mjx-dstrut[type="d"] {
  height: .726em;
}

mjx-line {
  display: block;
  box-sizing: border-box;
  min-height: 1px;
  height: .06em;
  border-top: .06em solid;
  margin: .06em -.1em;
  overflow: hidden;
}

mjx-line[type="d"] {
  margin: .18em -.1em;
}

mjx-mrow {
  display: inline-block;
  text-align: left;
}

mjx-mn {
  display: inline-block;
  text-align: left;
}

mjx-munderover {
  display: inline-block;
  text-align: left;
}

mjx-munderover:not([limits="false"]) {
  padding-top: .1em;
}

mjx-munderover:not([limits="false"]) > * {
  display: block;
}

mjx-msubsup {
  display: inline-block;
  text-align: left;
}

mjx-script {
  display: inline-block;
  padding-right: .05em;
  padding-left: .033em;
}

mjx-script > mjx-spacer {
  display: block;
}

mjx-mi {
  display: inline-block;
  text-align: left;
}

mjx-TeXAtom {
  display: inline-block;
  text-align: left;
}

mjx-msub {
  display: inline-block;
  text-align: left;
}

mjx-msup {
  display: inline-block;
  text-align: left;
}

mjx-munder {
  display: inline-block;
  text-align: left;
}

mjx-over {
  text-align: left;
}

mjx-munder:not([limits="false"]) {
  display: inline-table;
}

mjx-munder > mjx-row {
  text-align: left;
}

mjx-under {
  padding-bottom: .1em;
}

mjx-msqrt {
  display: inline-block;
  text-align: left;
}

mjx-root {
  display: inline-block;
  white-space: nowrap;
}

mjx-surd {
  display: inline-block;
  vertical-align: top;
}

mjx-sqrt {
  display: inline-block;
  padding-top: .07em;
}

mjx-sqrt > mjx-box {
  border-top: .07em solid;
}

mjx-sqrt.mjx-tall > mjx-box {
  padding-left: .3em;
  margin-left: -.3em;
}

mjx-mover {
  display: inline-block;
  text-align: left;
}

mjx-mover:not([limits="false"]) {
  padding-top: .1em;
}

mjx-mover:not([limits="false"]) > * {
  display: block;
  text-align: left;
}

mjx-mtable {
  display: inline-block;
  text-align: center;
  vertical-align: .25em;
  position: relative;
  box-sizing: border-box;
  border-spacing: 0;
  border-collapse: collapse;
}

mjx-mstyle[size="s"] mjx-mtable {
  vertical-align: .354em;
}

mjx-labels {
  position: absolute;
  left: 0;
  top: 0;
}

mjx-table {
  display: inline-block;
  vertical-align: -.5ex;
  box-sizing: border-box;
}

mjx-table > mjx-itable {
  vertical-align: middle;
  text-align: left;
  box-sizing: border-box;
}

mjx-labels > mjx-itable {
  position: absolute;
  top: 0;
}

mjx-mtable[justify="left"] {
  text-align: left;
}

mjx-mtable[justify="right"] {
  text-align: right;
}

mjx-mtable[justify="left"][side="left"] {
  padding-right: 0 ! important;
}

mjx-mtable[justify="left"][side="right"] {
  padding-left: 0 ! important;
}

mjx-mtable[justify="right"][side="left"] {
  padding-right: 0 ! important;
}

mjx-mtable[justify="right"][side="right"] {
  padding-left: 0 ! important;
}

mjx-mtable[align] {
  vertical-align: baseline;
}

mjx-mtable[align="top"] > mjx-table {
  vertical-align: top;
}

mjx-mtable[align="bottom"] > mjx-table {
  vertical-align: bottom;
}

mjx-mtable[side="right"] mjx-labels {
  min-width: 100%;
}

mjx-mtr {
  display: table-row;
  text-align: left;
}

mjx-mtr[rowalign="top"] > mjx-mtd {
  vertical-align: top;
}

mjx-mtr[rowalign="center"] > mjx-mtd {
  vertical-align: middle;
}

mjx-mtr[rowalign="bottom"] > mjx-mtd {
  vertical-align: bottom;
}

mjx-mtr[rowalign="baseline"] > mjx-mtd {
  vertical-align: baseline;
}

mjx-mtr[rowalign="axis"] > mjx-mtd {
  vertical-align: .25em;
}

mjx-mtd {
  display: table-cell;
  text-align: center;
  padding: .215em .4em;
}

mjx-mtd:first-child {
  padding-left: 0;
}

mjx-mtd:last-child {
  padding-right: 0;
}

mjx-mtable > * > mjx-itable > *:first-child > mjx-mtd {
  padding-top: 0;
}

mjx-mtable > * > mjx-itable > *:last-child > mjx-mtd {
  padding-bottom: 0;
}

mjx-tstrut {
  display: inline-block;
  height: 1em;
  vertical-align: -.25em;
}

mjx-labels[align="left"] > mjx-mtr > mjx-mtd {
  text-align: left;
}

mjx-labels[align="right"] > mjx-mtr > mjx-mtd {
  text-align: right;
}

mjx-mtd[extra] {
  padding: 0;
}

mjx-mtd[rowalign="top"] {
  vertical-align: top;
}

mjx-mtd[rowalign="center"] {
  vertical-align: middle;
}

mjx-mtd[rowalign="bottom"] {
  vertical-align: bottom;
}

mjx-mtd[rowalign="baseline"] {
  vertical-align: baseline;
}

mjx-mtd[rowalign="axis"] {
  vertical-align: .25em;
}

mjx-c::before {
  display: block;
  width: 0;
}

.MJX-TEX {
  font-family: MJXZERO, MJXTEX;
}

.TEX-B {
  font-family: MJXZERO, MJXTEX-B;
}

.TEX-I {
  font-family: MJXZERO, MJXTEX-I;
}

.TEX-MI {
  font-family: MJXZERO, MJXTEX-MI;
}

.TEX-BI {
  font-family: MJXZERO, MJXTEX-BI;
}

.TEX-S1 {
  font-family: MJXZERO, MJXTEX-S1;
}

.TEX-S2 {
  font-family: MJXZERO, MJXTEX-S2;
}

.TEX-S3 {
  font-family: MJXZERO, MJXTEX-S3;
}

.TEX-S4 {
  font-family: MJXZERO, MJXTEX-S4;
}

.TEX-A {
  font-family: MJXZERO, MJXTEX-A;
}

.TEX-C {
  font-family: MJXZERO, MJXTEX-C;
}

.TEX-CB {
  font-family: MJXZERO, MJXTEX-CB;
}

.TEX-FR {
  font-family: MJXZERO, MJXTEX-FR;
}

.TEX-FRB {
  font-family: MJXZERO, MJXTEX-FRB;
}

.TEX-SS {
  font-family: MJXZERO, MJXTEX-SS;
}

.TEX-SSB {
  font-family: MJXZERO, MJXTEX-SSB;
}

.TEX-SSI {
  font-family: MJXZERO, MJXTEX-SSI;
}

.TEX-SC {
  font-family: MJXZERO, MJXTEX-SC;
}

.TEX-T {
  font-family: MJXZERO, MJXTEX-T;
}

.TEX-V {
  font-family: MJXZERO, MJXTEX-V;
}

.TEX-VB {
  font-family: MJXZERO, MJXTEX-VB;
}

mjx-stretchy-v mjx-c, mjx-stretchy-h mjx-c {
  font-family: MJXZERO, MJXTEX-S1, MJXTEX-S4, MJXTEX, MJXTEX-A ! important;
}

@font-face /* 0 */ {
  font-family: MJXZERO;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Zero.woff") format("woff");
}

@font-face /* 1 */ {
  font-family: MJXTEX;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Main-Regular.woff") format("woff");
}

@font-face /* 2 */ {
  font-family: MJXTEX-B;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Main-Bold.woff") format("woff");
}

@font-face /* 3 */ {
  font-family: MJXTEX-I;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Math-Italic.woff") format("woff");
}

@font-face /* 4 */ {
  font-family: MJXTEX-MI;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Main-Italic.woff") format("woff");
}

@font-face /* 5 */ {
  font-family: MJXTEX-BI;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Math-BoldItalic.woff") format("woff");
}

@font-face /* 6 */ {
  font-family: MJXTEX-S1;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Size1-Regular.woff") format("woff");
}

@font-face /* 7 */ {
  font-family: MJXTEX-S2;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Size2-Regular.woff") format("woff");
}

@font-face /* 8 */ {
  font-family: MJXTEX-S3;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Size3-Regular.woff") format("woff");
}

@font-face /* 9 */ {
  font-family: MJXTEX-S4;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Size4-Regular.woff") format("woff");
}

@font-face /* 10 */ {
  font-family: MJXTEX-A;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_AMS-Regular.woff") format("woff");
}

@font-face /* 11 */ {
  font-family: MJXTEX-C;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Calligraphic-Regular.woff") format("woff");
}

@font-face /* 12 */ {
  font-family: MJXTEX-CB;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Calligraphic-Bold.woff") format("woff");
}

@font-face /* 13 */ {
  font-family: MJXTEX-FR;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Fraktur-Regular.woff") format("woff");
}

@font-face /* 14 */ {
  font-family: MJXTEX-FRB;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Fraktur-Bold.woff") format("woff");
}

@font-face /* 15 */ {
  font-family: MJXTEX-SS;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_SansSerif-Regular.woff") format("woff");
}

@font-face /* 16 */ {
  font-family: MJXTEX-SSB;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_SansSerif-Bold.woff") format("woff");
}

@font-face /* 17 */ {
  font-family: MJXTEX-SSI;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_SansSerif-Italic.woff") format("woff");
}

@font-face /* 18 */ {
  font-family: MJXTEX-SC;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Script-Regular.woff") format("woff");
}

@font-face /* 19 */ {
  font-family: MJXTEX-T;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Typewriter-Regular.woff") format("woff");
}

@font-face /* 20 */ {
  font-family: MJXTEX-V;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Vector-Regular.woff") format("woff");
}

@font-face /* 21 */ {
  font-family: MJXTEX-VB;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Vector-Bold.woff") format("woff");
}

mjx-stretchy-v.mjx-c5B mjx-beg mjx-c::before {
  content: "\23A1";
  padding: 1.154em 0.667em 0.645em 0;
}

mjx-stretchy-v.mjx-c5B mjx-ext mjx-c::before {
  content: "\23A2";
  width: 0.667em;
}

mjx-stretchy-v.mjx-c5B mjx-end mjx-c::before {
  content: "\23A3";
  padding: 1.155em 0.667em 0.644em 0;
}

mjx-stretchy-v.mjx-c5B > mjx-end {
  margin-top: -1.799em;
}

mjx-stretchy-v.mjx-c5B > mjx-ext {
  border-top-width: 1.769em;
  border-bottom-width: 1.769em;
}

mjx-stretchy-v.mjx-c5D mjx-beg mjx-c::before {
  content: "\23A4";
  padding: 1.154em 0.667em 0.645em 0;
}

mjx-stretchy-v.mjx-c5D mjx-ext mjx-c::before {
  content: "\23A5";
  width: 0.667em;
}

mjx-stretchy-v.mjx-c5D mjx-end mjx-c::before {
  content: "\23A6";
  padding: 1.155em 0.667em 0.644em 0;
}

mjx-stretchy-v.mjx-c5D > mjx-end {
  margin-top: -1.799em;
}

mjx-stretchy-v.mjx-c5D > mjx-ext {
  border-top-width: 1.769em;
  border-bottom-width: 1.769em;
}

mjx-c.mjx-c49::before {
  padding: 0.683em 0.361em 0 0;
  content: "I";
}

mjx-c.mjx-c51::before {
  padding: 0.705em 0.778em 0.193em 0;
  content: "Q";
}

mjx-c.mjx-c56::before {
  padding: 0.683em 0.75em 0.022em 0;
  content: "V";
}

mjx-c.mjx-c3D::before {
  padding: 0.583em 0.778em 0.082em 0;
  content: "=";
}

mjx-c.mjx-c28::before {
  padding: 0.75em 0.389em 0.25em 0;
  content: "(";
}

mjx-c.mjx-c31::before {
  padding: 0.666em 0.5em 0 0;
  content: "1";
}

mjx-c.mjx-c2212::before {
  padding: 0.583em 0.778em 0.082em 0;
  content: "\2212";
}

mjx-c.mjx-c2211.TEX-S1::before {
  padding: 0.75em 1.056em 0.25em 0;
  content: "\2211";
}

mjx-c.mjx-c1D458.TEX-I::before {
  padding: 0.694em 0.521em 0.011em 0;
  content: "k";
}

mjx-c.mjx-c1D456.TEX-I::before {
  padding: 0.661em 0.345em 0.011em 0;
  content: "i";
}

mjx-c.mjx-c1D45D.TEX-I::before {
  padding: 0.442em 0.503em 0.194em 0;
  content: "p";
}

mjx-c.mjx-c32::before {
  padding: 0.666em 0.5em 0 0;
  content: "2";
}

mjx-c.mjx-c29::before {
  padding: 0.75em 0.389em 0.25em 0;
  content: ")";
}

mjx-c.mjx-c2F::before {
  padding: 0.75em 0.5em 0.25em 0;
  content: "/";
}

mjx-c.mjx-c1D444.TEX-I::before {
  padding: 0.704em 0.791em 0.194em 0;
  content: "Q";
}

mjx-c.mjx-c33::before {
  padding: 0.665em 0.5em 0.022em 0;
  content: "3";
}

mjx-c.mjx-cD7::before {
  padding: 0.491em 0.778em 0 0;
  content: "\D7";
}

mjx-c.mjx-c1D44B.TEX-I::before {
  padding: 0.683em 0.852em 0 0;
  content: "X";
}

mjx-c.mjx-c1D443.TEX-I::before {
  padding: 0.683em 0.751em 0 0;
  content: "P";
}

mjx-c.mjx-c1D465.TEX-I::before {
  padding: 0.442em 0.572em 0.011em 0;
  content: "x";
}

mjx-c.mjx-c1D45B.TEX-I::before {
  padding: 0.442em 0.6em 0.011em 0;
  content: "n";
}

mjx-c.mjx-c1D441.TEX-I::before {
  padding: 0.683em 0.888em 0 0;
  content: "N";
}

mjx-c.mjx-c2C::before {
  padding: 0.121em 0.278em 0.194em 0;
  content: ",";
}

mjx-c.mjx-c1D44C.TEX-I::before {
  padding: 0.683em 0.763em 0 0;
  content: "Y";
}

mjx-c.mjx-c1D466.TEX-I::before {
  padding: 0.442em 0.49em 0.205em 0;
  content: "y";
}

mjx-c.mjx-c1D712.TEX-I::before {
  padding: 0.442em 0.626em 0.204em 0;
  content: "\3C7";
}

mjx-c.mjx-c2211.TEX-S2::before {
  padding: 0.95em 1.444em 0.45em 0;
  content: "\2211";
}

mjx-c.mjx-c1D457.TEX-I::before {
  padding: 0.661em 0.412em 0.204em 0;
  content: "j";
}

mjx-c.mjx-c1D442.TEX-I::before {
  padding: 0.704em 0.763em 0.022em 0;
  content: "O";
}

mjx-c.mjx-c1D438.TEX-I::before {
  padding: 0.68em 0.764em 0 0;
  content: "E";
}

mjx-c.mjx-c1D449.TEX-I::before {
  padding: 0.683em 0.769em 0.022em 0;
  content: "V";
}

mjx-c.mjx-c221A.TEX-S4::before {
  padding: 1.75em 1.02em 1.25em 0;
  content: "\221A";
}

mjx-c.mjx-c6D::before {
  padding: 0.442em 0.833em 0 0;
  content: "m";
}

mjx-c.mjx-c69::before {
  padding: 0.669em 0.278em 0 0;
  content: "i";
}

mjx-c.mjx-c6E::before {
  padding: 0.442em 0.556em 0 0;
  content: "n";
}

mjx-c.mjx-c1D45F.TEX-I::before {
  padding: 0.442em 0.451em 0.011em 0;
  content: "r";
}

mjx-c.mjx-c1D450.TEX-I::before {
  padding: 0.442em 0.433em 0.011em 0;
  content: "c";
}

mjx-c.mjx-c50::before {
  padding: 0.683em 0.681em 0 0;
  content: "P";
}

mjx-c.mjx-c72::before {
  padding: 0.442em 0.392em 0 0;
  content: "r";
}

mjx-c.mjx-c65::before {
  padding: 0.448em 0.444em 0.011em 0;
  content: "e";
}

mjx-c.mjx-c63::before {
  padding: 0.448em 0.444em 0.011em 0;
  content: "c";
}

mjx-c.mjx-c74::before {
  padding: 0.615em 0.389em 0.01em 0;
  content: "t";
}

mjx-c.mjx-c54::before {
  padding: 0.677em 0.722em 0 0;
  content: "T";
}

mjx-c.mjx-c64::before {
  padding: 0.694em 0.556em 0.011em 0;
  content: "d";
}

mjx-c.mjx-c61::before {
  padding: 0.448em 0.5em 0.011em 0;
  content: "a";
}

mjx-c.mjx-c79::before {
  padding: 0.431em 0.528em 0.204em 0;
  content: "y";
}

mjx-c.mjx-c20::before {
  padding: 0 0.25em 0 0;
  content: " ";
}

mjx-c.mjx-c77::before {
  padding: 0.431em 0.722em 0.011em 0;
  content: "w";
}

mjx-c.mjx-c6B::before {
  padding: 0.694em 0.528em 0 0;
  content: "k";
}

mjx-c.mjx-c6F::before {
  padding: 0.448em 0.5em 0.01em 0;
  content: "o";
}

mjx-c.mjx-c68::before {
  padding: 0.694em 0.556em 0 0;
  content: "h";
}

mjx-c.mjx-c45::before {
  padding: 0.68em 0.681em 0 0;
  content: "E";
}

mjx-c.mjx-c5B::before {
  padding: 0.75em 0.278em 0.25em 0;
  content: "[";
}

mjx-c.mjx-c1D461.TEX-I::before {
  padding: 0.626em 0.361em 0.011em 0;
  content: "t";
}

mjx-c.mjx-c5D::before {
  padding: 0.75em 0.278em 0.25em 0;
  content: "]";
}

mjx-c.mjx-c78::before {
  padding: 0.431em 0.528em 0 0;
  content: "x";
}

mjx-c.mjx-c70::before {
  padding: 0.442em 0.556em 0.194em 0;
  content: "p";
}

mjx-c.mjx-c1D6FD.TEX-I::before {
  padding: 0.705em 0.566em 0.194em 0;
  content: "\3B2";
}

mjx-c.mjx-c223C::before {
  padding: 0.367em 0.778em 0 0;
  content: "\223C";
}

mjx-c.mjx-c1D45C.TEX-I::before {
  padding: 0.441em 0.485em 0.011em 0;
  content: "o";
}

mjx-c.mjx-c1D460.TEX-I::before {
  padding: 0.442em 0.469em 0.01em 0;
  content: "s";
}

mjx-c.mjx-c1D706.TEX-I::before {
  padding: 0.694em 0.583em 0.012em 0;
  content: "\3BB";
}

mjx-c.mjx-c6C::before {
  padding: 0.694em 0.278em 0 0;
  content: "l";
}

mjx-c.mjx-c67::before {
  padding: 0.453em 0.5em 0.206em 0;
  content: "g";
}

mjx-c.mjx-c30::before {
  padding: 0.666em 0.5em 0.022em 0;
  content: "0";
}

mjx-c.mjx-c2B::before {
  padding: 0.583em 0.778em 0.082em 0;
  content: "+";
}

mjx-c.mjx-c2E::before {
  padding: 0.12em 0.278em 0 0;
  content: ".";
}

mjx-c.mjx-c1D435.TEX-I::before {
  padding: 0.683em 0.759em 0 0;
  content: "B";
}

mjx-c.mjx-c1D707.TEX-I::before {
  padding: 0.442em 0.603em 0.216em 0;
  content: "\3BC";
}

mjx-c.mjx-c1D703.TEX-I::before {
  padding: 0.705em 0.469em 0.01em 0;
  content: "\3B8";
}

mjx-c.mjx-c1D452.TEX-I::before {
  padding: 0.442em 0.466em 0.011em 0;
  content: "e";
}

mjx-c.mjx-c27F6::before {
  padding: 0.511em 1.638em 0.011em 0;
  content: "\27F6";
}

mjx-c.mjx-c43::before {
  padding: 0.705em 0.722em 0.021em 0;
  content: "C";
}

mjx-c.mjx-c1D462.TEX-I::before {
  padding: 0.442em 0.572em 0.011em 0;
  content: "u";
}

mjx-c.mjx-c1D463.TEX-I::before {
  padding: 0.443em 0.485em 0.011em 0;
  content: "v";
}

mjx-c.mjx-c62::before {
  padding: 0.694em 0.556em 0.011em 0;
  content: "b";
}

mjx-c.mjx-c1D447.TEX-I::before {
  padding: 0.677em 0.704em 0 0;
  content: "T";
}

mjx-c.mjx-c1D446.TEX-I::before {
  padding: 0.705em 0.645em 0.022em 0;
  content: "S";
}

mjx-c.mjx-c1D445.TEX-I::before {
  padding: 0.683em 0.759em 0.021em 0;
  content: "R";
}

mjx-c.mjx-c5E::before {
  padding: 0.694em 0.5em 0 0;
  content: "^";
}

mjx-c.mjx-c1D453.TEX-I::before {
  padding: 0.705em 0.55em 0.205em 0;
  content: "f";
}

mjx-c.mjx-c210E.TEX-I::before {
  padding: 0.694em 0.576em 0.011em 0;
  content: "h";
}

mjx-c.mjx-c1D43E.TEX-I::before {
  padding: 0.683em 0.889em 0 0;
  content: "K";
}

mjx-c.mjx-c28.TEX-S3::before {
  padding: 1.45em 0.736em 0.949em 0;
  content: "(";
}

mjx-c.mjx-c29.TEX-S3::before {
  padding: 1.45em 0.736em 0.949em 0;
  content: ")";
}

mjx-c.mjx-c73::before {
  padding: 0.448em 0.394em 0.011em 0;
  content: "s";
}

mjx-c.mjx-c75::before {
  padding: 0.442em 0.556em 0.011em 0;
  content: "u";
}

mjx-c.mjx-c66::before {
  padding: 0.705em 0.372em 0 0;
  content: "f";
}

mjx-c.mjx-c53::before {
  padding: 0.705em 0.556em 0.022em 0;
  content: "S";
}

mjx-c.mjx-c44::before {
  padding: 0.683em 0.764em 0 0;
  content: "D";
}

mjx-c.mjx-c2208::before {
  padding: 0.54em 0.667em 0.04em 0;
  content: "\2208";
}

mjx-c.mjx-c7B::before {
  padding: 0.75em 0.5em 0.25em 0;
  content: "{";
}

mjx-c.mjx-c7D::before {
  padding: 0.75em 0.5em 0.25em 0;
  content: "}";
}

mjx-c.mjx-c7B.TEX-S3::before {
  padding: 1.45em 0.75em 0.949em 0;
  content: "{";
}

mjx-c.mjx-cA0::before {
  padding: 0 0.25em 0 0;
  content: "\A0";
}

mjx-c.mjx-c3E::before {
  padding: 0.54em 0.778em 0.04em 0;
  content: ">";
}

mjx-c.mjx-c39::before {
  padding: 0.666em 0.5em 0.022em 0;
  content: "9";
}

mjx-c.mjx-c1D44F.TEX-I::before {
  padding: 0.694em 0.429em 0.011em 0;
  content: "b";
}

mjx-c.mjx-c1D440.TEX-I::before {
  padding: 0.683em 1.051em 0 0;
  content: "M";
}

mjx-c.mjx-c1D45A.TEX-I::before {
  padding: 0.442em 0.878em 0.011em 0;
  content: "m";
}

mjx-c.mjx-c46.TEX-C::before {
  padding: 0.683em 0.829em 0.032em 0;
  content: "F";
}

mjx-c.mjx-c4C.TEX-C::before {
  padding: 0.705em 0.69em 0.022em 0;
  content: "L";
}

mjx-c.mjx-c2113::before {
  padding: 0.705em 0.417em 0.02em 0;
  content: "\2113";
}

mjx-c.mjx-c3A9::before {
  padding: 0.704em 0.722em 0 0;
  content: "\3A9";
}

mjx-c.mjx-c1D719.TEX-I::before {
  padding: 0.694em 0.596em 0.205em 0;
  content: "\3D5";
}

mjx-c.mjx-c7C::before {
  padding: 0.75em 0.278em 0.249em 0;
  content: "|";
}

mjx-c.mjx-c1D436.TEX-I::before {
  padding: 0.705em 0.76em 0.022em 0;
  content: "C";
}

mjx-c.mjx-c2225::before {
  padding: 0.75em 0.5em 0.25em 0;
  content: "\2225";
}

mjx-c.mjx-c1D70B.TEX-I::before {
  padding: 0.431em 0.57em 0.011em 0;
  content: "\3C0";
}

mjx-c.mjx-c221A.TEX-S1::before {
  padding: 0.85em 1.02em 0.35em 0;
  content: "\221A";
}

mjx-c.mjx-c1D451.TEX-I::before {
  padding: 0.694em 0.52em 0.01em 0;
  content: "d";
}

mjx-c.mjx-c3A3::before {
  padding: 0.683em 0.722em 0 0;
  content: "\3A3";
}

mjx-c.mjx-c2061::before {
  padding: 0 0 0 0;
  content: "";
}

mjx-c.mjx-c22A4::before {
  padding: 0.668em 0.778em 0 0;
  content: "\22A4";
}
</style><style type="text/css"></style><style data-make-styles-bucket="d" data-priority="0"></style><style id="fui-FluentProviderr0"></style><style>.village-iframe{width:100%;height:100%;border:none;display:block;position:fixed;top:0;left:0;z-index:2147483647;background:#0000003d;color-scheme:light}.village-iframe.village-loading{display:flex;justify-content:center;align-items:center}.village-iframe>.village-spinner{width:1.5rem;height:1.5rem;border:2px solid #000;border-left-color:transparent;border-bottom-color:transparent;border-radius:50%;animation:spin .45s linear infinite}.village-iframe.village-hidden{display:none}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.village-hidden{display:none}[village-paths-data=facepiles]{display:flex;align-items:center;padding-right:.5rem}[village-paths-data=facepiles] img{width:1.5rem;height:1.5rem;border-radius:50%;margin-right:-.5rem}[village-paths-data=facepiles] img.village-facepiler-avatar-not-found{filter:blur(7px)}[village-paths-data=facepiles] img:last-child{margin-right:0}[village-paths-data=count]{padding-right:.25rem}[village-paths-availability=error],[village-paths-availability=found],[village-paths-availability=not-found],[village-paths-availability=not-activated]{display:none!important}[village-paths-availability=loading]{display:inline-flex!important}</style><script id="simplify-jobs-page-script" src="chrome-extension://pbanhockgagggenencehbnadejlgchfc/js/pageScript.bundle.js"></script></head>

<body class="fullcontent quarto-light" data-tabster="{&quot;root&quot;:{}}">

<i tabindex="0" role="none" data-tabster-dummy="" aria-hidden="true" style="position: fixed; height: 1px; width: 1px; opacity: 0.001; z-index: -1; content-visibility: hidden; top: 0px; left: 0px;"></i><div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Le’Sean Roberts </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="data-wrangling-and-statistical-programming-for-nypd-arrest-data-year-to-date---beta" class="level2">
<h2 class="anchored" data-anchor-id="data-wrangling-and-statistical-programming-for-nypd-arrest-data-year-to-date---beta">Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#data-wrangling-and-statistical-programming-for-nypd-arrest-data-year-to-date---beta" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<section id="abstract" class="level3">
<h3 class="anchored" data-anchor-id="abstract">Abstract<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#abstract" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<p>This dataset comprises a comprehensive record of every arrest made by the New York City Police Department (NYPD) during the current calendar year (2025). Each record serves as a granular snapshot of law enforcement activity, capturing the specific nature of the offense, the timing and precise location of the arrest, and the demographic profile of the individual arrested. The data is intended for public transparency and is used by researchers, policymakers, and the public to analyze crime trends, evaluate police resource allocation, and study the demographic impacts of law enforcement across New York City’s five boroughs.</p>
</section>
<section id="guidelines-for-data-usage" class="level3">
<h3 class="anchored" data-anchor-id="guidelines-for-data-usage">Guidelines for Data Usage<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#guidelines-for-data-usage" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<ol type="1">
<li><p><strong>Handling Missing Values</strong>: Note that “null” values in demographic columns (like <code>AGE_GROUP</code> and <code>PERP_SEX</code>) are often explicitly represented as the string <code>"(null)"</code> rather than empty cells. Ensure your data cleaning process accounts for these strings.</p></li>
<li><p><strong>Geospatial Analysis</strong>: Before mapping the data, filter out records where <code>Latitude</code> and <code>Longitude</code> are 0 or null, as these represent arrests where specific location data was not available or recorded.</p></li>
<li><p><strong>Classification Choice</strong>: For broad trend analysis (e.g., “Violent Crime” vs “Property Crime”), use <code>OFNS_DESC</code>. For specific legal analysis, use <code>PD_DESC</code> or <code>LAW_CODE</code>.</p></li>
<li><p><strong>Temporal Trends</strong>: While <code>ARREST_DATE</code> is provided, be mindful that arrest volumes can fluctuate based on seasonal factors, policy changes, and reporting delays.</p></li>
<li><p><strong>Demographic Sensitivity</strong>: When performing demographic analysis, be aware that race and gender data are based on officer observation and reporting protocols, which may have inherent limitations.</p></li>
</ol>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="http://localhost:3787/#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-data-dictionary</span></span>
<span id="cb1-2"><a href="http://localhost:3787/#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "NYPD Arrest Data Dictionary"</span></span>
<span id="cb1-3"><a href="http://localhost:3787/#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb1-4"><a href="http://localhost:3787/#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="http://localhost:3787/#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="http://localhost:3787/#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb5-2"><a href="http://localhost:3787/#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="http://localhost:3787/#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the data frame</span></span>
<span id="cb5-4"><a href="http://localhost:3787/#cb5-4" aria-hidden="true" tabindex="-1"></a>data_dict <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb5-5"><a href="http://localhost:3787/#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Column_Name =</span> <span class="fu">c</span>(</span>
<span id="cb5-6"><a href="http://localhost:3787/#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ARREST_KEY"</span>, <span class="st">"ARREST_DATE"</span>, <span class="st">"PD_CD"</span>, <span class="st">"PD_DESC"</span>, <span class="st">"KY_CD"</span>, </span>
<span id="cb5-7"><a href="http://localhost:3787/#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"OFNS_DESC"</span>, <span class="st">"LAW_CODE"</span>, <span class="st">"LAW_CAT_CD"</span>, <span class="st">"ARREST_BORO"</span>, </span>
<span id="cb5-8"><a href="http://localhost:3787/#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ARREST_PRECINCT"</span>, <span class="st">"JURISDICTION_CODE"</span>, <span class="st">"AGE_GROUP"</span>, </span>
<span id="cb5-9"><a href="http://localhost:3787/#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PERP_SEX"</span>, <span class="st">"PERP_RACE"</span>, <span class="st">"X_COORD_CD"</span>, <span class="st">"Y_COORD_CD"</span>, </span>
<span id="cb5-10"><a href="http://localhost:3787/#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Latitude"</span>, <span class="st">"Longitude"</span>, <span class="st">"Location"</span></span>
<span id="cb5-11"><a href="http://localhost:3787/#cb5-11" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb5-12"><a href="http://localhost:3787/#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">Data_Type =</span> <span class="fu">c</span>(</span>
<span id="cb5-13"><a href="http://localhost:3787/#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Integer"</span>, <span class="st">"Date"</span>, <span class="st">"Integer"</span>, <span class="st">"String"</span>, <span class="st">"Integer"</span>, </span>
<span id="cb5-14"><a href="http://localhost:3787/#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"String"</span>, <span class="st">"String"</span>, <span class="st">"String"</span>, <span class="st">"String"</span>, </span>
<span id="cb5-15"><a href="http://localhost:3787/#cb5-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Integer"</span>, <span class="st">"Integer"</span>, <span class="st">"String"</span>, </span>
<span id="cb5-16"><a href="http://localhost:3787/#cb5-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"String"</span>, <span class="st">"String"</span>, <span class="st">"Integer"</span>, <span class="st">"Integer"</span>, </span>
<span id="cb5-17"><a href="http://localhost:3787/#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Decimal"</span>, <span class="st">"Decimal"</span>, <span class="st">"String"</span></span>
<span id="cb5-18"><a href="http://localhost:3787/#cb5-18" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb5-19"><a href="http://localhost:3787/#cb5-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">Description =</span> <span class="fu">c</span>(</span>
<span id="cb5-20"><a href="http://localhost:3787/#cb5-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Randomly generated ID number for each arrest."</span>,</span>
<span id="cb5-21"><a href="http://localhost:3787/#cb5-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Exact date of arrest for the reported event."</span>,</span>
<span id="cb5-22"><a href="http://localhost:3787/#cb5-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Three-digit internal classification code (granular)."</span>,</span>
<span id="cb5-23"><a href="http://localhost:3787/#cb5-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Description of internal classification code (PD_CD)."</span>,</span>
<span id="cb5-24"><a href="http://localhost:3787/#cb5-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Three-digit internal classification code (general)."</span>,</span>
<span id="cb5-25"><a href="http://localhost:3787/#cb5-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Description of the general offense category (KY_CD)."</span>,</span>
<span id="cb5-26"><a href="http://localhost:3787/#cb5-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Law code for the offense."</span>,</span>
<span id="cb5-27"><a href="http://localhost:3787/#cb5-27" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Level of offense: F (Felony), M (Misdemeanor), V (Violation)."</span>,</span>
<span id="cb5-28"><a href="http://localhost:3787/#cb5-28" aria-hidden="true" tabindex="-1"></a>    <span class="st">"B (Bronx), S (Staten Island), K (Brooklyn), M (Manhattan), Q (Queens)."</span>,</span>
<span id="cb5-29"><a href="http://localhost:3787/#cb5-29" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Precinct where the arrest occurred."</span>,</span>
<span id="cb5-30"><a href="http://localhost:3787/#cb5-30" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Jurisdiction responsible: 0 (Patrol), 1 (Transit), 2 (Housing)."</span>,</span>
<span id="cb5-31"><a href="http://localhost:3787/#cb5-31" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Perpetrator’s age group."</span>,</span>
<span id="cb5-32"><a href="http://localhost:3787/#cb5-32" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Perpetrator’s sex: M (Male), F (Female)."</span>,</span>
<span id="cb5-33"><a href="http://localhost:3787/#cb5-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Perpetrator’s race."</span>,</span>
<span id="cb5-34"><a href="http://localhost:3787/#cb5-34" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Midblock X-coordinate (State Plane Coordinate System)."</span>,</span>
<span id="cb5-35"><a href="http://localhost:3787/#cb5-35" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Midblock Y-coordinate (State Plane Coordinate System)."</span>,</span>
<span id="cb5-36"><a href="http://localhost:3787/#cb5-36" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Latitude coordinate for Global Coordinate System."</span>,</span>
<span id="cb5-37"><a href="http://localhost:3787/#cb5-37" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Longitude coordinate for Global Coordinate System."</span>,</span>
<span id="cb5-38"><a href="http://localhost:3787/#cb5-38" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Combined Geocoded Location Point."</span></span>
<span id="cb5-39"><a href="http://localhost:3787/#cb5-39" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-40"><a href="http://localhost:3787/#cb5-40" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-41"><a href="http://localhost:3787/#cb5-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-42"><a href="http://localhost:3787/#cb5-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Render as a beautiful table</span></span>
<span id="cb5-43"><a href="http://localhost:3787/#cb5-43" aria-hidden="true" tabindex="-1"></a>data_dict <span class="sc">|&gt;</span></span>
<span id="cb5-44"><a href="http://localhost:3787/#cb5-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span></span>
<span id="cb5-45"><a href="http://localhost:3787/#cb5-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb5-46"><a href="http://localhost:3787/#cb5-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Data Dictionary"</span>,</span>
<span id="cb5-47"><a href="http://localhost:3787/#cb5-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"NYPD Arrest Data Year-to-Date"</span></span>
<span id="cb5-48"><a href="http://localhost:3787/#cb5-48" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb5-49"><a href="http://localhost:3787/#cb5-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb5-50"><a href="http://localhost:3787/#cb5-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">Column_Name =</span> <span class="st">"Field"</span>,</span>
<span id="cb5-51"><a href="http://localhost:3787/#cb5-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">Data_Type =</span> <span class="st">"Type"</span>,</span>
<span id="cb5-52"><a href="http://localhost:3787/#cb5-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">Description =</span> <span class="st">"Definition"</span></span>
<span id="cb5-53"><a href="http://localhost:3787/#cb5-53" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb5-54"><a href="http://localhost:3787/#cb5-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb5-55"><a href="http://localhost:3787/#cb5-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.font.size =</span> <span class="fu">px</span>(<span class="dv">14</span>),</span>
<span id="cb5-56"><a href="http://localhost:3787/#cb5-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">column_labels.background.color =</span> <span class="st">"#f4f4f4"</span></span>
<span id="cb5-57"><a href="http://localhost:3787/#cb5-57" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div id="fmjfahfuok" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#fmjfahfuok table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#fmjfahfuok thead, #fmjfahfuok tbody, #fmjfahfuok tfoot, #fmjfahfuok tr, #fmjfahfuok td, #fmjfahfuok th {
  border-style: none;
}

#fmjfahfuok p {
  margin: 0;
  padding: 0;
}

#fmjfahfuok .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 14px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#fmjfahfuok .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#fmjfahfuok .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#fmjfahfuok .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#fmjfahfuok .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fmjfahfuok .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fmjfahfuok .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fmjfahfuok .gt_col_heading {
  color: #333333;
  background-color: #F4F4F4;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#fmjfahfuok .gt_column_spanner_outer {
  color: #333333;
  background-color: #F4F4F4;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#fmjfahfuok .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#fmjfahfuok .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#fmjfahfuok .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#fmjfahfuok .gt_spanner_row {
  border-bottom-style: hidden;
}

#fmjfahfuok .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#fmjfahfuok .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#fmjfahfuok .gt_from_md > :first-child {
  margin-top: 0;
}

#fmjfahfuok .gt_from_md > :last-child {
  margin-bottom: 0;
}

#fmjfahfuok .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#fmjfahfuok .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#fmjfahfuok .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#fmjfahfuok .gt_row_group_first td {
  border-top-width: 2px;
}

#fmjfahfuok .gt_row_group_first th {
  border-top-width: 2px;
}

#fmjfahfuok .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fmjfahfuok .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#fmjfahfuok .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#fmjfahfuok .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fmjfahfuok .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fmjfahfuok .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#fmjfahfuok .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#fmjfahfuok .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#fmjfahfuok .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fmjfahfuok .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fmjfahfuok .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fmjfahfuok .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fmjfahfuok .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fmjfahfuok .gt_left {
  text-align: left;
}

#fmjfahfuok .gt_center {
  text-align: center;
}

#fmjfahfuok .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#fmjfahfuok .gt_font_normal {
  font-weight: normal;
}

#fmjfahfuok .gt_font_bold {
  font-weight: bold;
}

#fmjfahfuok .gt_font_italic {
  font-style: italic;
}

#fmjfahfuok .gt_super {
  font-size: 65%;
}

#fmjfahfuok .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#fmjfahfuok .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#fmjfahfuok .gt_indent_1 {
  text-indent: 5px;
}

#fmjfahfuok .gt_indent_2 {
  text-indent: 10px;
}

#fmjfahfuok .gt_indent_3 {
  text-indent: 15px;
}

#fmjfahfuok .gt_indent_4 {
  text-indent: 20px;
}

#fmjfahfuok .gt_indent_5 {
  text-indent: 25px;
}

#fmjfahfuok .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#fmjfahfuok div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<td colspan="3" class="gt_heading gt_title gt_font_normal">Data Dictionary</td>
</tr>
<tr class="gt_heading even">
<td colspan="3" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">NYPD Arrest Data Year-to-Date</td>
</tr>
<tr class="gt_col_headings header">
<th id="Column_Name" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Field</th>
<th id="Data_Type" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Type</th>
<th id="Description" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Definition</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Column_Name">ARREST_KEY</td>
<td class="gt_row gt_left" headers="Data_Type">Integer</td>
<td class="gt_row gt_left" headers="Description">Randomly generated ID number for each arrest.</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Column_Name">ARREST_DATE</td>
<td class="gt_row gt_left" headers="Data_Type">Date</td>
<td class="gt_row gt_left" headers="Description">Exact date of arrest for the reported event.</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Column_Name">PD_CD</td>
<td class="gt_row gt_left" headers="Data_Type">Integer</td>
<td class="gt_row gt_left" headers="Description">Three-digit internal classification code (granular).</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Column_Name">PD_DESC</td>
<td class="gt_row gt_left" headers="Data_Type">String</td>
<td class="gt_row gt_left" headers="Description">Description of internal classification code (PD_CD).</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Column_Name">KY_CD</td>
<td class="gt_row gt_left" headers="Data_Type">Integer</td>
<td class="gt_row gt_left" headers="Description">Three-digit internal classification code (general).</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Column_Name">OFNS_DESC</td>
<td class="gt_row gt_left" headers="Data_Type">String</td>
<td class="gt_row gt_left" headers="Description">Description of the general offense category (KY_CD).</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Column_Name">LAW_CODE</td>
<td class="gt_row gt_left" headers="Data_Type">String</td>
<td class="gt_row gt_left" headers="Description">Law code for the offense.</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Column_Name">LAW_CAT_CD</td>
<td class="gt_row gt_left" headers="Data_Type">String</td>
<td class="gt_row gt_left" headers="Description">Level of offense: F (Felony), M (Misdemeanor), V (Violation).</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Column_Name">ARREST_BORO</td>
<td class="gt_row gt_left" headers="Data_Type">String</td>
<td class="gt_row gt_left" headers="Description">B (Bronx), S (Staten Island), K (Brooklyn), M (Manhattan), Q (Queens).</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Column_Name">ARREST_PRECINCT</td>
<td class="gt_row gt_left" headers="Data_Type">Integer</td>
<td class="gt_row gt_left" headers="Description">Precinct where the arrest occurred.</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Column_Name">JURISDICTION_CODE</td>
<td class="gt_row gt_left" headers="Data_Type">Integer</td>
<td class="gt_row gt_left" headers="Description">Jurisdiction responsible: 0 (Patrol), 1 (Transit), 2 (Housing).</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Column_Name">AGE_GROUP</td>
<td class="gt_row gt_left" headers="Data_Type">String</td>
<td class="gt_row gt_left" headers="Description">Perpetrator’s age group.</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Column_Name">PERP_SEX</td>
<td class="gt_row gt_left" headers="Data_Type">String</td>
<td class="gt_row gt_left" headers="Description">Perpetrator’s sex: M (Male), F (Female).</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Column_Name">PERP_RACE</td>
<td class="gt_row gt_left" headers="Data_Type">String</td>
<td class="gt_row gt_left" headers="Description">Perpetrator’s race.</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Column_Name">X_COORD_CD</td>
<td class="gt_row gt_left" headers="Data_Type">Integer</td>
<td class="gt_row gt_left" headers="Description">Midblock X-coordinate (State Plane Coordinate System).</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Column_Name">Y_COORD_CD</td>
<td class="gt_row gt_left" headers="Data_Type">Integer</td>
<td class="gt_row gt_left" headers="Description">Midblock Y-coordinate (State Plane Coordinate System).</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Column_Name">Latitude</td>
<td class="gt_row gt_left" headers="Data_Type">Decimal</td>
<td class="gt_row gt_left" headers="Description">Latitude coordinate for Global Coordinate System.</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Column_Name">Longitude</td>
<td class="gt_row gt_left" headers="Data_Type">Decimal</td>
<td class="gt_row gt_left" headers="Description">Longitude coordinate for Global Coordinate System.</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Column_Name">Location</td>
<td class="gt_row gt_left" headers="Data_Type">String</td>
<td class="gt_row gt_left" headers="Description">Combined Geocoded Location Point.</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="data-assimilation" class="level3">
<h3 class="anchored" data-anchor-id="data-assimilation">Data Assimilation<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#data-assimilation" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="http://localhost:3787/#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Loading common libraries for data assimilation and probing</span></span>
<span id="cb6-2"><a href="http://localhost:3787/#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ forcats   1.0.1     ✔ readr     2.1.6
✔ ggplot2   4.0.1     ✔ stringr   1.6.0
✔ lubridate 1.9.4     ✔ tibble    3.3.0
✔ purrr     1.2.1     ✔ tidyr     1.3.2
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="http://localhost:3787/#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb8-2"><a href="http://localhost:3787/#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb8-3"><a href="http://localhost:3787/#cb8-3" aria-hidden="true" tabindex="-1"></a>NYPD_Arrest_Data_Year_to_Date_20260121 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"C:/Users/verlene/Downloads/NYPD_Arrest_Data_(Year_to_Date)_20260121.csv"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 212486 Columns: 19
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (10): ARREST_DATE, PD_DESC, OFNS_DESC, LAW_CODE, LAW_CAT_CD, ARREST_BORO...
dbl  (9): ARREST_KEY, PD_CD, KY_CD, ARREST_PRECINCT, JURISDICTION_CODE, X_CO...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="http://localhost:3787/#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(NYPD_Arrest_Data_Year_to_Date_20260121)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>spc_tbl_ [212,486 × 19] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
 $ ARREST_KEY       : num [1:212486] 2.99e+08 2.99e+08 2.99e+08 2.99e+08 3.00e+08 ...
 $ ARREST_DATE      : chr [1:212486] "01/02/2025" "01/07/2025" "01/08/2025" "01/09/2025" ...
 $ PD_CD            : num [1:212486] 782 105 849 259 155 922 105 153 101 101 ...
 $ PD_DESC          : chr [1:212486] "WEAPONS, POSSESSION, ETC" "STRANGULATION 1ST" "NY STATE LAWS,UNCLASSIFIED VIO" "CRIMINAL MISCHIEF,UNCLASSIFIED 4" ...
 $ KY_CD            : num [1:212486] 236 106 677 351 104 348 106 104 344 344 ...
 $ OFNS_DESC        : chr [1:212486] "DANGEROUS WEAPONS" "FELONY ASSAULT" "OTHER STATE LAWS" "CRIMINAL MISCHIEF &amp; RELATED OF" ...
 $ LAW_CODE         : chr [1:212486] "PL 2650101" "PL 1211200" "LOC00000V0" "PL 1450001" ...
 $ LAW_CAT_CD       : chr [1:212486] "M" "F" "V" "M" ...
 $ ARREST_BORO      : chr [1:212486] "Q" "M" "K" "M" ...
 $ ARREST_PRECINCT  : num [1:212486] 115 28 81 7 81 114 10 120 7 115 ...
 $ JURISDICTION_CODE: num [1:212486] 3 0 1 2 0 0 0 0 2 3 ...
 $ AGE_GROUP        : chr [1:212486] "(null)" "25-44" "(null)" "(null)" ...
 $ PERP_SEX         : chr [1:212486] "(null)" "M" "(null)" "(null)" ...
 $ PERP_RACE        : chr [1:212486] "BLACK" "BLACK" "WHITE" "BLACK" ...
 $ X_COORD_CD       : num [1:212486] 0 997439 0 0 1005319 ...
 $ Y_COORD_CD       : num [1:212486] 0 233857 0 0 190473 ...
 $ Latitude         : num [1:212486] 0 40.8 0 0 40.7 ...
 $ Longitude        : num [1:212486] 0 -74 0 0 -73.9 ...
 $ Location         : chr [1:212486] "POINT (0 0)" "POINT (-73.952357 40.808558)" "POINT (0 0)" "POINT (0 0)" ...
 - attr(*, "spec")=
  .. cols(
  ..   ARREST_KEY = col_double(),
  ..   ARREST_DATE = col_character(),
  ..   PD_CD = col_double(),
  ..   PD_DESC = col_character(),
  ..   KY_CD = col_double(),
  ..   OFNS_DESC = col_character(),
  ..   LAW_CODE = col_character(),
  ..   LAW_CAT_CD = col_character(),
  ..   ARREST_BORO = col_character(),
  ..   ARREST_PRECINCT = col_double(),
  ..   JURISDICTION_CODE = col_double(),
  ..   AGE_GROUP = col_character(),
  ..   PERP_SEX = col_character(),
  ..   PERP_RACE = col_character(),
  ..   X_COORD_CD = col_double(),
  ..   Y_COORD_CD = col_double(),
  ..   Latitude = col_double(),
  ..   Longitude = col_double(),
  ..   Location = col_character()
  .. )
 - attr(*, "problems")=&lt;externalptr&gt; </code></pre>
</div>
</div>
</section>
</section>
<section id="clean-grouping-chronology-structure" class="level2">
<h2 class="anchored" data-anchor-id="clean-grouping-chronology-structure">Clean Grouping &amp; Chronology Structure<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#clean-grouping-chronology-structure" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<section id="core-principle" class="level4">
<h4 class="anchored" data-anchor-id="core-principle">1. Core Principle<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#core-principle" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h4>
<p>Crime classification is structural, while chronology is observational. Hence, crime classification must be independent of chronology. Chronology must be layered <em>after</em> classification. Group variables are created <strong>without using time</strong>. Time variables are layered <strong>after classification</strong>. This avoids circular logic (e.g., letting reporting delays distort offense trends).</p>
</section>
<section id="classification-the-what" class="level4">
<h4 class="anchored" data-anchor-id="classification-the-what">2. Classification (The “What”)<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#classification-the-what" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h4>
<p>Observing the level of granularity or detailed crimes descriptions.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="http://localhost:3787/#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb12-2"><a href="http://localhost:3787/#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="http://localhost:3787/#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co"># PD_DESC counts</span></span>
<span id="cb12-4"><a href="http://localhost:3787/#cb12-4" aria-hidden="true" tabindex="-1"></a>counts_PD_DESC <span class="ot">&lt;-</span> NYPD_Arrest_Data_Year_to_Date_20260121 <span class="sc">|&gt;</span></span>
<span id="cb12-5"><a href="http://localhost:3787/#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(PD_DESC, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb12-6"><a href="http://localhost:3787/#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="http://localhost:3787/#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(counts_PD_DESC, <span class="at">n=</span><span class="dv">20</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 257 × 2
   PD_DESC                                       n
   &lt;chr&gt;                                     &lt;int&gt;
 1 ASSAULT 3                                 22272
 2 LARCENY,PETIT FROM OPEN AREAS,            20987
 3 THEFT OF SERVICES, UNCLASSIFIE            12146
 4 ASSAULT 2,1,UNCLASSIFIED                  11933
 5 TRAFFIC,UNCLASSIFIED MISDEMEAN            11081
 6 CONTROLLED SUBSTANCE, POSSESSI             9668
 7 PUBLIC ADMINISTRATION,UNCLASSI             8810
 8 ROBBERY,OPEN AREA UNCLASSIFIED             8399
 9 LARCENY,GRAND FROM OPEN AREAS, UNATTENDED  6457
10 MENACING,UNCLASSIFIED                      5253
11 BURGLARY,UNCLASSIFIED,UNKNOWN              4695
12 CRIMINAL MIS 2 &amp; 3                         4268
13 CONTROLLED SUBSTANCE,INTENT TO             3843
14 CHILD, ENDANGERING WELFARE                 3437
15 FORGERY,ETC.,UNCLASSIFIED-FELO             3436
16 NY STATE LAWS,UNCLASSIFIED VIO             3223
17 AGGRAVATED HARASSMENT 2                    3126
18 STRANGULATION 1ST                          3059
19 CRIMINAL MISCHIEF,UNCLASSIFIED 4           3040
20 WEAPONS, POSSESSION, ETC                   2976
# ℹ 237 more rows</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="http://localhost:3787/#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># OFNS_DESC counts</span></span>
<span id="cb14-2"><a href="http://localhost:3787/#cb14-2" aria-hidden="true" tabindex="-1"></a>counts_OFNS_DESC <span class="ot">&lt;-</span> NYPD_Arrest_Data_Year_to_Date_20260121 <span class="sc">|&gt;</span></span>
<span id="cb14-3"><a href="http://localhost:3787/#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(OFNS_DESC, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb14-4"><a href="http://localhost:3787/#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="http://localhost:3787/#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(counts_OFNS_DESC, <span class="at">n=</span><span class="dv">20</span> )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 61 × 2
   OFNS_DESC                           n
   &lt;chr&gt;                           &lt;int&gt;
 1 ASSAULT 3 &amp; RELATED OFFENSES    30096
 2 PETIT LARCENY                   20987
 3 FELONY ASSAULT                  17370
 4 DANGEROUS DRUGS                 17248
 5 MISCELLANEOUS PENAL LAW         14060
 6 OTHER OFFENSES RELATED TO THEFT 12499
 7 VEHICLE AND TRAFFIC LAWS        11554
 8 CRIMINAL MISCHIEF &amp; RELATED OF   9185
 9 ROBBERY                          8444
10 DANGEROUS WEAPONS                8255
11 GRAND LARCENY                    7933
12 OFFENSES AGAINST PUBLIC ADMINI   7824
13 OTHER STATE LAWS                 5638
14 BURGLARY                         5312
15 SEX CRIMES                       4797
16 OFF. AGNST PUB ORD SENSBLTY &amp;    4037
17 FORGERY                          3471
18 POSSESSION OF STOLEN PROPERTY    2906
19 CRIMINAL TRESPASS                2483
20 OFFENSES INVOLVING FRAUD         2442
# ℹ 41 more rows</code></pre>
</div>
</div>
<p>There is too much granularity with crimes descriptions to have well focused analysis with general crime. Such concerns the attributes PD_DESC and OFNS_DESC. Such attributes are categorical when not considering the penal consequence(s) associated to each crime. For such attributes there are too many unique instances for any compact analysis.</p>
<p>The core principle is to create a mapping that exists independently of time. We use <code>case_when</code> to transform the granular <code>OFNS_DESC</code> into broader “Crime Families.”</p>
<p>The core principle is to create a mapping that exists independently of time. We use <code>case_when</code> to transform the granular <code>OFNS_DESC</code> into broader “Crime Families.”</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="http://localhost:3787/#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># FEATURING: Creating a Crime Family Grouping</span></span>
<span id="cb16-2"><a href="http://localhost:3787/#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"># This creates a static classification layer</span></span>
<span id="cb16-3"><a href="http://localhost:3787/#cb16-3" aria-hidden="true" tabindex="-1"></a>Classification_NYPD_Arrest_data <span class="ot">&lt;-</span> NYPD_Arrest_Data_Year_to_Date_20260121 <span class="sc">|&gt;</span></span>
<span id="cb16-4"><a href="http://localhost:3787/#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CRIME_FAMILY =</span> <span class="fu">case_when</span>(</span>
<span id="cb16-5"><a href="http://localhost:3787/#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(OFNS_DESC, <span class="st">"ASSAULT|RAPE|MURDER|ROBBERY|KIDNAPPING|STRANGULATION"</span>) <span class="sc">~</span> <span class="st">"Violent Crime"</span>,</span>
<span id="cb16-6"><a href="http://localhost:3787/#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(OFNS_DESC, <span class="st">"LARCENY|BURGLARY|CRIMINAL MISCHIEF|STOLEN PROPERTY|AUTO THEFT"</span>) <span class="sc">~</span> <span class="st">"Property Crime"</span>,</span>
<span id="cb16-7"><a href="http://localhost:3787/#cb16-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(OFNS_DESC, <span class="st">"DRUGS|ALCOHOL|INTOXICATED"</span>) <span class="sc">~</span> <span class="st">"Drug/Vice Crime"</span>,</span>
<span id="cb16-8"><a href="http://localhost:3787/#cb16-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(OFNS_DESC, <span class="st">"WEAPONS"</span>) <span class="sc">~</span> <span class="st">"Weapons Crime"</span>,</span>
<span id="cb16-9"><a href="http://localhost:3787/#cb16-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(OFNS_DESC, <span class="st">"FRAUD|FORGERY|BRIBERY|OFFENSES AGAINST PUBLIC ADMIN"</span>) <span class="sc">~</span> <span class="st">"Financial/Administrative"</span>,</span>
<span id="cb16-10"><a href="http://localhost:3787/#cb16-10" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Other/Public Order"</span></span>
<span id="cb16-11"><a href="http://localhost:3787/#cb16-11" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb16-12"><a href="http://localhost:3787/#cb16-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-13"><a href="http://localhost:3787/#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(Classification_NYPD_Arrest_data)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [212,486 × 20] (S3: tbl_df/tbl/data.frame)
 $ ARREST_KEY       : num [1:212486] 2.99e+08 2.99e+08 2.99e+08 2.99e+08 3.00e+08 ...
 $ ARREST_DATE      : chr [1:212486] "01/02/2025" "01/07/2025" "01/08/2025" "01/09/2025" ...
 $ PD_CD            : num [1:212486] 782 105 849 259 155 922 105 153 101 101 ...
 $ PD_DESC          : chr [1:212486] "WEAPONS, POSSESSION, ETC" "STRANGULATION 1ST" "NY STATE LAWS,UNCLASSIFIED VIO" "CRIMINAL MISCHIEF,UNCLASSIFIED 4" ...
 $ KY_CD            : num [1:212486] 236 106 677 351 104 348 106 104 344 344 ...
 $ OFNS_DESC        : chr [1:212486] "DANGEROUS WEAPONS" "FELONY ASSAULT" "OTHER STATE LAWS" "CRIMINAL MISCHIEF &amp; RELATED OF" ...
 $ LAW_CODE         : chr [1:212486] "PL 2650101" "PL 1211200" "LOC00000V0" "PL 1450001" ...
 $ LAW_CAT_CD       : chr [1:212486] "M" "F" "V" "M" ...
 $ ARREST_BORO      : chr [1:212486] "Q" "M" "K" "M" ...
 $ ARREST_PRECINCT  : num [1:212486] 115 28 81 7 81 114 10 120 7 115 ...
 $ JURISDICTION_CODE: num [1:212486] 3 0 1 2 0 0 0 0 2 3 ...
 $ AGE_GROUP        : chr [1:212486] "(null)" "25-44" "(null)" "(null)" ...
 $ PERP_SEX         : chr [1:212486] "(null)" "M" "(null)" "(null)" ...
 $ PERP_RACE        : chr [1:212486] "BLACK" "BLACK" "WHITE" "BLACK" ...
 $ X_COORD_CD       : num [1:212486] 0 997439 0 0 1005319 ...
 $ Y_COORD_CD       : num [1:212486] 0 233857 0 0 190473 ...
 $ Latitude         : num [1:212486] 0 40.8 0 0 40.7 ...
 $ Longitude        : num [1:212486] 0 -74 0 0 -73.9 ...
 $ Location         : chr [1:212486] "POINT (0 0)" "POINT (-73.952357 40.808558)" "POINT (0 0)" "POINT (0 0)" ...
 $ CRIME_FAMILY     : chr [1:212486] "Weapons Crime" "Violent Crime" "Other/Public Order" "Property Crime" ...</code></pre>
</div>
</div>
</section>
<section id="chronology-the-when" class="level4">
<h4 class="anchored" data-anchor-id="chronology-the-when">3. Chronology (The “When”)<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#chronology-the-when" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h4>
<p>Once the classification layer is established, to then apply the temporal layer. This allows the slicing of “Families” by any time unit without altering the underlying classification logic. Now, having the ability to execute desired operations without the logic for “What” (Crime Family) conflicting with “When” (Season/Month).</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="http://localhost:3787/#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># FEATURE: Exact Chronology Layering</span></span>
<span id="cb18-2"><a href="http://localhost:3787/#cb18-2" aria-hidden="true" tabindex="-1"></a>Classified_Temporal_NYPD_Arrest_data <span class="ot">&lt;-</span> Classification_NYPD_Arrest_data <span class="sc">|&gt;</span></span>
<span id="cb18-3"><a href="http://localhost:3787/#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb18-4"><a href="http://localhost:3787/#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">ARREST_DATE =</span> <span class="fu">mdy</span>(ARREST_DATE),</span>
<span id="cb18-5"><a href="http://localhost:3787/#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">YEAR =</span> <span class="fu">year</span>(ARREST_DATE),</span>
<span id="cb18-6"><a href="http://localhost:3787/#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Define exact dates for season transitions</span></span>
<span id="cb18-7"><a href="http://localhost:3787/#cb18-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">SEASON =</span> <span class="fu">case_when</span>(</span>
<span id="cb18-8"><a href="http://localhost:3787/#cb18-8" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Spring: March 20 - June 19</span></span>
<span id="cb18-9"><a href="http://localhost:3787/#cb18-9" aria-hidden="true" tabindex="-1"></a>      ARREST_DATE <span class="sc">&gt;=</span> <span class="fu">make_date</span>(YEAR, <span class="dv">3</span>, <span class="dv">20</span>) <span class="sc">&amp;</span> ARREST_DATE <span class="sc">&lt;=</span> <span class="fu">make_date</span>(YEAR, <span class="dv">6</span>, <span class="dv">19</span>) <span class="sc">~</span> <span class="st">"Spring"</span>,</span>
<span id="cb18-10"><a href="http://localhost:3787/#cb18-10" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Summer: June 20 - September 21</span></span>
<span id="cb18-11"><a href="http://localhost:3787/#cb18-11" aria-hidden="true" tabindex="-1"></a>      ARREST_DATE <span class="sc">&gt;=</span> <span class="fu">make_date</span>(YEAR, <span class="dv">6</span>, <span class="dv">20</span>) <span class="sc">&amp;</span> ARREST_DATE <span class="sc">&lt;=</span> <span class="fu">make_date</span>(YEAR, <span class="dv">9</span>, <span class="dv">21</span>) <span class="sc">~</span> <span class="st">"Summer"</span>,</span>
<span id="cb18-12"><a href="http://localhost:3787/#cb18-12" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Fall: September 22 - December 20</span></span>
<span id="cb18-13"><a href="http://localhost:3787/#cb18-13" aria-hidden="true" tabindex="-1"></a>      ARREST_DATE <span class="sc">&gt;=</span> <span class="fu">make_date</span>(YEAR, <span class="dv">9</span>, <span class="dv">22</span>) <span class="sc">&amp;</span> ARREST_DATE <span class="sc">&lt;=</span> <span class="fu">make_date</span>(YEAR, <span class="dv">12</span>, <span class="dv">20</span>) <span class="sc">~</span> <span class="st">"Fall"</span>,</span>
<span id="cb18-14"><a href="http://localhost:3787/#cb18-14" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Winter: December 21 - March 19 (handling the year crossover)</span></span>
<span id="cb18-15"><a href="http://localhost:3787/#cb18-15" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Winter"</span></span>
<span id="cb18-16"><a href="http://localhost:3787/#cb18-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb18-17"><a href="http://localhost:3787/#cb18-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb18-18"><a href="http://localhost:3787/#cb18-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-19"><a href="http://localhost:3787/#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(Classified_Temporal_NYPD_Arrest_data)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [212,486 × 22] (S3: tbl_df/tbl/data.frame)
 $ ARREST_KEY       : num [1:212486] 2.99e+08 2.99e+08 2.99e+08 2.99e+08 3.00e+08 ...
 $ ARREST_DATE      : Date[1:212486], format: "2025-01-02" "2025-01-07" ...
 $ PD_CD            : num [1:212486] 782 105 849 259 155 922 105 153 101 101 ...
 $ PD_DESC          : chr [1:212486] "WEAPONS, POSSESSION, ETC" "STRANGULATION 1ST" "NY STATE LAWS,UNCLASSIFIED VIO" "CRIMINAL MISCHIEF,UNCLASSIFIED 4" ...
 $ KY_CD            : num [1:212486] 236 106 677 351 104 348 106 104 344 344 ...
 $ OFNS_DESC        : chr [1:212486] "DANGEROUS WEAPONS" "FELONY ASSAULT" "OTHER STATE LAWS" "CRIMINAL MISCHIEF &amp; RELATED OF" ...
 $ LAW_CODE         : chr [1:212486] "PL 2650101" "PL 1211200" "LOC00000V0" "PL 1450001" ...
 $ LAW_CAT_CD       : chr [1:212486] "M" "F" "V" "M" ...
 $ ARREST_BORO      : chr [1:212486] "Q" "M" "K" "M" ...
 $ ARREST_PRECINCT  : num [1:212486] 115 28 81 7 81 114 10 120 7 115 ...
 $ JURISDICTION_CODE: num [1:212486] 3 0 1 2 0 0 0 0 2 3 ...
 $ AGE_GROUP        : chr [1:212486] "(null)" "25-44" "(null)" "(null)" ...
 $ PERP_SEX         : chr [1:212486] "(null)" "M" "(null)" "(null)" ...
 $ PERP_RACE        : chr [1:212486] "BLACK" "BLACK" "WHITE" "BLACK" ...
 $ X_COORD_CD       : num [1:212486] 0 997439 0 0 1005319 ...
 $ Y_COORD_CD       : num [1:212486] 0 233857 0 0 190473 ...
 $ Latitude         : num [1:212486] 0 40.8 0 0 40.7 ...
 $ Longitude        : num [1:212486] 0 -74 0 0 -73.9 ...
 $ Location         : chr [1:212486] "POINT (0 0)" "POINT (-73.952357 40.808558)" "POINT (0 0)" "POINT (0 0)" ...
 $ CRIME_FAMILY     : chr [1:212486] "Weapons Crime" "Violent Crime" "Other/Public Order" "Property Crime" ...
 $ YEAR             : num [1:212486] 2025 2025 2025 2025 2025 ...
 $ SEASON           : chr [1:212486] "Winter" "Winter" "Winter" "Winter" ...</code></pre>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="http://localhost:3787/#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(Classified_Temporal_NYPD_Arrest_data)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 22
  ARREST_KEY ARREST_DATE PD_CD PD_DESC       KY_CD OFNS_DESC LAW_CODE LAW_CAT_CD
       &lt;dbl&gt; &lt;date&gt;      &lt;dbl&gt; &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     
1  298760433 2025-01-02    782 WEAPONS, POS…   236 DANGEROU… PL 2650… M         
2  299030225 2025-01-07    105 STRANGULATIO…   106 FELONY A… PL 1211… F         
3  299127494 2025-01-08    849 NY STATE LAW…   677 OTHER ST… LOC0000… V         
4  299188536 2025-01-09    259 CRIMINAL MIS…   351 CRIMINAL… PL 1450… M         
5  299533742 2025-01-16    155 RAPE 2          104 RAPE      PL 1303… F         
6  299633723 2025-01-17    922 TRAFFIC,UNCL…   348 VEHICLE … VTL0511… M         
# ℹ 14 more variables: ARREST_BORO &lt;chr&gt;, ARREST_PRECINCT &lt;dbl&gt;,
#   JURISDICTION_CODE &lt;dbl&gt;, AGE_GROUP &lt;chr&gt;, PERP_SEX &lt;chr&gt;, PERP_RACE &lt;chr&gt;,
#   X_COORD_CD &lt;dbl&gt;, Y_COORD_CD &lt;dbl&gt;, Latitude &lt;dbl&gt;, Longitude &lt;dbl&gt;,
#   Location &lt;chr&gt;, CRIME_FAMILY &lt;chr&gt;, YEAR &lt;dbl&gt;, SEASON &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="operation-monthly-counts-by-crime-family" class="level4">
<h4 class="anchored" data-anchor-id="operation-monthly-counts-by-crime-family">4. Operation: Monthly Counts by Crime Family<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#operation-monthly-counts-by-crime-family" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h4>
<p>To now observe how different “Families” fluctuate month-to-month.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="http://localhost:3787/#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Monthly Counts by Crime Family </span></span>
<span id="cb22-2"><a href="http://localhost:3787/#cb22-2" aria-hidden="true" tabindex="-1"></a>monthly_summary <span class="ot">&lt;-</span> Classified_Temporal_NYPD_Arrest_data<span class="sc">|&gt;</span></span>
<span id="cb22-3"><a href="http://localhost:3787/#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="at">MONTH =</span> <span class="fu">floor_date</span>(ARREST_DATE, <span class="st">"month"</span>), CRIME_FAMILY) <span class="sc">|&gt;</span></span>
<span id="cb22-4"><a href="http://localhost:3787/#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Total_Arrests =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb22-5"><a href="http://localhost:3787/#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="http://localhost:3787/#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Result: A clean time-series ready for ggplot2</span></span>
<span id="cb22-7"><a href="http://localhost:3787/#cb22-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-8"><a href="http://localhost:3787/#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(monthly_summary)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [54 × 3] (S3: tbl_df/tbl/data.frame)
 $ MONTH        : Date[1:54], format: "2025-01-01" "2025-01-01" ...
 $ CRIME_FAMILY : chr [1:54] "Drug/Vice Crime" "Financial/Administrative" "Other/Public Order" "Property Crime" ...
 $ Total_Arrests: int [1:54] 2519 1857 7891 5337 5965 1020 2220 1467 7061 5130 ...</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="http://localhost:3787/#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(monthly_summary)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  MONTH      CRIME_FAMILY             Total_Arrests
  &lt;date&gt;     &lt;chr&gt;                            &lt;int&gt;
1 2025-01-01 Drug/Vice Crime                   2519
2 2025-01-01 Financial/Administrative          1857
3 2025-01-01 Other/Public Order                7891
4 2025-01-01 Property Crime                    5337
5 2025-01-01 Violent Crime                     5965
6 2025-01-01 Weapons Crime                     1020</code></pre>
</div>
</div>
</section>
</section>
<section id="time-series-development-based-on-crime-family" class="level2">
<h2 class="anchored" data-anchor-id="time-series-development-based-on-crime-family">Time Series Development Based on Crime Family<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#time-series-development-based-on-crime-family" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>Counting the number of NAs in each column of the monthly_summary dataframe to verify there’s no missing values:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="http://localhost:3787/#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># NA counts in monthly_summary</span></span>
<span id="cb26-2"><a href="http://localhost:3787/#cb26-2" aria-hidden="true" tabindex="-1"></a>na_counts <span class="ot">&lt;-</span> <span class="fu">sapply</span>(monthly_summary, <span class="cf">function</span>(x) <span class="fu">sum</span>(<span class="fu">is.na</span>(x)))</span>
<span id="cb26-3"><a href="http://localhost:3787/#cb26-3" aria-hidden="true" tabindex="-1"></a>na_counts</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>        MONTH  CRIME_FAMILY Total_Arrests 
            0             0             0 </code></pre>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="http://localhost:3787/#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Time series for crime family</span></span>
<span id="cb28-2"><a href="http://localhost:3787/#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(monthly_summary, <span class="fu">aes</span>(<span class="at">x =</span> MONTH, <span class="at">y =</span> Total_Arrests,</span>
<span id="cb28-3"><a href="http://localhost:3787/#cb28-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">color =</span> CRIME_FAMILY)) <span class="sc">+</span></span>
<span id="cb28-4"><a href="http://localhost:3787/#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb28-5"><a href="http://localhost:3787/#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb28-6"><a href="http://localhost:3787/#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>CRIME_FAMILY, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb28-7"><a href="http://localhost:3787/#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb28-8"><a href="http://localhost:3787/#cb28-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb28-9"><a href="http://localhost:3787/#cb28-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Monthly Time Series for Each Crime Family"</span>,</span>
<span id="cb28-10"><a href="http://localhost:3787/#cb28-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Chronology layered after Classification (Free Y-Axis)"</span>,</span>
<span id="cb28-11"><a href="http://localhost:3787/#cb28-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Month of Arrest"</span>,</span>
<span id="cb28-12"><a href="http://localhost:3787/#cb28-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of Arrests"</span></span>
<span id="cb28-13"><a href="http://localhost:3787/#cb28-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb28-14"><a href="http://localhost:3787/#cb28-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="seasonal-patterns-by-groupings" class="level2">
<h2 class="anchored" data-anchor-id="seasonal-patterns-by-groupings">Seasonal Patterns by Groupings<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#seasonal-patterns-by-groupings" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="http://localhost:3787/#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Seasonal patterns for PD-DESC</span></span>
<span id="cb29-2"><a href="http://localhost:3787/#cb29-2" aria-hidden="true" tabindex="-1"></a>seasonal_patterns <span class="ot">&lt;-</span> Classified_Temporal_NYPD_Arrest_data <span class="sc">|&gt;</span></span>
<span id="cb29-3"><a href="http://localhost:3787/#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(SEASON, PD_DESC) <span class="sc">|&gt;</span></span>
<span id="cb29-4"><a href="http://localhost:3787/#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Volume =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<span id="cb29-5"><a href="http://localhost:3787/#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(SEASON, <span class="fu">desc</span>(Volume))</span>
<span id="cb29-6"><a href="http://localhost:3787/#cb29-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-7"><a href="http://localhost:3787/#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Identifying the 'Signature' crime of a specific season</span></span>
<span id="cb29-8"><a href="http://localhost:3787/#cb29-8" aria-hidden="true" tabindex="-1"></a>top_summer_crimes <span class="ot">&lt;-</span> seasonal_patterns <span class="sc">|&gt;</span></span>
<span id="cb29-9"><a href="http://localhost:3787/#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(SEASON <span class="sc">==</span> <span class="st">"Summer"</span>) <span class="sc">|&gt;</span></span>
<span id="cb29-10"><a href="http://localhost:3787/#cb29-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb29-11"><a href="http://localhost:3787/#cb29-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-12"><a href="http://localhost:3787/#cb29-12" aria-hidden="true" tabindex="-1"></a>top_summer_crimes</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 3
   SEASON PD_DESC                                   Volume
   &lt;chr&gt;  &lt;chr&gt;                                      &lt;int&gt;
 1 Summer ASSAULT 3                                   8060
 2 Summer LARCENY,PETIT FROM OPEN AREAS,              6696
 3 Summer ASSAULT 2,1,UNCLASSIFIED                    4215
 4 Summer THEFT OF SERVICES, UNCLASSIFIE              3617
 5 Summer TRAFFIC,UNCLASSIFIED MISDEMEAN              3154
 6 Summer CONTROLLED SUBSTANCE, POSSESSI              3014
 7 Summer ROBBERY,OPEN AREA UNCLASSIFIED              2967
 8 Summer PUBLIC ADMINISTRATION,UNCLASSI              2879
 9 Summer LARCENY,GRAND FROM OPEN AREAS, UNATTENDED   2122
10 Summer MENACING,UNCLASSIFIED                       1895</code></pre>
</div>
</div>
</section>
<section id="neighbourbood-trends-spatial-temporal" class="level2">
<h2 class="anchored" data-anchor-id="neighbourbood-trends-spatial-temporal">Neighbourbood Trends (Spatial-Temporal)<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#neighbourbood-trends-spatial-temporal" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>This combines location (Precinct) with the layered chronology to see if specific neighborhoods experience spikes at different times of the year.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="http://localhost:3787/#cb31-1" aria-hidden="true" tabindex="-1"></a>neighborhood_trends <span class="ot">&lt;-</span> Classified_Temporal_NYPD_Arrest_data <span class="sc">|&gt;</span></span>
<span id="cb31-2"><a href="http://localhost:3787/#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ARREST_PRECINCT, SEASON, CRIME_FAMILY) <span class="sc">|&gt;</span></span>
<span id="cb31-3"><a href="http://localhost:3787/#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Arrest_Count =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb31-4"><a href="http://localhost:3787/#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="http://localhost:3787/#cb31-5" aria-hidden="true" tabindex="-1"></a>neighborhood_trends <span class="sc">|&gt;</span></span>
<span id="cb31-6"><a href="http://localhost:3787/#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
   ARREST_PRECINCT SEASON CRIME_FAMILY             Arrest_Count
             &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;                           &lt;int&gt;
 1               1 Fall   Drug/Vice Crime                     6
 2               1 Fall   Financial/Administrative            9
 3               1 Fall   Other/Public Order                 12
 4               1 Fall   Property Crime                     60
 5               1 Fall   Violent Crime                      18
 6               1 Fall   Weapons Crime                       3
 7               1 Spring Drug/Vice Crime                    45
 8               1 Spring Financial/Administrative          212
 9               1 Spring Other/Public Order                267
10               1 Spring Property Crime                    558</code></pre>
</div>
</div>
</section>
<section id="extracting-top-crimes-for-all-seasons" class="level2">
<h2 class="anchored" data-anchor-id="extracting-top-crimes-for-all-seasons">Extracting Top Crimes for ALL Seasons<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#extracting-top-crimes-for-all-seasons" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="http://localhost:3787/#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract top 10 crimes per season</span></span>
<span id="cb33-2"><a href="http://localhost:3787/#cb33-2" aria-hidden="true" tabindex="-1"></a>top_crimes_by_season <span class="ot">&lt;-</span> seasonal_patterns <span class="sc">|&gt;</span></span>
<span id="cb33-3"><a href="http://localhost:3787/#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(SEASON) <span class="sc">|&gt;</span></span>
<span id="cb33-4"><a href="http://localhost:3787/#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">order_by =</span> Volume, <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb33-5"><a href="http://localhost:3787/#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb33-6"><a href="http://localhost:3787/#cb33-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-7"><a href="http://localhost:3787/#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="co"># View as a wide table to compare side-by-side</span></span>
<span id="cb33-8"><a href="http://localhost:3787/#cb33-8" aria-hidden="true" tabindex="-1"></a>comparison_table <span class="ot">&lt;-</span> top_crimes_by_season <span class="sc">|&gt;</span></span>
<span id="cb33-9"><a href="http://localhost:3787/#cb33-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(SEASON) <span class="sc">|&gt;</span></span>
<span id="cb33-10"><a href="http://localhost:3787/#cb33-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Rank =</span> <span class="fu">row_number</span>()) <span class="sc">|&gt;</span></span>
<span id="cb33-11"><a href="http://localhost:3787/#cb33-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> SEASON, <span class="at">values_from =</span> <span class="fu">c</span>(PD_DESC, Volume))</span>
<span id="cb33-12"><a href="http://localhost:3787/#cb33-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-13"><a href="http://localhost:3787/#cb33-13" aria-hidden="true" tabindex="-1"></a>comparison_table</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 9
    Rank PD_DESC_Fall   PD_DESC_Spring PD_DESC_Summer PD_DESC_Winter Volume_Fall
   &lt;int&gt; &lt;chr&gt;          &lt;chr&gt;          &lt;chr&gt;          &lt;chr&gt;                &lt;int&gt;
 1     1 ASSAULT 3      ASSAULT 3      ASSAULT 3      LARCENY,PETIT…         724
 2     2 LARCENY,PETIT… LARCENY,PETIT… LARCENY,PETIT… ASSAULT 3              564
 3     3 ASSAULT 2,1,U… ASSAULT 2,1,U… ASSAULT 2,1,U… THEFT OF SERV…         370
 4     4 THEFT OF SERV… THEFT OF SERV… THEFT OF SERV… TRAFFIC,UNCLA…         335
 5     5 CONTROLLED SU… TRAFFIC,UNCLA… TRAFFIC,UNCLA… ASSAULT 2,1,U…         318
 6     6 PUBLIC ADMINI… CONTROLLED SU… CONTROLLED SU… CONTROLLED SU…         275
 7     7 TRAFFIC,UNCLA… PUBLIC ADMINI… ROBBERY,OPEN … PUBLIC ADMINI…         268
 8     8 LARCENY,GRAND… ROBBERY,OPEN … PUBLIC ADMINI… ROBBERY,OPEN …         231
 9     9 ROBBERY,OPEN … LARCENY,GRAND… LARCENY,GRAND… LARCENY,GRAND…         224
10    10 MENACING,UNCL… MENACING,UNCL… MENACING,UNCL… BURGLARY,UNCL…         177
# ℹ 3 more variables: Volume_Spring &lt;int&gt;, Volume_Summer &lt;int&gt;,
#   Volume_Winter &lt;int&gt;</code></pre>
</div>
</div>
</section>
<section id="identifying-seasonal-spikers" class="level2">
<h2 class="anchored" data-anchor-id="identifying-seasonal-spikers">Identifying Seasonal Spikers<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#identifying-seasonal-spikers" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>If you want to find crimes that are <strong>uniquely high</strong> in one season compared to the others (e.g., “Seasonal Signature” crimes), you can calculate the relative percentage.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="http://localhost:3787/#cb35-1" aria-hidden="true" tabindex="-1"></a>seasonal_spikes <span class="ot">&lt;-</span> seasonal_patterns <span class="sc">|&gt;</span></span>
<span id="cb35-2"><a href="http://localhost:3787/#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(PD_DESC) <span class="sc">|&gt;</span></span>
<span id="cb35-3"><a href="http://localhost:3787/#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Total_Yearly =</span> <span class="fu">sum</span>(Volume),</span>
<span id="cb35-4"><a href="http://localhost:3787/#cb35-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">Percent_of_Yearly =</span> (Volume <span class="sc">/</span> Total_Yearly) <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">|&gt;</span></span>
<span id="cb35-5"><a href="http://localhost:3787/#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Total_Yearly <span class="sc">&gt;</span> <span class="dv">50</span>) <span class="sc">|&gt;</span> <span class="co"># Filter out rare crimes for statistical significance</span></span>
<span id="cb35-6"><a href="http://localhost:3787/#cb35-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(SEASON) <span class="sc">|&gt;</span></span>
<span id="cb35-7"><a href="http://localhost:3787/#cb35-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">order_by =</span> Percent_of_Yearly, <span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb35-8"><a href="http://localhost:3787/#cb35-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-9"><a href="http://localhost:3787/#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="co"># This shows crimes where a huge chunk of their yearly total happens in one season</span></span>
<span id="cb35-10"><a href="http://localhost:3787/#cb35-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-11"><a href="http://localhost:3787/#cb35-11" aria-hidden="true" tabindex="-1"></a>seasonal_spikes</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 5
# Groups:   SEASON [4]
   SEASON PD_DESC                          Volume Total_Yearly Percent_of_Yearly
   &lt;chr&gt;  &lt;chr&gt;                             &lt;int&gt;        &lt;int&gt;             &lt;dbl&gt;
 1 Fall   STOLEN PROPERTY-MOTOR VEH 2ND,       10          115              8.70
 2 Fall   AGGRAVATED HARASSMENT 1               7           88              7.95
 3 Fall   OBSCENE MATERIAL - UNDER 17 YE        9          118              7.63
 4 Fall   AGGRAVATED GRAND LARCENY OF ATM       8          107              7.48
 5 Fall   CRIMINAL MISCHIEF 4TH, GRAFFIT       47          790              5.95
 6 Spring GAMBLING 1,PROMOTING,BOOKMAKIN       52           88             59.1 
 7 Spring CONSPIRACY 2, 1                      49           85             57.6 
 8 Spring RAPE 2                               30           55             54.5 
 9 Spring DISORDERLY CONDUCT                   42           85             49.4 
10 Spring PROSTITUTION                         80          166             48.2 
11 Summer ACCOSTING,FRAUDULENT                 38           58             65.5 
12 Summer GAMBLING 1,PROMOTING,POLICY          35           62             56.5 
13 Summer LEWDNESS,PUBLIC                     326          595             54.8 
14 Summer CONTROLLED SUBSTANCE,SALE 1          54          119             45.4 
15 Summer PUBLIC SAFETY,UNCLASSIFIED MIS       47          105             44.8 
16 Winter FALSE REPORT UNCLASSIFIED            56          101             55.4 
17 Winter INCOMPETENT PERSON,RECKLESSY EN…     25           54             46.3 
18 Winter THEFT,RELATED OFFENSES,UNCLASS       41           97             42.3 
19 Winter TAMPERING 1,CRIMINAL                 98          243             40.3 
20 Winter UNLICENSED OPERATOR                  97          249             39.0 </code></pre>
</div>
</div>
</section>
<section id="potential-of-the-constructed-classification---temporal-data-set" class="level2">
<h2 class="anchored" data-anchor-id="potential-of-the-constructed-classification---temporal-data-set">Potential of the Constructed Classification - Temporal Data Set<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#potential-of-the-constructed-classification---temporal-data-set" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>The “main” dataset, Classified_Temporal_NYPD_Arrest_data, is not restricted to the wrangling activities developed or portayed earlier. One may pursue other interests with the attributes w.r..t choices of parameters.</p>
</section>
<section id="column-wise-encoding-of-categorical-variables-with-inline-application---first-approach" class="level2">
<h2 class="anchored" data-anchor-id="column-wise-encoding-of-categorical-variables-with-inline-application---first-approach">Column-Wise Encoding of Categorical Variables with Inline Application - First Approach<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#column-wise-encoding-of-categorical-variables-with-inline-application---first-approach" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>Objective: to <strong>encode categorical variables directly into the dataset</strong> while simultaneously <strong>preserving per-column lookup tables</strong> for traceability and reverse decoding.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="http://localhost:3787/#cb37-1" aria-hidden="true" tabindex="-1"></a>cols_to_encode <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb37-2"><a href="http://localhost:3787/#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CRIME_FAMILY"</span>,</span>
<span id="cb37-3"><a href="http://localhost:3787/#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"SEASON"</span>,</span>
<span id="cb37-4"><a href="http://localhost:3787/#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"PERP_SEX"</span>,</span>
<span id="cb37-5"><a href="http://localhost:3787/#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"PERP_RACE"</span>,</span>
<span id="cb37-6"><a href="http://localhost:3787/#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"AGE_GROUP"</span>,</span>
<span id="cb37-7"><a href="http://localhost:3787/#cb37-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ARREST_BORO"</span></span>
<span id="cb37-8"><a href="http://localhost:3787/#cb37-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb37-9"><a href="http://localhost:3787/#cb37-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-10"><a href="http://localhost:3787/#cb37-10" aria-hidden="true" tabindex="-1"></a>df_clean <span class="ot">&lt;-</span> Classified_Temporal_NYPD_Arrest_data <span class="sc">|&gt;</span></span>
<span id="cb37-11"><a href="http://localhost:3787/#cb37-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">if_all</span>(<span class="fu">all_of</span>(cols_to_encode), <span class="sc">~</span> .x <span class="sc">!=</span> <span class="st">"(null)"</span>))</span>
<span id="cb37-12"><a href="http://localhost:3787/#cb37-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-13"><a href="http://localhost:3787/#cb37-13" aria-hidden="true" tabindex="-1"></a>encoded_df <span class="ot">&lt;-</span> df_clean</span>
<span id="cb37-14"><a href="http://localhost:3787/#cb37-14" aria-hidden="true" tabindex="-1"></a>mapping_list <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb37-15"><a href="http://localhost:3787/#cb37-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-16"><a href="http://localhost:3787/#cb37-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (col <span class="cf">in</span> cols_to_encode) {</span>
<span id="cb37-17"><a href="http://localhost:3787/#cb37-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb37-18"><a href="http://localhost:3787/#cb37-18" aria-hidden="true" tabindex="-1"></a>  mapping <span class="ot">&lt;-</span> df_clean <span class="sc">|&gt;</span></span>
<span id="cb37-19"><a href="http://localhost:3787/#cb37-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(.data[[col]]) <span class="sc">|&gt;</span></span>
<span id="cb37-20"><a href="http://localhost:3787/#cb37-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(.data[[col]]) <span class="sc">|&gt;</span></span>
<span id="cb37-21"><a href="http://localhost:3787/#cb37-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">code =</span> <span class="fu">row_number</span>())</span>
<span id="cb37-22"><a href="http://localhost:3787/#cb37-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb37-23"><a href="http://localhost:3787/#cb37-23" aria-hidden="true" tabindex="-1"></a>  mapping_list[[col]] <span class="ot">&lt;-</span> mapping</span>
<span id="cb37-24"><a href="http://localhost:3787/#cb37-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb37-25"><a href="http://localhost:3787/#cb37-25" aria-hidden="true" tabindex="-1"></a>  encoded_df <span class="ot">&lt;-</span> encoded_df <span class="sc">|&gt;</span></span>
<span id="cb37-26"><a href="http://localhost:3787/#cb37-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(mapping, <span class="at">by =</span> <span class="fu">setNames</span>(col, col)) <span class="sc">|&gt;</span></span>
<span id="cb37-27"><a href="http://localhost:3787/#cb37-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="sc">!!</span><span class="fu">paste0</span>(col, <span class="st">"_code"</span>) <span class="sc">:</span><span class="er">=</span> code)</span>
<span id="cb37-28"><a href="http://localhost:3787/#cb37-28" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb37-29"><a href="http://localhost:3787/#cb37-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-30"><a href="http://localhost:3787/#cb37-30" aria-hidden="true" tabindex="-1"></a>encoded_df</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 120,608 × 28
   ARREST_KEY ARREST_DATE PD_CD PD_DESC      KY_CD OFNS_DESC LAW_CODE LAW_CAT_CD
        &lt;dbl&gt; &lt;date&gt;      &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     
 1  299030225 2025-01-07    105 STRANGULATI…   106 FELONY A… PL 1211… F         
 2  299533742 2025-01-16    155 RAPE 2         104 RAPE      PL 1303… F         
 3  299782079 2025-01-21    105 STRANGULATI…   106 FELONY A… PL 1211… F         
 4  299961366 2025-01-24    153 RAPE 3         104 RAPE      PL 1302… F         
 5  300834409 2025-02-10    263 ARSON 2,3,4    114 ARSON     PL 1501… F         
 6  301585673 2025-02-24    157 RAPE 1         104 RAPE      PL 1303… F         
 7  301740224 2025-02-26    847 NY STATE LA…   125 OTHER ST… VTL0511… F         
 8  302767435 2025-03-13    105 STRANGULATI…   106 FELONY A… PL 1211… F         
 9  303976241 2025-04-01    153 RAPE 3         104 RAPE      PL 1302… F         
10  304022842 2025-04-01    153 RAPE 3         104 RAPE      PL 1302… F         
# ℹ 120,598 more rows
# ℹ 20 more variables: ARREST_BORO &lt;chr&gt;, ARREST_PRECINCT &lt;dbl&gt;,
#   JURISDICTION_CODE &lt;dbl&gt;, AGE_GROUP &lt;chr&gt;, PERP_SEX &lt;chr&gt;, PERP_RACE &lt;chr&gt;,
#   X_COORD_CD &lt;dbl&gt;, Y_COORD_CD &lt;dbl&gt;, Latitude &lt;dbl&gt;, Longitude &lt;dbl&gt;,
#   Location &lt;chr&gt;, CRIME_FAMILY &lt;chr&gt;, YEAR &lt;dbl&gt;, SEASON &lt;chr&gt;,
#   CRIME_FAMILY_code &lt;int&gt;, SEASON_code &lt;int&gt;, PERP_SEX_code &lt;int&gt;,
#   PERP_RACE_code &lt;int&gt;, AGE_GROUP_code &lt;int&gt;, ARREST_BORO_code &lt;int&gt;</code></pre>
</div>
</div>
</section>
<section id="global-tidy-mapping-construction---second-approach" class="level2">
<h2 class="anchored" data-anchor-id="global-tidy-mapping-construction---second-approach">Global, Tidy Mapping Construction - Second Approach<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#global-tidy-mapping-construction---second-approach" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>Objective: to build a <strong>single, auditable mapping table</strong> that documents how <strong>each categorical value maps to an integer</strong>, independent of modeling or joins.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="http://localhost:3787/#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb39-2"><a href="http://localhost:3787/#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb39-3"><a href="http://localhost:3787/#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="http://localhost:3787/#cb39-4" aria-hidden="true" tabindex="-1"></a>cols_to_encode <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb39-5"><a href="http://localhost:3787/#cb39-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CRIME_FAMILY"</span>,</span>
<span id="cb39-6"><a href="http://localhost:3787/#cb39-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"SEASON"</span>,</span>
<span id="cb39-7"><a href="http://localhost:3787/#cb39-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"PERP_SEX"</span>,</span>
<span id="cb39-8"><a href="http://localhost:3787/#cb39-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"PERP_RACE"</span>,</span>
<span id="cb39-9"><a href="http://localhost:3787/#cb39-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"AGE_GROUP"</span>,</span>
<span id="cb39-10"><a href="http://localhost:3787/#cb39-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ARREST_BORO"</span></span>
<span id="cb39-11"><a href="http://localhost:3787/#cb39-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb39-12"><a href="http://localhost:3787/#cb39-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-13"><a href="http://localhost:3787/#cb39-13" aria-hidden="true" tabindex="-1"></a>mapping_df <span class="ot">&lt;-</span> Classified_Temporal_NYPD_Arrest_data <span class="sc">|&gt;</span></span>
<span id="cb39-14"><a href="http://localhost:3787/#cb39-14" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(dplyr<span class="sc">::</span><span class="fu">if_all</span>(dplyr<span class="sc">::</span><span class="fu">all_of</span>(cols_to_encode), <span class="sc">~</span> .x <span class="sc">!=</span> <span class="st">"(null)"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb39-15"><a href="http://localhost:3787/#cb39-15" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(dplyr<span class="sc">::</span><span class="fu">all_of</span>(cols_to_encode)) <span class="sc">|&gt;</span></span>
<span id="cb39-16"><a href="http://localhost:3787/#cb39-16" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(</span>
<span id="cb39-17"><a href="http://localhost:3787/#cb39-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">everything</span>(),</span>
<span id="cb39-18"><a href="http://localhost:3787/#cb39-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"variable"</span>,</span>
<span id="cb39-19"><a href="http://localhost:3787/#cb39-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"value"</span></span>
<span id="cb39-20"><a href="http://localhost:3787/#cb39-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb39-21"><a href="http://localhost:3787/#cb39-21" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">distinct</span>(variable, value) <span class="sc">|&gt;</span></span>
<span id="cb39-22"><a href="http://localhost:3787/#cb39-22" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(variable, value) <span class="sc">|&gt;</span></span>
<span id="cb39-23"><a href="http://localhost:3787/#cb39-23" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(variable) <span class="sc">|&gt;</span></span>
<span id="cb39-24"><a href="http://localhost:3787/#cb39-24" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">code =</span> dplyr<span class="sc">::</span><span class="fu">row_number</span>()) <span class="sc">|&gt;</span></span>
<span id="cb39-25"><a href="http://localhost:3787/#cb39-25" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="http://localhost:3787/#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identifying the mapping rules</span></span>
<span id="cb40-2"><a href="http://localhost:3787/#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mapping_df, <span class="at">n=</span><span class="dv">29</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 29 × 3
   variable     value                           code
   &lt;chr&gt;        &lt;chr&gt;                          &lt;int&gt;
 1 AGE_GROUP    18-24                              1
 2 AGE_GROUP    25-44                              2
 3 AGE_GROUP    45-64                              3
 4 AGE_GROUP    65+                                4
 5 AGE_GROUP    &lt;18                                5
 6 ARREST_BORO  B                                  1
 7 ARREST_BORO  K                                  2
 8 ARREST_BORO  M                                  3
 9 ARREST_BORO  Q                                  4
10 ARREST_BORO  S                                  5
11 CRIME_FAMILY Drug/Vice Crime                    1
12 CRIME_FAMILY Financial/Administrative           2
13 CRIME_FAMILY Other/Public Order                 3
14 CRIME_FAMILY Property Crime                     4
15 CRIME_FAMILY Violent Crime                      5
16 CRIME_FAMILY Weapons Crime                      6
17 PERP_RACE    AMERICAN INDIAN/ALASKAN NATIVE     1
18 PERP_RACE    ASIAN / PACIFIC ISLANDER           2
19 PERP_RACE    BLACK                              3
20 PERP_RACE    BLACK HISPANIC                     4
21 PERP_RACE    UNKNOWN                            5
22 PERP_RACE    WHITE                              6
23 PERP_RACE    WHITE HISPANIC                     7
24 PERP_SEX     F                                  1
25 PERP_SEX     M                                  2
26 SEASON       Fall                               1
27 SEASON       Spring                             2
28 SEASON       Summer                             3
29 SEASON       Winter                             4</code></pre>
</div>
</div>
<p>The first approach is <strong>procedural and application-oriented</strong>. After removing rows containing the literal missing value <code>"(null)"</code>, it processes each categorical column independently. For every column, it extracts the set of unique string values, sorts them alphabetically, and assigns integer codes using <code>row_number()</code>. These codes are then immediately joined back to the cleaned dataset,</p>
<p>Having a model-ready dataframe while also retaining per-column mapping tables for interpretability and reverse decoding. Its primary intent is to <strong>encode categories directly for analysis or modeling</strong>, with mappings preserved as supporting artifacts.</p>
<p>The second approach is <strong>declarative and documentation-oriented</strong>. It applies the same row-level filtering, but reshapes the data into a long format so that all categorical variables are handled uniformly. Unique <code>(variable, value)</code> pairs are identified, values are sorted alphabetically within each variable, and integer codes are assigned using <code>row_number()</code> grouped by variable. The result is a single tidy mapping table that explicitly records how each categorical value maps to an integer, independent of any immediate modeling step. Its intent is to <strong>define and audit the encoding scheme itself</strong>, rather than to apply it inline.</p>
<p>Despite these structural differences, both methods yield identical mappings because they operate on the <strong>same filtered dataset</strong>, use the <strong>same uniqueness criterion</strong>, apply the <strong>same ordering rule</strong>, and assign codes using the <strong>same deterministic function</strong>. For each column, the ordered set of unique string values is identical in both pipelines, and integer labels are assigned in the same sequence. Consequently, the mapping from category to code is mathematically equivalent in both cases—the difference lies only in presentation and workflow, not in the resulting encodings.</p>
</section>
<section id="developing-a-data-set-for-statistical-analysis" class="level2">
<h2 class="anchored" data-anchor-id="developing-a-data-set-for-statistical-analysis">Developing a Data Set for Statistical Analysis<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#developing-a-data-set-for-statistical-analysis" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>Reviewing dataframe for choosing attributes of interest:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="http://localhost:3787/#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(encoded_df)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [120,608 × 28] (S3: tbl_df/tbl/data.frame)
 $ ARREST_KEY       : num [1:120608] 2.99e+08 3.00e+08 3.00e+08 3.00e+08 3.01e+08 ...
 $ ARREST_DATE      : Date[1:120608], format: "2025-01-07" "2025-01-16" ...
 $ PD_CD            : num [1:120608] 105 155 105 153 263 157 847 105 153 153 ...
 $ PD_DESC          : chr [1:120608] "STRANGULATION 1ST" "RAPE 2" "STRANGULATION 1ST" "RAPE 3" ...
 $ KY_CD            : num [1:120608] 106 104 106 104 114 104 125 106 104 104 ...
 $ OFNS_DESC        : chr [1:120608] "FELONY ASSAULT" "RAPE" "FELONY ASSAULT" "RAPE" ...
 $ LAW_CODE         : chr [1:120608] "PL 1211200" "PL 1303001" "PL 1211200" "PL 1302507" ...
 $ LAW_CAT_CD       : chr [1:120608] "F" "F" "F" "F" ...
 $ ARREST_BORO      : chr [1:120608] "M" "K" "M" "S" ...
 $ ARREST_PRECINCT  : num [1:120608] 28 81 10 120 81 41 116 48 112 101 ...
 $ JURISDICTION_CODE: num [1:120608] 0 0 0 0 71 0 0 0 0 0 ...
 $ AGE_GROUP        : chr [1:120608] "25-44" "18-24" "25-44" "18-24" ...
 $ PERP_SEX         : chr [1:120608] "M" "F" "M" "M" ...
 $ PERP_RACE        : chr [1:120608] "BLACK" "BLACK" "BLACK" "WHITE" ...
 $ X_COORD_CD       : num [1:120608] 997439 1005319 984685 962873 1005312 ...
 $ Y_COORD_CD       : num [1:120608] 233857 190473 209908 174172 190540 ...
 $ Latitude         : num [1:120608] 40.8 40.7 40.7 40.6 40.7 ...
 $ Longitude        : num [1:120608] -74 -73.9 -74 -74.1 -73.9 ...
 $ Location         : chr [1:120608] "POINT (-73.952357 40.808558)" "POINT (-73.9240290899499 40.6894642952604)" "POINT (-73.998429 40.742835)" "POINT (-74.0770327198983 40.6447209438691)" ...
 $ CRIME_FAMILY     : chr [1:120608] "Violent Crime" "Violent Crime" "Violent Crime" "Violent Crime" ...
 $ YEAR             : num [1:120608] 2025 2025 2025 2025 2025 ...
 $ SEASON           : chr [1:120608] "Winter" "Winter" "Winter" "Winter" ...
 $ CRIME_FAMILY_code: int [1:120608] 5 5 5 5 3 5 3 5 5 5 ...
 $ SEASON_code      : int [1:120608] 4 4 4 4 4 4 4 4 2 2 ...
 $ PERP_SEX_code    : int [1:120608] 2 1 2 2 2 2 2 2 2 2 ...
 $ PERP_RACE_code   : int [1:120608] 3 3 3 6 3 3 7 3 7 3 ...
 $ AGE_GROUP_code   : int [1:120608] 2 1 2 1 2 3 2 2 2 2 ...
 $ ARREST_BORO_code : int [1:120608] 3 2 3 5 2 1 4 1 4 4 ...</code></pre>
</div>
</div>
<p>Now to synthesize a dataframe/dataset that’ s readily available for statical analysis.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="http://localhost:3787/#cb44-1" aria-hidden="true" tabindex="-1"></a>data_stat_analy <span class="ot">&lt;-</span> encoded_df <span class="sc">|&gt;</span></span>
<span id="cb44-2"><a href="http://localhost:3787/#cb44-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(ARREST_DATE, YEAR, SEASON_code,</span>
<span id="cb44-3"><a href="http://localhost:3787/#cb44-3" aria-hidden="true" tabindex="-1"></a>         CRIME_FAMILY_code, JURISDICTION_CODE,</span>
<span id="cb44-4"><a href="http://localhost:3787/#cb44-4" aria-hidden="true" tabindex="-1"></a>         ARREST_BORO_code, ARREST_PRECINCT,</span>
<span id="cb44-5"><a href="http://localhost:3787/#cb44-5" aria-hidden="true" tabindex="-1"></a>         Longitude, Latitude, PERP_SEX_code, PERP_RACE_code, AGE_GROUP_code)</span>
<span id="cb44-6"><a href="http://localhost:3787/#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data_stat_analy)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [120,608 × 12] (S3: tbl_df/tbl/data.frame)
 $ ARREST_DATE      : Date[1:120608], format: "2025-01-07" "2025-01-16" ...
 $ YEAR             : num [1:120608] 2025 2025 2025 2025 2025 ...
 $ SEASON_code      : int [1:120608] 4 4 4 4 4 4 4 4 2 2 ...
 $ CRIME_FAMILY_code: int [1:120608] 5 5 5 5 3 5 3 5 5 5 ...
 $ JURISDICTION_CODE: num [1:120608] 0 0 0 0 71 0 0 0 0 0 ...
 $ ARREST_BORO_code : int [1:120608] 3 2 3 5 2 1 4 1 4 4 ...
 $ ARREST_PRECINCT  : num [1:120608] 28 81 10 120 81 41 116 48 112 101 ...
 $ Longitude        : num [1:120608] -74 -73.9 -74 -74.1 -73.9 ...
 $ Latitude         : num [1:120608] 40.8 40.7 40.7 40.6 40.7 ...
 $ PERP_SEX_code    : int [1:120608] 2 1 2 2 2 2 2 2 2 2 ...
 $ PERP_RACE_code   : int [1:120608] 3 3 3 6 3 3 7 3 7 3 ...
 $ AGE_GROUP_code   : int [1:120608] 2 1 2 1 2 3 2 2 2 2 ...</code></pre>
</div>
</div>
<p>Removing any possible missing values in the dataset/dataframe:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="http://localhost:3787/#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Removing NAs</span></span>
<span id="cb46-2"><a href="http://localhost:3787/#cb46-2" aria-hidden="true" tabindex="-1"></a>data_stat_analy_clean <span class="ot">&lt;-</span> data_stat_analy <span class="sc">|&gt;</span></span>
<span id="cb46-3"><a href="http://localhost:3787/#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>()</span>
<span id="cb46-4"><a href="http://localhost:3787/#cb46-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-5"><a href="http://localhost:3787/#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="co"># NA counts in monthly_summary</span></span>
<span id="cb46-6"><a href="http://localhost:3787/#cb46-6" aria-hidden="true" tabindex="-1"></a>na_counts_data_stat <span class="ot">&lt;-</span> <span class="fu">sapply</span>(data_stat_analy_clean,</span>
<span id="cb46-7"><a href="http://localhost:3787/#cb46-7" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">function</span>(x) <span class="fu">sum</span>(<span class="fu">is.na</span>(x)))</span>
<span id="cb46-8"><a href="http://localhost:3787/#cb46-8" aria-hidden="true" tabindex="-1"></a>na_counts_data_stat</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>      ARREST_DATE              YEAR       SEASON_code CRIME_FAMILY_code 
                0                 0                 0                 0 
JURISDICTION_CODE  ARREST_BORO_code   ARREST_PRECINCT         Longitude 
                0                 0                 0                 0 
         Latitude     PERP_SEX_code    PERP_RACE_code    AGE_GROUP_code 
                0                 0                 0                 0 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="http://localhost:3787/#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data_stat_analy_clean)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [120,608 × 12] (S3: tbl_df/tbl/data.frame)
 $ ARREST_DATE      : Date[1:120608], format: "2025-01-07" "2025-01-16" ...
 $ YEAR             : num [1:120608] 2025 2025 2025 2025 2025 ...
 $ SEASON_code      : int [1:120608] 4 4 4 4 4 4 4 4 2 2 ...
 $ CRIME_FAMILY_code: int [1:120608] 5 5 5 5 3 5 3 5 5 5 ...
 $ JURISDICTION_CODE: num [1:120608] 0 0 0 0 71 0 0 0 0 0 ...
 $ ARREST_BORO_code : int [1:120608] 3 2 3 5 2 1 4 1 4 4 ...
 $ ARREST_PRECINCT  : num [1:120608] 28 81 10 120 81 41 116 48 112 101 ...
 $ Longitude        : num [1:120608] -74 -73.9 -74 -74.1 -73.9 ...
 $ Latitude         : num [1:120608] 40.8 40.7 40.7 40.6 40.7 ...
 $ PERP_SEX_code    : int [1:120608] 2 1 2 2 2 2 2 2 2 2 ...
 $ PERP_RACE_code   : int [1:120608] 3 3 3 6 3 3 7 3 7 3 ...
 $ AGE_GROUP_code   : int [1:120608] 2 1 2 1 2 3 2 2 2 2 ...</code></pre>
</div>
</div>
<p>Acquired now is a <strong>large, well-structured spatiotemporal arrest dataset</strong> <strong>called <em>data_stat_analy_clean,</em></strong> with over 120k rows…having time, space, and multiple categorical and ordinal codes. This supports <strong>much stronger analysis than simple descriptives</strong>. The possible spectrum for <strong>analyses and statistical models</strong>: exploratory → inferential → predictive → causal/spatial.</p>
</section>
<section id="analyses-and-statistical-models" class="level2">
<h2 class="anchored" data-anchor-id="analyses-and-statistical-models">Analyses and Statistical Models<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#analyses-and-statistical-models" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<section id="descriptive-statistics-for-categorical-and-ordinal-variables" class="level3">
<h3 class="anchored" data-anchor-id="descriptive-statistics-for-categorical-and-ordinal-variables">Descriptive Statistics for Categorical and Ordinal Variables<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#descriptive-statistics-for-categorical-and-ordinal-variables" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<p>Descriptive statistics for categorical and ordinal variables focus primarily on describing the distribution of data across categories, rather than calculating a numerical average. Because these data types are not continuous, traditional statistics like mean and standard deviation are generally inappropriate.&nbsp;</p>
<section id="categorical-nominal-variables" class="level4">
<h4 class="anchored" data-anchor-id="categorical-nominal-variables">Categorical (Nominal) Variables<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#categorical-nominal-variables" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h4>
<p>A categorical variable (or qualitative variable)&nbsp;represents data that can be divided into distinct groups or categories, rather than being numerical quantities, with examples like hair color (blonde, brown) or yes/no responses, and can further be <strong>nominal</strong>&nbsp;(no order, e.g., eye color).</p>
<p><strong>Key characteristics:</strong></p>
<ul>
<li><p><strong>Qualitative:</strong> Describes qualities or characteristics, not amounts.</p></li>
<li><p><strong>Fixed Categories:</strong> Takes on a limited, fixed number of values or groups.</p></li>
<li><p><strong>Mutually Exclusive:</strong> Each observation fits into only one category.&nbsp;</p></li>
</ul>
<p><strong>Descriptive Statistics for categorical variables:</strong></p>
<ul>
<li><p><strong>Central Tendency:</strong> Mode (most frequent category).</p></li>
<li><p><strong>Dispersion/Spread:</strong> Index of Qualitative Variation (IQV), or simply listing frequencies.</p></li>
<li><p><strong>Descriptive Summaries:</strong> Frequencies (counts), Proportions, and Percentages.</p></li>
<li><p><strong>Visualization:</strong> Bar charts</p></li>
</ul>
<p><strong>Mode</strong>: the value that appears most frequently in a data set, acting as a measure of central tendency alongside the mean and median, indicating the most common or popular item, category, or number, and a dataset can have one mode (unimodal), multiple modes (bimodal, multimodal), or no mode at all if all values occur equally often. It’s particularly useful for categorical data but can also identify popular choices in numerical/continuous sets, representing the peak in a histogram.&nbsp;</p>
<p><strong>Index of Qualitative Variation (IQV)</strong>: measures statistical dispersion or diversity in <strong>nominal (categorical) data</strong>, ranging from 0 (no variation, all cases in one category) to 1 (maximum variation, cases evenly split across categories). It’s a standardized number showing how spread out categories are, useful for comparing diversity across different nominal variables like race or gender, and is calculated by comparing observed differences to the maximum possible differences in the dataset.&nbsp;</p>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="0" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-mtext class="mjx-n"><mjx-c class="mjx-c49"></mjx-c><mjx-c class="mjx-c51"></mjx-c><mjx-c class="mjx-c56"></mjx-c></mjx-mtext><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mfrac space="4"><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-munderover space="3" limits="false"><mjx-mo class="mjx-sop"><mjx-c class="mjx-c2211 TEX-S1"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.285em; margin-left: 0px;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi><mjx-spacer style="margin-top: 0.284em;"></mjx-spacer><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-munderover><mjx-msubsup space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45D TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.284em; margin-left: 0px;"><mjx-texatom size="s" texclass="ORD"><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom><mjx-spacer style="margin-top: 0.18em;"></mjx-spacer><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msubsup><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-mo class="mjx-n"><mjx-c class="mjx-c2F"></mjx-c></mjx-mo></mjx-texatom><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi></mjx-mrow></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>IQV</mtext><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mo>=</mo><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mfrac><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><munderover><mo data-mjx-texclass="OP">∑</mo><mrow data-mjx-texclass="ORD"><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>k</mi></munderover><msubsup><mi>p</mi><mi>i</mi><mrow data-mjx-texclass="ORD"><mn>2</mn></mrow></msubsup><mo stretchy="false">)</mo></mrow><mrow><mo stretchy="false">(</mo><mi>k</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mrow data-mjx-texclass="ORD"><mo>/</mo></mrow><mi>k</mi></mrow></mfrac></math></mjx-assistive-mml></mjx-container></span></p>
<p>where <span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="1" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></mjx-assistive-mml></mjx-container></span> is the number of categories and <span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="2" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45D TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>p</mi><mi>i</mi></msub></math></mjx-assistive-mml></mjx-container></span> is the proportion of cases in the <span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="3" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi></math></mjx-assistive-mml></mjx-container></span>th category.</p>
<p><strong>Frequency</strong>: frequencies of a data set show <strong>how often each value or range of values appears</strong>, essentially counting occurrences, often presented in a <strong>frequency distribution table</strong> or graph (like a histogram) to reveal patterns, with types including <strong>absolute frequency</strong> (the raw count) and <strong>relative frequency</strong> (the proportion or percentage).</p>
<p><strong>Bar charts (or bar graphs)</strong>: are visual tools that use rectangular bars, either vertical or horizontal, to compare categorical data, where each bar’s length or height represents a specific value, making it easy to see differences between groups like favorite pets, sales figures, or survey responses. They have two axes: one for categories (like names or types) and the other for a numerical scale, with bars aligned to a common baseline for simple comparison, often used to show distributions or trends.</p>
<p>Development of the descriptive statistics for the categorical variables in the dataset:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="http://localhost:3787/#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1 Datast of concern: data_stat_analy_clean</span></span>
<span id="cb50-2"><a href="http://localhost:3787/#cb50-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-3"><a href="http://localhost:3787/#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the categorical variables</span></span>
<span id="cb50-4"><a href="http://localhost:3787/#cb50-4" aria-hidden="true" tabindex="-1"></a>cat_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"SEASON_code"</span>, <span class="st">"CRIME_FAMILY_code"</span>, <span class="st">"JURISDICTION_CODE"</span>, </span>
<span id="cb50-5"><a href="http://localhost:3787/#cb50-5" aria-hidden="true" tabindex="-1"></a>               <span class="st">"ARREST_BORO_code"</span>, <span class="st">"ARREST_PRECINCT"</span>, <span class="st">"PERP_SEX_code"</span>, <span class="st">"PERP_RACE_code"</span>)</span>
<span id="cb50-6"><a href="http://localhost:3787/#cb50-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-7"><a href="http://localhost:3787/#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure variables are treated as factors</span></span>
<span id="cb50-8"><a href="http://localhost:3787/#cb50-8" aria-hidden="true" tabindex="-1"></a>data_stat_analy_clean[cat_vars] <span class="ot">&lt;-</span></span>
<span id="cb50-9"><a href="http://localhost:3787/#cb50-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lapply</span>(data_stat_analy_clean[cat_vars], as.factor)</span>
<span id="cb50-10"><a href="http://localhost:3787/#cb50-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-11"><a href="http://localhost:3787/#cb50-11" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Helper Functions ---</span></span>
<span id="cb50-12"><a href="http://localhost:3787/#cb50-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-13"><a href="http://localhost:3787/#cb50-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to calculate Mode</span></span>
<span id="cb50-14"><a href="http://localhost:3787/#cb50-14" aria-hidden="true" tabindex="-1"></a>get_mode <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb50-15"><a href="http://localhost:3787/#cb50-15" aria-hidden="true" tabindex="-1"></a>  ux <span class="ot">&lt;-</span> <span class="fu">unique</span>(x)</span>
<span id="cb50-16"><a href="http://localhost:3787/#cb50-16" aria-hidden="true" tabindex="-1"></a>  ux <span class="ot">&lt;-</span> ux[<span class="sc">!</span><span class="fu">is.na</span>(ux)]</span>
<span id="cb50-17"><a href="http://localhost:3787/#cb50-17" aria-hidden="true" tabindex="-1"></a>  ux[<span class="fu">which.max</span>(<span class="fu">tabulate</span>(<span class="fu">match</span>(x, ux)))]</span>
<span id="cb50-18"><a href="http://localhost:3787/#cb50-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb50-19"><a href="http://localhost:3787/#cb50-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-20"><a href="http://localhost:3787/#cb50-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to calculate Index of Qualitative Variation (IQV)</span></span>
<span id="cb50-21"><a href="http://localhost:3787/#cb50-21" aria-hidden="true" tabindex="-1"></a><span class="co"># IQV = [k(1 - Sum(p^2))] / (k - 1)</span></span>
<span id="cb50-22"><a href="http://localhost:3787/#cb50-22" aria-hidden="true" tabindex="-1"></a>calculate_iqv <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb50-23"><a href="http://localhost:3787/#cb50-23" aria-hidden="true" tabindex="-1"></a>  counts <span class="ot">&lt;-</span> <span class="fu">table</span>(x)</span>
<span id="cb50-24"><a href="http://localhost:3787/#cb50-24" aria-hidden="true" tabindex="-1"></a>  k <span class="ot">&lt;-</span> <span class="fu">length</span>(counts)</span>
<span id="cb50-25"><a href="http://localhost:3787/#cb50-25" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (k <span class="sc">&lt;=</span> <span class="dv">1</span>) <span class="fu">return</span>(<span class="dv">0</span>) <span class="co"># IQV is 0 if only one category exists</span></span>
<span id="cb50-26"><a href="http://localhost:3787/#cb50-26" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">sum</span>(counts)</span>
<span id="cb50-27"><a href="http://localhost:3787/#cb50-27" aria-hidden="true" tabindex="-1"></a>  proportions <span class="ot">&lt;-</span> counts <span class="sc">/</span> n</span>
<span id="cb50-28"><a href="http://localhost:3787/#cb50-28" aria-hidden="true" tabindex="-1"></a>  sum_p_sq <span class="ot">&lt;-</span> <span class="fu">sum</span>(proportions<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb50-29"><a href="http://localhost:3787/#cb50-29" aria-hidden="true" tabindex="-1"></a>  iqv <span class="ot">&lt;-</span> (k <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> sum_p_sq)) <span class="sc">/</span> (k <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb50-30"><a href="http://localhost:3787/#cb50-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(iqv)</span>
<span id="cb50-31"><a href="http://localhost:3787/#cb50-31" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb50-32"><a href="http://localhost:3787/#cb50-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-33"><a href="http://localhost:3787/#cb50-33" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Analysis Loop ---</span></span>
<span id="cb50-34"><a href="http://localhost:3787/#cb50-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-35"><a href="http://localhost:3787/#cb50-35" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (var <span class="cf">in</span> cat_vars) {</span>
<span id="cb50-36"><a href="http://localhost:3787/#cb50-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">--- Analysis for:"</span>, var, <span class="st">"---</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb50-37"><a href="http://localhost:3787/#cb50-37" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-38"><a href="http://localhost:3787/#cb50-38" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 2. Descriptive Summaries: Frequencies, Proportions, and Percentages</span></span>
<span id="cb50-39"><a href="http://localhost:3787/#cb50-39" aria-hidden="true" tabindex="-1"></a>  freq_table <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">table</span>(data_stat_analy_clean[[var]]))</span>
<span id="cb50-40"><a href="http://localhost:3787/#cb50-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(freq_table) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Category"</span>, <span class="st">"Frequency"</span>)</span>
<span id="cb50-41"><a href="http://localhost:3787/#cb50-41" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-42"><a href="http://localhost:3787/#cb50-42" aria-hidden="true" tabindex="-1"></a>  freq_table <span class="ot">&lt;-</span> freq_table <span class="sc">|&gt;</span></span>
<span id="cb50-43"><a href="http://localhost:3787/#cb50-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb50-44"><a href="http://localhost:3787/#cb50-44" aria-hidden="true" tabindex="-1"></a>      <span class="at">Proportion =</span> Frequency <span class="sc">/</span> <span class="fu">sum</span>(Frequency),</span>
<span id="cb50-45"><a href="http://localhost:3787/#cb50-45" aria-hidden="true" tabindex="-1"></a>      <span class="at">Percentage =</span> Proportion <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb50-46"><a href="http://localhost:3787/#cb50-46" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb50-47"><a href="http://localhost:3787/#cb50-47" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-48"><a href="http://localhost:3787/#cb50-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(freq_table)</span>
<span id="cb50-49"><a href="http://localhost:3787/#cb50-49" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-50"><a href="http://localhost:3787/#cb50-50" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 3. Central Tendency: Mode</span></span>
<span id="cb50-51"><a href="http://localhost:3787/#cb50-51" aria-hidden="true" tabindex="-1"></a>  mode_val <span class="ot">&lt;-</span> <span class="fu">get_mode</span>(data_stat_analy_clean[[var]])</span>
<span id="cb50-52"><a href="http://localhost:3787/#cb50-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Mode:"</span>, <span class="fu">as.character</span>(mode_val), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb50-53"><a href="http://localhost:3787/#cb50-53" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-54"><a href="http://localhost:3787/#cb50-54" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 4. Dispersion: Index of Qualitative Variation (IQV)</span></span>
<span id="cb50-55"><a href="http://localhost:3787/#cb50-55" aria-hidden="true" tabindex="-1"></a>  iqv_val <span class="ot">&lt;-</span> <span class="fu">calculate_iqv</span>(data_stat_analy_clean[[var]])</span>
<span id="cb50-56"><a href="http://localhost:3787/#cb50-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"IQV (Index of Qualitative Variation):"</span>, <span class="fu">round</span>(iqv_val, <span class="dv">4</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb50-57"><a href="http://localhost:3787/#cb50-57" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-58"><a href="http://localhost:3787/#cb50-58" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 5. Visualization: Bar Charts</span></span>
<span id="cb50-59"><a href="http://localhost:3787/#cb50-59" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data_stat_analy_clean, <span class="fu">aes_string</span>(<span class="at">x =</span> var)) <span class="sc">+</span></span>
<span id="cb50-60"><a href="http://localhost:3787/#cb50-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb50-61"><a href="http://localhost:3787/#cb50-61" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb50-62"><a href="http://localhost:3787/#cb50-62" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste</span>(<span class="st">"Frequency Distribution of"</span>, var),</span>
<span id="cb50-63"><a href="http://localhost:3787/#cb50-63" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> var,</span>
<span id="cb50-64"><a href="http://localhost:3787/#cb50-64" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">"Frequency"</span>) <span class="sc">+</span></span>
<span id="cb50-65"><a href="http://localhost:3787/#cb50-65" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb50-66"><a href="http://localhost:3787/#cb50-66" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-67"><a href="http://localhost:3787/#cb50-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(p)</span>
<span id="cb50-68"><a href="http://localhost:3787/#cb50-68" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-69"><a href="http://localhost:3787/#cb50-69" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Optional: Save each plot</span></span>
<span id="cb50-70"><a href="http://localhost:3787/#cb50-70" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ggsave(filename = paste0("bar_chart_", var, ".png"), plot = p)</span></span>
<span id="cb50-71"><a href="http://localhost:3787/#cb50-71" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
--- Analysis for: SEASON_code ---
  Category Frequency Proportion Percentage
1        1      5343 0.04430054   4.430054
2        2     37613 0.31186157  31.186157
3        3     53766 0.44579132  44.579132
4        4     23886 0.19804656  19.804656
Mode: 3 
IQV (Index of Qualitative Variation): 0.8838 </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `aes_string()` was deprecated in ggplot2 3.0.0.
ℹ Please use tidy evaluation idioms with `aes()`.
ℹ See also `vignette("ggplot2-in-packages")` for more information.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
--- Analysis for: CRIME_FAMILY_code ---
  Category Frequency Proportion Percentage
1        1     12756 0.10576413  10.576413
2        2      7430 0.06160454   6.160454
3        3     31660 0.26250332  26.250332
4        4     30143 0.24992538  24.992538
5        5     33681 0.27926008  27.926008
6        6      4938 0.04094256   4.094256
Mode: 5 
IQV (Index of Qualitative Variation): 0.9288 </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/unnamed-chunk-20-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
--- Analysis for: JURISDICTION_CODE ---
   Category Frequency   Proportion   Percentage
1         0    104630 8.675212e-01 8.675212e+01
2         1      8307 6.887603e-02 6.887603e+00
3         2      3791 3.143241e-02 3.143241e+00
4         3      1046 8.672725e-03 8.672725e-01
5         4        29 2.404484e-04 2.404484e-02
6         7       101 8.374237e-04 8.374237e-02
7        11       297 2.462523e-03 2.462523e-01
8        12        10 8.291324e-05 8.291324e-03
9        13         9 7.462192e-05 7.462192e-03
10       14        67 5.555187e-04 5.555187e-02
11       16         2 1.658265e-05 1.658265e-03
12       17      1166 9.667684e-03 9.667684e-01
13       51        78 6.467233e-04 6.467233e-02
14       52        16 1.326612e-04 1.326612e-02
15       69         5 4.145662e-05 4.145662e-03
16       71        80 6.633059e-04 6.633059e-02
17       72       331 2.744428e-03 2.744428e-01
18       73       361 2.993168e-03 2.993168e-01
19       74         1 8.291324e-06 8.291324e-04
20       79         1 8.291324e-06 8.291324e-04
21       87        15 1.243699e-04 1.243699e-02
22       88         5 4.145662e-05 4.145662e-03
23       97       260 2.155744e-03 2.155744e-01
Mode: 0 
IQV (Index of Qualitative Variation): 0.2525 </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/unnamed-chunk-20-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
--- Analysis for: ARREST_BORO_code ---
  Category Frequency Proportion Percentage
1        1     22589 0.18729272  18.729272
2        2     33785 0.28012238  28.012238
3        3     26880 0.22287079  22.287079
4        4     30516 0.25301804  25.301804
5        5      6838 0.05669607   5.669607
Mode: 2 
IQV (Index of Qualitative Variation): 0.9619 </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/unnamed-chunk-20-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
--- Analysis for: ARREST_PRECINCT ---
   Category Frequency   Proportion Percentage
1         1      1748 0.0144932343 1.44932343
2         5      1894 0.0157037676 1.57037676
3         6       964 0.0079928363 0.79928363
4         7       927 0.0076860573 0.76860573
5         9       856 0.0070973733 0.70973733
6        10       857 0.0071056646 0.71056646
7        13      1650 0.0136806845 1.36806845
8        14      3785 0.0313826612 3.13826612
9        17       528 0.0043778191 0.43778191
10       18      1876 0.0155545237 1.55545237
11       19      1191 0.0098749668 0.98749668
12       20       584 0.0048421332 0.48421332
13       22        46 0.0003814009 0.03814009
14       23      1226 0.0101651632 1.01651632
15       24       804 0.0066662245 0.66662245
16       25      1377 0.0114171531 1.14171531
17       26       568 0.0047094720 0.47094720
18       28      1387 0.0115000663 1.15000663
19       30       703 0.0058288007 0.58288007
20       32      1306 0.0108284691 1.08284691
21       33      1022 0.0084737331 0.84737331
22       34      1561 0.0129427567 1.29427567
23       40      3148 0.0261010878 2.61010878
24       41      1866 0.0154716105 1.54716105
25       42      1564 0.0129676307 1.29676307
26       43      1802 0.0149409658 1.49409658
27       44      2799 0.0232074158 2.32074158
28       45      1097 0.0090955824 0.90955824
29       46      2288 0.0189705492 1.89705492
30       47      2044 0.0169474662 1.69474662
31       48      1723 0.0142859512 1.42859512
32       49      1387 0.0115000663 1.15000663
33       50       753 0.0062433669 0.62433669
34       52      2117 0.0175527328 1.75527328
35       60      2390 0.0198162643 1.98162643
36       61      1177 0.0097588883 0.97588883
37       62      1322 0.0109611303 1.09611303
38       63       806 0.0066828071 0.66828071
39       66       871 0.0072217432 0.72217432
40       67      2219 0.0183984479 1.83984479
41       68       970 0.0080425842 0.80425842
42       69       743 0.0061604537 0.61604537
43       70      1787 0.0148165959 1.48165959
44       71      1118 0.0092697002 0.92697002
45       72      1585 0.0131417485 1.31417485
46       73      2651 0.0219802998 2.19802998
47       75      3794 0.0314572831 3.14572831
48       76       775 0.0064257761 0.64257761
49       77      1433 0.0118814672 1.18814672
50       78      1052 0.0087224728 0.87224728
51       79      1915 0.0158778854 1.58778854
52       81      1174 0.0097340143 0.97340143
53       83      1810 0.0150072964 1.50072964
54       84      1811 0.0150155877 1.50155877
55       88       701 0.0058122181 0.58122181
56       90      1109 0.0091950783 0.91950783
57       94       572 0.0047426373 0.47426373
58      100       656 0.0054391085 0.54391085
59      101      1426 0.0118234280 1.18234280
60      102      2050 0.0169972141 1.69972141
61      103      4228 0.0350557177 3.50557177
62      104      1163 0.0096428098 0.96428098
63      105      1166 0.0096676837 0.96676837
64      106      1371 0.0113674051 1.13674051
65      107      1367 0.0113342399 1.13342399
66      108      1205 0.0099910454 0.99910454
67      109      2340 0.0194016981 1.94016981
68      110      3086 0.0255870257 2.55870257
69      111       468 0.0038803396 0.38803396
70      112      1231 0.0102066198 1.02066198
71      113      2311 0.0191612497 1.91612497
72      114      2327 0.0192939109 1.92939109
73      115      2802 0.0232322897 2.32322897
74      116      1340 0.0111103741 1.11103741
75      120      3730 0.0309266384 3.09266384
76      121      1541 0.0127769302 1.27769302
77      122      1050 0.0087058902 0.87058902
78      123       517 0.0042866145 0.42866145
Mode: 103 
IQV (Index of Qualitative Variation): 0.9962 </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/unnamed-chunk-20-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
--- Analysis for: PERP_SEX_code ---
  Category Frequency Proportion Percentage
1        1     21221  0.1759502   17.59502
2        2     99387  0.8240498   82.40498
Mode: 2 
IQV (Index of Qualitative Variation): 0.58 </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/unnamed-chunk-20-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
--- Analysis for: PERP_RACE_code ---
  Category Frequency  Proportion Percentage
1        1       400 0.003316530  0.3316530
2        2      7189 0.059606328  5.9606328
3        3     57559 0.477240316 47.7240316
4        4     11337 0.093998740  9.3998740
5        5       365 0.003026333  0.3026333
6        6     13418 0.111252985 11.1252985
7        7     30340 0.251558769 25.1558769
Mode: 3 
IQV (Index of Qualitative Variation): 0.7982 </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/unnamed-chunk-20-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="ordinal-variables" class="level4">
<h4 class="anchored" data-anchor-id="ordinal-variables">Ordinal Variables<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#ordinal-variables" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h4>
<p>An ordinal variable is&nbsp;a type of categorical variable where the categories have a meaningful, natural order or ranking, but the intervals between the categories are not necessarily equal or quantifiable. Think of it as “in-between” nominal (unordered categories) and interval (equal intervals) variables, with common examples including satisfaction scales (e.g., Very Dissatisfied to Very Satisfied) or education levels (e.g., High School, Bachelor’s, Master’s).</p>
<p><strong>Key Characteristics:</strong></p>
<ul>
<li><p><strong>Order Matters:</strong> The sequence of categories (e.g., small, medium, large) is significant.</p></li>
<li><p><strong>Unequal Spacing:</strong> You can’t assume the difference between “small” and “medium” is the same as between “medium” and “large”.</p></li>
<li><p><strong>Ranking, Not Measurement:</strong> It allows for ranking but not precise mathematical operations like averaging, as the distances aren’t uniform.&nbsp;</p></li>
</ul>
<p>For ordinal data (ranked categories like “low,” “medium,” “high”), use <strong>frequencies, percentages, mode, and median</strong>&nbsp;to describe central tendency and distribution, but <strong>avoid the mean and standard deviation</strong> because the intervals aren’t equal; use the <strong>range or interquartile range (IQR)</strong> for variability. Visualize with <strong>bar charts or pie charts</strong> to show category counts and proportions.</p>
<p><strong>Measures of Central Tendency</strong></p>
<ul>
<li><p><strong>Mode:</strong> The most frequently occurring category (e.g., “medium” satisfaction).</p></li>
<li><p><strong>Median:</strong> The middle value in the ranked data set, often more meaningful than the mode for central tendency.</p></li>
</ul>
<p><strong>Measures of Variability &amp; Distribution</strong></p>
<ul>
<li><p><strong>Frequencies &amp; Percentages:</strong> Count how many observations fall into each category and their proportion.</p></li>
<li><p><strong>Range:</strong> The difference between the highest and lowest categories (e.g., High - Low).</p></li>
<li><p><strong>Interquartile Range (IQR):</strong> The Interquartile Range (IQR) is a measure of statistical dispersion representing the spread of the middle 50% of a dataset. It is defined mathematically as the difference between the third quartile <span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="4" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D444 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c33"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mi>Q</mi><mn>3</mn><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span> and the first quartile <span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="5" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D444 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mi>Q</mi><mn>1</mn><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span>, which are the 75th and 25th percentiles of the data, respectively.&nbsp;The range of the middle 50% of the data, useful for understanding spread without assuming equal intervals.</p>
<p><strong>Components:</strong></p>
<p><span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="6" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D444 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>Q</mi><mn>1</mn></math></mjx-assistive-mml></mjx-container></span> <strong>(Lower Quartile):</strong> Median of the lower half of the data (25th percentile).</p>
<p><span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="7" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D444 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c33"></mjx-c></mjx-mn></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>Q</mi><mn>3</mn></math></mjx-assistive-mml></mjx-container></span> <strong>(Upper Quartile):</strong> Median of the upper half of the data (75th percentile).</p>
<p><strong>Calculation Methods</strong>&nbsp;</p>
<ol type="1">
<li><p><strong>Order Data:</strong> Arrange data in ascending order.</p></li>
<li><p><strong>Find Median</strong> <span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="8" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D444 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mi>Q</mi><mn>2</mn><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span> : Locate the median to split the data into lower and upper halves.</p></li>
<li><p><strong>Find</strong> <span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="9" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D444 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>𝑄</mi><mn>1</mn></math></mjx-assistive-mml></mjx-container></span> <strong>and</strong> <span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="10" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D444 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c33"></mjx-c></mjx-mn></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>𝑄</mi><mn>3</mn></math></mjx-assistive-mml></mjx-container></span>:</p>
<p><strong>Exclusive Method:</strong> If the number of data points is odd, the median is excluded from both halves before finding <span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="11" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D444 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>𝑄</mi><mn>1</mn></math></mjx-assistive-mml></mjx-container></span> and <span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D444 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c33"></mjx-c></mjx-mn></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>𝑄</mi><mn>3</mn></math></mjx-assistive-mml></mjx-container></span>.</p>
<p><strong>Inclusive Method:</strong> The median is included in both halves, which is sometimes used for smaller, odd-numbered datasets.</p></li>
<li><p><strong>Subtract:</strong> Calculate the difference <span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="13" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D444 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c33"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D444 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>𝑄</mi><mn>3</mn><mo>−</mo><mi>𝑄</mi><mn>1</mn></math></mjx-assistive-mml></mjx-container></span>.</p></li>
</ol></li>
</ul>
<p><strong>What to Avoid:</strong></p>
<ul>
<li><p><strong>Mean:</strong> Cannot be calculated meaningfully because the difference between “low” and “medium” isn’t necessarily the same as “medium” and “high”.</p></li>
<li><p><strong>Standard Deviation:</strong> Not appropriate for the same reason the mean isn’t.</p></li>
</ul>
<p><strong>Visualization</strong></p>
<ul>
<li><p><strong>Bar Charts:</strong> Excellent for showing frequencies or percentages across ordered categories.</p></li>
<li><p><strong>Pie Charts:</strong> Can show proportions but become cluttered with many categories.</p></li>
</ul>
<p>Development of the descriptive statistics and primitive models for the ordinal variables in the dataset:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="http://localhost:3787/#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identifying the mapping rules</span></span>
<span id="cb59-2"><a href="http://localhost:3787/#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mapping_df, <span class="at">n=</span><span class="dv">6</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 29 × 3
  variable    value  code
  &lt;chr&gt;       &lt;chr&gt; &lt;int&gt;
1 AGE_GROUP   18-24     1
2 AGE_GROUP   25-44     2
3 AGE_GROUP   45-64     3
4 AGE_GROUP   65+       4
5 AGE_GROUP   &lt;18       5
6 ARREST_BORO B         1
# ℹ 23 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="http://localhost:3787/#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load libraries</span></span>
<span id="cb61-2"><a href="http://localhost:3787/#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales) <span class="co"># For percentages in plots</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'scales'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:purrr':

    discard</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:readr':

    col_factor</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="http://localhost:3787/#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to an ordered factor</span></span>
<span id="cb65-2"><a href="http://localhost:3787/#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Codes are 1, 2, 3, 4, etc.</span></span>
<span id="cb65-3"><a href="http://localhost:3787/#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjust the 'levels' to match specific age group codes and order</span></span>
<span id="cb65-4"><a href="http://localhost:3787/#cb65-4" aria-hidden="true" tabindex="-1"></a>data_stat_analy_clean<span class="sc">$</span>AGE_GROUP_code <span class="ot">&lt;-</span> <span class="fu">factor</span>(data_stat_analy_clean<span class="sc">$</span>AGE_GROUP_code,</span>
<span id="cb65-5"><a href="http://localhost:3787/#cb65-5" aria-hidden="true" tabindex="-1"></a>                            <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>), <span class="co"># Example levels</span></span>
<span id="cb65-6"><a href="http://localhost:3787/#cb65-6" aria-hidden="true" tabindex="-1"></a>                            <span class="at">ordered =</span> <span class="cn">TRUE</span>)</span>
<span id="cb65-7"><a href="http://localhost:3787/#cb65-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-8"><a href="http://localhost:3787/#cb65-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify the conversion</span></span>
<span id="cb65-9"><a href="http://localhost:3787/#cb65-9" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data_stat_analy_clean<span class="sc">$</span>AGE_GROUP_code)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code> Ord.factor w/ 5 levels "1"&lt;"2"&lt;"3"&lt;"4"&lt;..: 2 1 2 1 2 3 2 2 2 2 ...</code></pre>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="http://localhost:3787/#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Explore the ordinal variable</span></span>
<span id="cb67-2"><a href="http://localhost:3787/#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Frequency table</span></span>
<span id="cb67-3"><a href="http://localhost:3787/#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data_stat_analy_clean<span class="sc">$</span>AGE_GROUP_code)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    1     2     3     4     5 
16801 70897 26545  2525  3840 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="http://localhost:3787/#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize (e.g., bar chart)</span></span>
<span id="cb69-2"><a href="http://localhost:3787/#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(data_stat_analy_clean<span class="sc">$</span>AGE_GROUP_code),</span>
<span id="cb69-3"><a href="http://localhost:3787/#cb69-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Distribution of Age Groups"</span>,</span>
<span id="cb69-4"><a href="http://localhost:3787/#cb69-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="st">"Age Group Code"</span>,</span>
<span id="cb69-5"><a href="http://localhost:3787/#cb69-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">"Frequency"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="http://localhost:3787/#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Common Analyses</span></span>
<span id="cb70-2"><a href="http://localhost:3787/#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Mean/Median (use median for ordinal data)</span></span>
<span id="cb70-3"><a href="http://localhost:3787/#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(<span class="fu">as.numeric</span>(data_stat_analy_clean<span class="sc">$</span>AGE_GROUP_code),</span>
<span id="cb70-4"><a href="http://localhost:3787/#cb70-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co"># Convert to numeric for calculation</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="http://localhost:3787/#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: Chi-squared test for association with a categorical variable (e.g., 'Outcome')</span></span>
<span id="cb72-2"><a href="http://localhost:3787/#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="co"># If 'Outcome' is also categorical</span></span>
<span id="cb72-3"><a href="http://localhost:3787/#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="fu">chisq.test</span>(data_stat_analy_clean<span class="sc">$</span>AGE_GROUP_code, data_stat_analy_clean<span class="sc">$</span>ARREST_BORO_code)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's Chi-squared test

data:  data_stat_analy_clean$AGE_GROUP_code and data_stat_analy_clean$ARREST_BORO_code
X-squared = 632.17, df = 16, p-value &lt; 2.2e-16</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="http://localhost:3787/#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: Ordinal Logistic Regression (using 'MASS' package)</span></span>
<span id="cb74-2"><a href="http://localhost:3787/#cb74-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-3"><a href="http://localhost:3787/#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MASS)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'MASS'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:dplyr':

    select</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="http://localhost:3787/#cb77-1" aria-hidden="true" tabindex="-1"></a>glm.fit <span class="ot">&lt;-</span> <span class="fu">polr</span>(AGE_GROUP_code <span class="sc">~</span> ARREST_BORO_code,</span>
<span id="cb77-2"><a href="http://localhost:3787/#cb77-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">data =</span> data_stat_analy_clean, <span class="at">Hess =</span> <span class="cn">TRUE</span>)</span>
<span id="cb77-3"><a href="http://localhost:3787/#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(glm.fit)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
polr(formula = AGE_GROUP_code ~ ARREST_BORO_code, data = data_stat_analy_clean, 
    Hess = TRUE)

Coefficients:
                    Value Std. Error t value
ARREST_BORO_code2 0.18042    0.01695  10.641
ARREST_BORO_code3 0.26586    0.01773  14.997
ARREST_BORO_code4 0.01911    0.01731   1.104
ARREST_BORO_code5 0.19626    0.02704   7.257

Intercepts:
    Value     Std. Error t value  
1|2   -1.6994    0.0144  -118.4253
2|3    1.1090    0.0137    81.1365
3|4    3.0191    0.0177   170.5853
4|5    3.5463    0.0204   173.8108

Residual Deviance: 267575.42 
AIC: 267591.42 </code></pre>
</div>
</div>
</section>
</section>
<section id="exploratory-structural-analysis-foundation" class="level3">
<h3 class="anchored" data-anchor-id="exploratory-structural-analysis-foundation">Exploratory &amp; Structural Analysis (Foundation)<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#exploratory-structural-analysis-foundation" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<section id="distributional-anslysis" class="level4">
<h4 class="anchored" data-anchor-id="distributional-anslysis">Distributional Anslysis<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#distributional-anslysis" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h4>
<p>Marginal and joint distributions of:</p>
<ol type="1">
<li>Arrests by <strong>YEAR</strong> <span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="14" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>×</mo><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle></math></mjx-assistive-mml></mjx-container></span> <strong>SEASON</strong> <span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="15" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>×</mo><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle></math></mjx-assistive-mml></mjx-container></span> <strong>ARREST BOROUGH</strong> <span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="16" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>×</mo><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle></math></mjx-assistive-mml></mjx-container></span> <strong>CRIME FAMILY</strong></li>
<li>Kernel density for <strong>Latitude/Longitude</strong></li>
<li>Zero-inflation checks (precincts with no arrests in periods)</li>
</ol>
<p>Such priors:</p>
<ol type="1">
<li>Identifies skewness, clustering, rare categories</li>
<li>Guides correct model family (Poisson vs NB, etc.)</li>
</ol>
<p>for each categorical variable <span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="17" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>X</mi></math></mjx-assistive-mml></mjx-container></span> :</p>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="18" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D443 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mfrac space="4"><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D441 TEX-I"></mjx-c></mjx-mi></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>P</mi><mo stretchy="false">(</mo><mi>X</mi><mo>=</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><msub><mi>n</mi><mi>x</mi></msub><mi>N</mi></mfrac></math></mjx-assistive-mml></mjx-container></span></p>
<p>For bivariate frequency:</p>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="19" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D443 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D466 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mfrac space="4"><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D466 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D441 TEX-I"></mjx-c></mjx-mi></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>P</mi><mo stretchy="false">(</mo><mi>X</mi><mo>=</mo><mi>x</mi><mo>,</mo><mi>Y</mi><mo>=</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><msub><mi>n</mi><mrow data-mjx-texclass="ORD"><mi>x</mi><mi>y</mi></mrow></msub><mi>N</mi></mfrac></math></mjx-assistive-mml></mjx-container></span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="http://localhost:3787/#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Single variable counts</span></span>
<span id="cb79-2"><a href="http://localhost:3787/#cb79-2" aria-hidden="true" tabindex="-1"></a>data_stat_analy <span class="sc">|&gt;</span></span>
<span id="cb79-3"><a href="http://localhost:3787/#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(CRIME_FAMILY_code, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  CRIME_FAMILY_code     n
              &lt;int&gt; &lt;int&gt;
1                 5 33681
2                 3 31660
3                 4 30143
4                 1 12756
5                 2  7430
6                 6  4938</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="http://localhost:3787/#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Joint distribution example 1</span></span>
<span id="cb81-2"><a href="http://localhost:3787/#cb81-2" aria-hidden="true" tabindex="-1"></a>data_stat_analy <span class="sc">|&gt;</span></span>
<span id="cb81-3"><a href="http://localhost:3787/#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(CRIME_FAMILY_code, SEASON_code, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 24 × 3
   CRIME_FAMILY_code SEASON_code     n
               &lt;int&gt;       &lt;int&gt; &lt;int&gt;
 1                 5           3 16794
 2                 3           3 13593
 3                 4           3 12596
 4                 3           2 10359
 5                 4           2  9625
 6                 5           2  9470
 7                 4           4  6698
 8                 3           4  6256
 9                 5           4  5801
10                 1           3  4998
# ℹ 14 more rows</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="http://localhost:3787/#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Joint disitribution example 2</span></span>
<span id="cb83-2"><a href="http://localhost:3787/#cb83-2" aria-hidden="true" tabindex="-1"></a>data_stat_analy <span class="sc">|&gt;</span></span>
<span id="cb83-3"><a href="http://localhost:3787/#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(CRIME_FAMILY_code, ARREST_BORO_code, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 × 3
   CRIME_FAMILY_code ARREST_BORO_code     n
               &lt;int&gt;            &lt;int&gt; &lt;int&gt;
 1                 3                2 10440
 2                 4                3  9685
 3                 5                2  9297
 4                 3                4  8972
 5                 5                4  8577
 6                 5                1  7471
 7                 4                2  7156
 8                 5                3  6862
 9                 4                4  6788
10                 3                1  5196
# ℹ 20 more rows</code></pre>
</div>
</div>
</section>
<section id="association-dependence-structure" class="level4">
<h4 class="anchored" data-anchor-id="association-dependence-structure">Association &amp; Dependence Structure<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#association-dependence-structure" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h4>
<p>Chi-square tests examples:</p>
<ol type="1">
<li>PERP_SEX <span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="20" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>×</mo></math></mjx-assistive-mml></mjx-container></span> CRIME_FAMILY</li>
<li>PERP_RACE <span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="21" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>×</mo></math></mjx-assistive-mml></mjx-container></span> ARREST_BOROUGH</li>
</ol>
<p>Cramér’s V / Theil’s U (effect size, not just significance)</p>
<p>Concerning both prior tools, with at least 120k observations, <em>everything</em> is significant — effect size matters.</p>
<p>Chi-square statistics:</p>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="22" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-msup><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D712 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: 0.413em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msup><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-munder space="4"><mjx-row><mjx-base><mjx-mo class="mjx-lop"><mjx-c class="mjx-c2211 TEX-S2"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top: 0.167em; padding-left: 0.6em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi></mjx-under></mjx-row></mjx-munder><mjx-munder space="2"><mjx-row><mjx-base><mjx-mo class="mjx-lop"><mjx-c class="mjx-c2211 TEX-S2"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top: 0.167em; padding-left: 0.576em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D457 TEX-I"></mjx-c></mjx-mi></mjx-under></mjx-row></mjx-munder><mjx-mfrac space="2"><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D442 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D457 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D438 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.026em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D457 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub><mjx-msup><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-script style="vertical-align: 0.363em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msup></mjx-mrow></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D438 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.026em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D457 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msup><mi>χ</mi><mn>2</mn></msup><mo>=</mo><munder><mo data-mjx-texclass="OP">∑</mo><mi>i</mi></munder><munder><mo data-mjx-texclass="OP">∑</mo><mi>j</mi></munder><mfrac><mrow><mo stretchy="false">(</mo><msub><mi>O</mi><mrow data-mjx-texclass="ORD"><mi>i</mi><mi>j</mi></mrow></msub><mo>−</mo><msub><mi>E</mi><mrow data-mjx-texclass="ORD"><mi>i</mi><mi>j</mi></mrow></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><msub><mi>E</mi><mrow data-mjx-texclass="ORD"><mi>i</mi><mi>j</mi></mrow></msub></mfrac></math></mjx-assistive-mml></mjx-container></span></p>
<p>Cramer’s V:</p>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="23" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D449 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-msqrt space="4"><mjx-sqrt><mjx-surd><mjx-mo class="mjx-s4"><mjx-c class="mjx-c221A TEX-S4"></mjx-c></mjx-mo></mjx-surd><mjx-box style="padding-top: 0.357em;"><mjx-mfrac><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-msup><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D712 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: 0.289em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msup></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-mrow><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D441 TEX-I"></mjx-c></mjx-mi><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mtext class="mjx-n" space="3"><mjx-c class="mjx-c6D"></mjx-c><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c6E"></mjx-c></mjx-mtext><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45F TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D450 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac></mjx-box></mjx-sqrt></mjx-msqrt></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>V</mi><mo>=</mo><msqrt><mfrac><msup><mi>χ</mi><mn>2</mn></msup><mrow><mi>N</mi><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mo>×</mo><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mtext>min</mtext><mo stretchy="false">(</mo><mi>r</mi><mo>−</mo><mn>1</mn><mo>,</mo><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mi>c</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></mfrac></msqrt></math></mjx-assistive-mml></mjx-container></span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="http://localhost:3787/#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vcd)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: grid</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="http://localhost:3787/#cb87-1" aria-hidden="true" tabindex="-1"></a>tbl_1 <span class="ot">&lt;-</span> <span class="fu">table</span>(data_stat_analy<span class="sc">$</span>PERP_RACE_code, data_stat_analy<span class="sc">$</span>CRIME_FAMILY_code)</span>
<span id="cb87-2"><a href="http://localhost:3787/#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chisq.test</span>(tbl_1)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's Chi-squared test

data:  tbl_1
X-squared = 1474.8, df = 30, p-value &lt; 2.2e-16</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="http://localhost:3787/#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">assocstats</span>(tbl_1)   <span class="co"># includes Cramer's V</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>                    X^2 df P(&gt; X^2)
Likelihood Ratio 1475.9 30        0
Pearson          1474.8 30        0

Phi-Coefficient   : NA 
Contingency Coeff.: 0.11 
Cramer's V        : 0.049 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="http://localhost:3787/#cb91-1" aria-hidden="true" tabindex="-1"></a>tbl_2 <span class="ot">&lt;-</span> <span class="fu">table</span>(data_stat_analy<span class="sc">$</span>PERP_SEX_code, data_stat_analy<span class="sc">$</span>CRIME_FAMILY_code)</span>
<span id="cb91-2"><a href="http://localhost:3787/#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chisq.test</span>(tbl_2)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's Chi-squared test

data:  tbl_2
X-squared = 1520.1, df = 5, p-value &lt; 2.2e-16</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="http://localhost:3787/#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">assocstats</span>(tbl_2)   <span class="co"># includes Cramer's V</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>                    X^2 df P(&gt; X^2)
Likelihood Ratio 1526.9  5        0
Pearson          1520.1  5        0

Phi-Coefficient   : NA 
Contingency Coeff.: 0.112 
Cramer's V        : 0.112 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="http://localhost:3787/#cb95-1" aria-hidden="true" tabindex="-1"></a>tbl_3 <span class="ot">&lt;-</span> <span class="fu">table</span>(data_stat_analy<span class="sc">$</span>PERP_RACE_code, data_stat_analy<span class="sc">$</span>ARREST_BORO_code)</span>
<span id="cb95-2"><a href="http://localhost:3787/#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chisq.test</span>(tbl_3)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's Chi-squared test

data:  tbl_3
X-squared = 12760, df = 24, p-value &lt; 2.2e-16</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="http://localhost:3787/#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">assocstats</span>(tbl_3)   <span class="co"># includes Cramer's V</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   X^2 df P(&gt; X^2)
Likelihood Ratio 12149 24        0
Pearson          12760 24        0

Phi-Coefficient   : NA 
Contingency Coeff.: 0.309 
Cramer's V        : 0.163 </code></pre>
</div>
</div>
</section>
</section>
<section id="count-rate-models" class="level3">
<h3 class="anchored" data-anchor-id="count-rate-models">Count &amp; Rate Models<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#count-rate-models" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<p><strong>Poisson / Negative Binomial Regression</strong></p>
<p>Target:</p>
<ol type="1">
<li><p>Arrest counts aggregated by:</p>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="24" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-mtext class="mjx-n"><mjx-c class="mjx-c50"></mjx-c><mjx-c class="mjx-c72"></mjx-c><mjx-c class="mjx-c65"></mjx-c><mjx-c class="mjx-c63"></mjx-c><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c6E"></mjx-c><mjx-c class="mjx-c63"></mjx-c><mjx-c class="mjx-c74"></mjx-c></mjx-mtext><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mtext class="mjx-n" space="3"><mjx-c class="mjx-c54"></mjx-c><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c6D"></mjx-c><mjx-c class="mjx-c65"></mjx-c></mjx-mtext><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mtext class="mjx-n"><mjx-c class="mjx-c28"></mjx-c><mjx-c class="mjx-c64"></mjx-c><mjx-c class="mjx-c61"></mjx-c><mjx-c class="mjx-c79"></mjx-c><mjx-c class="mjx-c20"></mjx-c><mjx-c class="mjx-c2F"></mjx-c><mjx-c class="mjx-c77"></mjx-c><mjx-c class="mjx-c65"></mjx-c><mjx-c class="mjx-c65"></mjx-c><mjx-c class="mjx-c6B"></mjx-c><mjx-c class="mjx-c2F"></mjx-c><mjx-c class="mjx-c20"></mjx-c><mjx-c class="mjx-c6D"></mjx-c><mjx-c class="mjx-c6F"></mjx-c><mjx-c class="mjx-c6E"></mjx-c><mjx-c class="mjx-c74"></mjx-c><mjx-c class="mjx-c68"></mjx-c><mjx-c class="mjx-c29"></mjx-c></mjx-mtext></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>Precinct</mtext><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mo>×</mo><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mtext>Time</mtext><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mtext>(day /week/ month)</mtext></math></mjx-assistive-mml></mjx-container></span></p></li>
</ol>
<p>Model:</p>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="25" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-mtext class="mjx-n"><mjx-c class="mjx-c45"></mjx-c></mjx-mtext><mjx-mo class="mjx-n"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.182em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45D TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D461 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mtext class="mjx-n" space="4"><mjx-c class="mjx-c65"></mjx-c><mjx-c class="mjx-c78"></mjx-c><mjx-c class="mjx-c70"></mjx-c></mjx-mtext><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D6FD TEX-I"></mjx-c></mjx-mi><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.024em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45D TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D461 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>E</mtext><mo stretchy="false">[</mo><msub><mi>Y</mi><mrow data-mjx-texclass="ORD"><mi>p</mi><mi>t</mi></mrow></msub><mo stretchy="false">]</mo><mo>=</mo><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mtext>exp</mtext><mo stretchy="false">(</mo><mi>β</mi><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><msub><mi>X</mi><mrow data-mjx-texclass="ORD"><mi>p</mi><mi>t</mi></mrow></msub><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span></p>
<p>For modelling how <strong>crime family, seasonality, jurisdiction</strong> affect arrest volume.</p>
<p>Upgrade: negative binomial, handling overdispersion (almost guaranteed here).</p>
<p>Poisson:</p>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="26" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c223C"></mjx-c></mjx-mo><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D443 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45C TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D460 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D460 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45C TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D706 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>Y</mi><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mo>∼</mo><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mi>P</mi><mi>o</mi><mi>i</mi><mi>s</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo stretchy="false">(</mo><mi>λ</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span></p>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="27" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-mtext class="mjx-n"><mjx-c class="mjx-c6C"></mjx-c><mjx-c class="mjx-c6F"></mjx-c><mjx-c class="mjx-c67"></mjx-c></mjx-mtext><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D706 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-msub space="4"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D6FD TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c30"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D6FD TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.024em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mo class="mjx-n"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mo class="mjx-n"><mjx-c class="mjx-c2E"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c2E"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c2E"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D6FD TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D45D TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.024em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D45D TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>log</mtext><mo stretchy="false">(</mo><mi>λ</mi><mo stretchy="false">)</mo><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mo>=</mo><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><msub><mi>β</mi><mn>0</mn></msub><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mo>+</mo><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><msub><mi>β</mi><mn>1</mn></msub><msub><mi>X</mi><mn>1</mn></msub><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mo>+</mo><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mo>.</mo><mo>.</mo><mo>.</mo><mo>+</mo><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><msub><mi>β</mi><mi>p</mi></msub><msub><mi>X</mi><mi>p</mi></msub></math></mjx-assistive-mml></mjx-container></span></p>
<p>Negative Binomial (concerning overdispersion):</p>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="28" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c223C"></mjx-c></mjx-mo><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D441 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D435 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D707 TEX-I"></mjx-c></mjx-mi><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D703 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>Y</mi><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mo>∼</mo><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mi>N</mi><mi>B</mi><mo stretchy="false">(</mo><mi>μ</mi><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mo>,</mo><mi>θ</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span></p>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="29" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-mtext class="mjx-n"><mjx-c class="mjx-c6C"></mjx-c><mjx-c class="mjx-c6F"></mjx-c><mjx-c class="mjx-c67"></mjx-c></mjx-mtext><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D707 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D6FD TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>log</mtext><mo stretchy="false">(</mo><mi>μ</mi><mo stretchy="false">)</mo><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mo>=</mo><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mi>X</mi><mi>β</mi></math></mjx-assistive-mml></mjx-container></span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="http://localhost:3787/#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MASS)</span>
<span id="cb99-2"><a href="http://localhost:3787/#cb99-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-3"><a href="http://localhost:3787/#cb99-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Aggregate counts per precinct per month</span></span>
<span id="cb99-4"><a href="http://localhost:3787/#cb99-4" aria-hidden="true" tabindex="-1"></a>counts <span class="ot">&lt;-</span> data_stat_analy <span class="sc">|&gt;</span></span>
<span id="cb99-5"><a href="http://localhost:3787/#cb99-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">MONTH =</span> lubridate<span class="sc">::</span><span class="fu">floor_date</span>(ARREST_DATE, <span class="st">"month"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb99-6"><a href="http://localhost:3787/#cb99-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(ARREST_PRECINCT, MONTH)</span>
<span id="cb99-7"><a href="http://localhost:3787/#cb99-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-8"><a href="http://localhost:3787/#cb99-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit NB</span></span>
<span id="cb99-9"><a href="http://localhost:3787/#cb99-9" aria-hidden="true" tabindex="-1"></a>nb_model <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(n <span class="sc">~</span> ARREST_PRECINCT <span class="sc">+</span> MONTH, <span class="at">data =</span> counts)</span>
<span id="cb99-10"><a href="http://localhost:3787/#cb99-10" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(nb_model)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = n ~ ARREST_PRECINCT + MONTH, data = counts, 
    init.theta = 3.142203285, link = log)

Coefficients:
                  Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)     -6.557e+01  5.550e+00 -11.816  &lt; 2e-16 ***
ARREST_PRECINCT  2.658e-03  5.950e-04   4.468 7.89e-06 ***
MONTH            3.489e-03  2.746e-04  12.706  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(3.1422) family taken to be 1)

    Null deviance: 923.24  on 701  degrees of freedom
Residual deviance: 745.27  on 699  degrees of freedom
AIC: 8220.7

Number of Fisher Scoring iterations: 1

              Theta:  3.142 
          Std. Err.:  0.165 

 2 x log-likelihood:  -8212.703 </code></pre>
</div>
</div>
</section>
<section id="categorical-outcome-models" class="level3">
<h3 class="anchored" data-anchor-id="categorical-outcome-models">Categorical Outcome Models<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#categorical-outcome-models" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<p>Multinomial Logit Regression</p>
<ol type="1">
<li><p>Target: CRIME_FAMILY_code or ARREST_BORO_code</p></li>
<li><p>Covariates: Season, juridisction, precinct, perp sex / race, location</p></li>
<li><p>Answers:</p>
<p>How characteristics shift <strong>crime type probabilities</strong></p>
<p>Relative risk ratios across categories</p></li>
</ol>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="30" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D443 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mfrac space="4"><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-msup><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D452 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: 0.363em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D6FD TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-texatom></mjx-script></mjx-msup></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-mrow><mjx-munder limits="false"><mjx-mo class="mjx-sop"><mjx-c class="mjx-c2211 TEX-S1"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.285em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D457 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-munder><mjx-msup space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D452 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: 0.319em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D6FD TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D457 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-texatom></mjx-script></mjx-msup></mjx-mrow></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>P</mi><mo stretchy="false">(</mo><mi>Y</mi><mo>=</mo><mi>k</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><msup><mi>e</mi><mrow data-mjx-texclass="ORD"><mi>X</mi><msub><mi>β</mi><mi>k</mi></msub></mrow></msup><mrow><munder><mo data-mjx-texclass="OP">∑</mo><mi>j</mi></munder><msup><mi>e</mi><mrow data-mjx-texclass="ORD"><mi>X</mi><msub><mi>β</mi><mi>j</mi></msub></mrow></msup></mrow></mfrac></math></mjx-assistive-mml></mjx-container></span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="http://localhost:3787/#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nnet)</span>
<span id="cb101-2"><a href="http://localhost:3787/#cb101-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-3"><a href="http://localhost:3787/#cb101-3" aria-hidden="true" tabindex="-1"></a>mlogit <span class="ot">&lt;-</span> <span class="fu">multinom</span>(CRIME_FAMILY_code <span class="sc">~</span> SEASON_code <span class="sc">+</span> PERP_SEX_code <span class="sc">+</span> PERP_RACE_code <span class="sc">+</span> ARREST_BORO_code,</span>
<span id="cb101-4"><a href="http://localhost:3787/#cb101-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> data_stat_analy)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># weights:  36 (25 variable)
initial  value 216100.526064 
iter  10 value 195942.197838
iter  20 value 195204.155671
iter  30 value 191146.361871
final  value 190982.503753 
converged</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="http://localhost:3787/#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mlogit)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
multinom(formula = CRIME_FAMILY_code ~ SEASON_code + PERP_SEX_code + 
    PERP_RACE_code + ARREST_BORO_code, data = data_stat_analy)

Coefficients:
  (Intercept)  SEASON_code PERP_SEX_code PERP_RACE_code ARREST_BORO_code
2   0.1569928 -0.111111075   0.004517503    -0.10223616       0.02084896
3   1.3219013 -0.065387787   0.026322338    -0.07781491       0.02538183
4   1.5754279  0.002445751  -0.324029888    -0.04263717       0.02411779
5   2.8227234 -0.034555452  -0.623999556    -0.09516187      -0.07440842
6  -0.7473460 -0.027172725   0.459301128    -0.15320897      -0.12305357

Std. Errors:
  (Intercept) SEASON_code PERP_SEX_code PERP_RACE_code ARREST_BORO_code
2  0.10512443  0.01813463    0.04191277    0.008031874      0.012251112
3  0.07586270  0.01305628    0.03016211    0.005677748      0.008789371
4  0.07489958  0.01316221    0.02938306    0.005697595      0.008844154
5  0.07307176  0.01299875    0.02848869    0.005662508      0.008751813
6  0.13224147  0.02092404    0.05511801    0.009524550      0.014263154

Residual Deviance: 381965 
AIC: 382015 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="http://localhost:3787/#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">BIC</span>(mlogit)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 382257.5</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="http://localhost:3787/#cb107-1" aria-hidden="true" tabindex="-1"></a>mlogit_null <span class="ot">&lt;-</span> <span class="fu">multinom</span>(CRIME_FAMILY_code <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> data_stat_analy)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># weights:  12 (5 variable)
initial  value 216100.526064 
final  value 192249.201599 
converged</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="http://localhost:3787/#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(mlogit_null, mlogit, <span class="at">test =</span> <span class="st">"Chisq"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Likelihood ratio tests of Multinomial Models

Response: CRIME_FAMILY_code
                                                            Model Resid. df
1                                                               1    603035
2 SEASON_code + PERP_SEX_code + PERP_RACE_code + ARREST_BORO_code    603015
  Resid. Dev   Test    Df LR stat. Pr(Chi)
1   384498.4                              
2   381965.0 1 vs 2    20 2533.396       0</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="http://localhost:3787/#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pscl)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Classes and Methods for R originally developed in the
Political Science Computational Laboratory
Department of Political Science
Stanford University (2002-2015),
by and under the direction of Simon Jackman.
hurdle and zeroinfl functions by Achim Zeileis.</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="http://localhost:3787/#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pR2</span>(mlogit)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>fitting null model for pseudo-r2
# weights:  12 (5 variable)
initial  value 216100.526064 
final  value 192249.201599 
converged</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>          llh       llhNull            G2      McFadden          r2ML 
-1.909825e+05 -1.922492e+05  2.533396e+03  6.588833e-03  2.078613e-02 
         r2CU 
 2.168055e-02 </code></pre>
</div>
</div>
<p>Hierarchical (Mixed-Effects) Logistic Models</p>
<ol type="1">
<li>Arrests are nested:</li>
</ol>
<p>Individuals <span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="31" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c27F6"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">⟶</mo></math></mjx-assistive-mml></mjx-container></span> Precincts <span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="32" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c27F6"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">⟶</mo></math></mjx-assistive-mml></mjx-container></span> Boroughs <span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="33" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c27F6"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">⟶</mo></math></mjx-assistive-mml></mjx-container></span> Time</p>
<p>Example:</p>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="34" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-mtext class="mjx-n"><mjx-c class="mjx-c6C"></mjx-c><mjx-c class="mjx-c6F"></mjx-c><mjx-c class="mjx-c67"></mjx-c><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c74"></mjx-c></mjx-mtext><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D443 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mtext class="mjx-n"><mjx-c class="mjx-c43"></mjx-c><mjx-c class="mjx-c72"></mjx-c><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c6D"></mjx-c><mjx-c class="mjx-c65"></mjx-c></mjx-mtext><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D6FD TEX-I"></mjx-c></mjx-mi><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D462 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-texatom size="s" texclass="ORD"><mjx-mtext class="mjx-n"><mjx-c class="mjx-c70"></mjx-c><mjx-c class="mjx-c72"></mjx-c><mjx-c class="mjx-c65"></mjx-c><mjx-c class="mjx-c63"></mjx-c><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c6E"></mjx-c><mjx-c class="mjx-c63"></mjx-c><mjx-c class="mjx-c74"></mjx-c></mjx-mtext></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D463 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-texatom size="s" texclass="ORD"><mjx-mtext class="mjx-n"><mjx-c class="mjx-c62"></mjx-c><mjx-c class="mjx-c6F"></mjx-c><mjx-c class="mjx-c72"></mjx-c><mjx-c class="mjx-c6F"></mjx-c></mjx-mtext></mjx-texatom></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>logit</mtext><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">(</mo><mtext>Crime</mtext><mo>=</mo><mi>k</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>=</mo><mi>X</mi><mi>β</mi><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mo>+</mo><msub><mi>u</mi><mrow data-mjx-texclass="ORD"><mtext>precinct</mtext></mrow></msub><mo>+</mo><msub><mi>v</mi><mrow data-mjx-texclass="ORD"><mtext>boro</mtext></mrow></msub></math></mjx-assistive-mml></mjx-container></span></p>
<p>Controls unobserved precinct-level heterogeneity.</p>
<p>Avoids false precision.</p>
<p>Mathematical Structure:</p>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="35" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-mtext class="mjx-n"><mjx-c class="mjx-c6C"></mjx-c><mjx-c class="mjx-c6F"></mjx-c><mjx-c class="mjx-c67"></mjx-c><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c74"></mjx-c></mjx-mtext><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mfrac><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-mrow><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D443 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="4"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-mrow><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D443 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="4"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D6FD TEX-I"></mjx-c></mjx-mi><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D462 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-texatom size="s" texclass="ORD"><mjx-mtext class="mjx-n"><mjx-c class="mjx-c70"></mjx-c><mjx-c class="mjx-c72"></mjx-c><mjx-c class="mjx-c65"></mjx-c><mjx-c class="mjx-c63"></mjx-c><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c6E"></mjx-c><mjx-c class="mjx-c63"></mjx-c><mjx-c class="mjx-c74"></mjx-c></mjx-mtext></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D463 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-texatom size="s" texclass="ORD"><mjx-mtext class="mjx-n"><mjx-c class="mjx-c62"></mjx-c><mjx-c class="mjx-c6F"></mjx-c><mjx-c class="mjx-c72"></mjx-c><mjx-c class="mjx-c6F"></mjx-c></mjx-mtext></mjx-texatom></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>logit</mtext><mo stretchy="false">(</mo><mfrac><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>Y</mi><mo>=</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mrow><mn>1</mn><mo>−</mo><mi>P</mi><mo stretchy="false">(</mo><mi>Y</mi><mo>=</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></mfrac><mo stretchy="false">)</mo><mo>=</mo><mi>X</mi><mi>β</mi><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mo>+</mo><msub><mi>u</mi><mrow data-mjx-texclass="ORD"><mtext>precinct</mtext></mrow></msub><mo>+</mo><msub><mi>v</mi><mrow data-mjx-texclass="ORD"><mtext>boro</mtext></mrow></msub></math></mjx-assistive-mml></mjx-container></span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="http://localhost:3787/#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lme4)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: Matrix</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'Matrix'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:tidyr':

    expand, pack, unpack</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="http://localhost:3787/#cb120-1" aria-hidden="true" tabindex="-1"></a>mixed <span class="ot">&lt;-</span> <span class="fu">glmer</span>(CRIME_FAMILY_code <span class="sc">==</span> <span class="st">"5"</span> <span class="sc">~</span> SEASON_code <span class="sc">+</span> PERP_SEX_code <span class="sc">+</span> PERP_RACE_code <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>ARREST_PRECINCT),</span>
<span id="cb120-2"><a href="http://localhost:3787/#cb120-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> data_stat_analy,</span>
<span id="cb120-3"><a href="http://localhost:3787/#cb120-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">family =</span> binomial)</span>
<span id="cb120-4"><a href="http://localhost:3787/#cb120-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mixed)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Generalized linear mixed model fit by maximum likelihood (Laplace
  Approximation) [glmerMod]
 Family: binomial  ( logit )
Formula: 
CRIME_FAMILY_code == "5" ~ SEASON_code + PERP_SEX_code + PERP_RACE_code +  
    (1 | ARREST_PRECINCT)
   Data: data_stat_analy

      AIC       BIC    logLik -2*log(L)  df.resid 
 140287.6  140336.1  -70138.8  140277.6    120603 

Scaled residuals: 
    Min      1Q  Median      3Q     Max 
-1.0358 -0.6341 -0.5578  1.2477  2.5871 

Random effects:
 Groups          Name        Variance Std.Dev.
 ARREST_PRECINCT (Intercept) 0.07002  0.2646  
Number of obs: 120608, groups:  ARREST_PRECINCT, 78

Fixed effects:
                Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)     0.200343   0.050772   3.946 7.95e-05 ***
SEASON_code    -0.001191   0.008098  -0.147    0.883    
PERP_SEX_code  -0.533095   0.016120 -33.070  &lt; 2e-16 ***
PERP_RACE_code -0.040227   0.003764 -10.688  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Correlation of Fixed Effects:
            (Intr) SEASON PERP_S
SEASON_code -0.439              
PERP_SEX_cd -0.572 -0.010       
PERP_RACE_c -0.332 -0.003  0.021</code></pre>
</div>
</div>
</section>
<section id="time-series" class="level3">
<h3 class="anchored" data-anchor-id="time-series">Time Series<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#time-series" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<p>Seasonal Decomposition:</p>
<ol type="1">
<li><p>STL / TBATS on arrest counts</p></li>
<li><p>Extract:</p>
<p>Trend</p>
<p>Weekly/seasonal patterns</p>
<p>Shock periods</p></li>
</ol>
<p>Mathematical Structure - Decompose:</p>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="36" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.182em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D461 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-msub space="4"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D447 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.12em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D461 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D461 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D461 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>Y</mi><mi>t</mi></msub><mo>=</mo><msub><mi>T</mi><mi>t</mi></msub><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mo>+</mo><msub><mi>S</mi><mi>t</mi></msub><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mo>+</mo><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><msub><mi>R</mi><mi>t</mi></msub></math></mjx-assistive-mml></mjx-container></span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="http://localhost:3787/#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If the range is &lt; 2 calendar years → STL with frequency = 365 will not work.</span></span>
<span id="cb122-2"><a href="http://localhost:3787/#cb122-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forecast)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Registered S3 method overwritten by 'quantmod':
  method            from
  as.zoo.data.frame zoo </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="http://localhost:3787/#cb124-1" aria-hidden="true" tabindex="-1"></a>ts_data <span class="ot">&lt;-</span> data_stat_analy <span class="sc">|&gt;</span></span>
<span id="cb124-2"><a href="http://localhost:3787/#cb124-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(ARREST_DATE)</span>
<span id="cb124-3"><a href="http://localhost:3787/#cb124-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-4"><a href="http://localhost:3787/#cb124-4" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(ts_data)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 273</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="http://localhost:3787/#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(ts_data<span class="sc">$</span>ARREST_DATE)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2025-01-01" "2025-09-30"</code></pre>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="http://localhost:3787/#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ensure the series is truly regular (daily)</span></span>
<span id="cb128-2"><a href="http://localhost:3787/#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb128-3"><a href="http://localhost:3787/#cb128-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-4"><a href="http://localhost:3787/#cb128-4" aria-hidden="true" tabindex="-1"></a>ts_data <span class="ot">&lt;-</span> data_stat_analy <span class="sc">|&gt;</span></span>
<span id="cb128-5"><a href="http://localhost:3787/#cb128-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(ARREST_DATE) <span class="sc">|&gt;</span></span>
<span id="cb128-6"><a href="http://localhost:3787/#cb128-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">complete</span>(ARREST_DATE,</span>
<span id="cb128-7"><a href="http://localhost:3787/#cb128-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> <span class="fu">list</span>(<span class="at">n =</span> <span class="dv">0</span>)) <span class="sc">|&gt;</span></span>
<span id="cb128-8"><a href="http://localhost:3787/#cb128-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(ARREST_DATE)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>If you only have ~1 year (or a bit more), <strong>weekly seasonality</strong> is far more defensible anyway for arrests.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="http://localhost:3787/#cb129-1" aria-hidden="true" tabindex="-1"></a>ts_obj <span class="ot">&lt;-</span> <span class="fu">ts</span>(ts_data<span class="sc">$</span>n, <span class="at">frequency =</span> <span class="dv">7</span>)</span>
<span id="cb129-2"><a href="http://localhost:3787/#cb129-2" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">stl</span>(ts_obj, <span class="at">s.window =</span> <span class="st">"periodic"</span>, <span class="at">robust =</span> <span class="cn">TRUE</span>)</span>
<span id="cb129-3"><a href="http://localhost:3787/#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(fit)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Interpretation:</p>
<ol type="1">
<li>Seasonal → day-of-week effect</li>
<li>Trend → longer-term changes</li>
<li>Remainder → shocks / events</li>
</ol>
<p>This is often the <em>right</em> choice substantively.</p>
</section>
<section id="spatial-spatiotemporal-models-very-powerful-here" class="level3">
<h3 class="anchored" data-anchor-id="spatial-spatiotemporal-models-very-powerful-here">Spatial &amp; Spatiotemporal Models (Very Powerful Here)<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#spatial-spatiotemporal-models-very-powerful-here" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<p>Spatial Point Pattern Analysis –</p>
<p>Use lat/long directly</p>
<ol type="1">
<li><p>Kernel density estimation (hotspot maps).</p>
<p>Kernel Density Estimate:</p>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="37" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-texatom texclass="ORD"><mjx-mover><mjx-over style="padding-bottom: 0.105em; padding-left: 0.457em; margin-bottom: -0.531em;"><mjx-mo class="mjx-n" style="width: 0px; margin-left: -0.25em;"><mjx-c class="mjx-c5E"></mjx-c></mjx-mo></mjx-over><mjx-base><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi></mjx-base></mjx-mover></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mfrac space="4"><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-mrow><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c210E TEX-I"></mjx-c></mjx-mi></mjx-mrow></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac><mjx-munderover space="2"><mjx-over style="padding-bottom: 0.192em; padding-left: 0.51em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi></mjx-over><mjx-box><mjx-munder><mjx-row><mjx-base><mjx-mo class="mjx-lop"><mjx-c class="mjx-c2211 TEX-S2"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top: 0.167em; padding-left: 0.148em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-under></mjx-row></mjx-munder></mjx-box></mjx-munderover><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D43E TEX-I"></mjx-c></mjx-mi><mjx-mrow space="2"><mjx-mo class="mjx-s3"><mjx-c class="mjx-c28 TEX-S3"></mjx-c></mjx-mo><mjx-mfrac><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-mrow><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-mrow></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-mi class="mjx-i"><mjx-c class="mjx-c210E TEX-I"></mjx-c></mjx-mi></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac><mjx-mo class="mjx-s3"><mjx-c class="mjx-c29 TEX-S3"></mjx-c></mjx-mo></mjx-mrow></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow data-mjx-texclass="ORD"><mover><mi>f</mi><mo stretchy="false">^</mo></mover></mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mrow><mi>n</mi><mi>h</mi></mrow></mfrac><munderover><mo data-mjx-texclass="OP">∑</mo><mrow data-mjx-texclass="ORD"><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi>K</mi><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mfrac><mrow><mi>x</mi><mo>−</mo><msub><mi>x</mi><mi>i</mi></msub></mrow><mi>h</mi></mfrac><mo data-mjx-texclass="CLOSE">)</mo></mrow></math></mjx-assistive-mml></mjx-container></span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="http://localhost:3787/#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(spatstat)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: spatstat.data</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: spatstat.univar</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>spatstat.univar 3.1-6</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: spatstat.geom</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>spatstat.geom 3.7-0</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'spatstat.geom'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:grid':

    as.mask</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:MASS':

    area</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:scales':

    rescale</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: spatstat.random</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>spatstat.random 3.4-3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: spatstat.explore</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: nlme</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'nlme'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:forecast':

    getResponse</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:lme4':

    lmList</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:dplyr':

    collapse</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>spatstat.explore 3.6-0</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: spatstat.model</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: rpart</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>spatstat.model 3.5-0</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: spatstat.linnet</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>spatstat.linnet 3.4-0</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
spatstat 3.5-0 
For an introduction to spatstat, type 'beginner' </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="http://localhost:3787/#cb155-1" aria-hidden="true" tabindex="-1"></a>pp <span class="ot">&lt;-</span> <span class="fu">ppp</span>(data_stat_analy<span class="sc">$</span>Longitude,</span>
<span id="cb155-2"><a href="http://localhost:3787/#cb155-2" aria-hidden="true" tabindex="-1"></a>          data_stat_analy<span class="sc">$</span>Latitude,</span>
<span id="cb155-3"><a href="http://localhost:3787/#cb155-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">window =</span> <span class="fu">owin</span>(<span class="fu">range</span>(data_stat_analy<span class="sc">$</span>Longitude),</span>
<span id="cb155-4"><a href="http://localhost:3787/#cb155-4" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">range</span>(data_stat_analy<span class="sc">$</span>Latitude)))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: data contain duplicated points</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="http://localhost:3787/#cb157-1" aria-hidden="true" tabindex="-1"></a>density_pp <span class="ot">&lt;-</span> <span class="fu">density</span>(pp)</span>
<span id="cb157-2"><a href="http://localhost:3787/#cb157-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(density_pp)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/unnamed-chunk-32-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div></li>
<li><p>Ripley’s K / L functions (clustering vs randomness)</p></li>
</ol>
<p>Spatial Autoregressive Models –</p>
<ol type="1">
<li><p>When aggregating by precinct use SAR / CAR models</p></li>
<li><p>Why:</p>
<ul>
<li>Arrests in nearby precincts are correlated</li>
</ul>
<!-- -->
<ul>
<li>Ignoring this biases coefficients</li>
</ul></li>
</ol>
<p>Spatiotemporal Bayesian Models</p>
<ol type="1">
<li>Gold standard: INLA / CAR + time random effects</li>
<li>Answers
<ul>
<li><p>Where crime risk is <strong>persistently elevate</strong></p></li>
<li><p>Distinguishes noise from structural hotspots</p></li>
</ul></li>
</ol>
</section>
</section>
<section id="interpretation-first-machine-learning" class="level2">
<h2 class="anchored" data-anchor-id="interpretation-first-machine-learning">Interpretation-First Machine Learning<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#interpretation-first-machine-learning" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<section id="feature-engineering" class="level3">
<h3 class="anchored" data-anchor-id="feature-engineering">Feature Engineering<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#feature-engineering" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<p>Development at the <strong>precinct–time</strong> level (this is critical).</p>
<p>Mathematical Aggregation</p>
<ol type="1">
<li><p>Let</p>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="38" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.182em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45D TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D461 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mtext class="mjx-n" space="4"><mjx-c class="mjx-c61"></mjx-c><mjx-c class="mjx-c72"></mjx-c><mjx-c class="mjx-c72"></mjx-c><mjx-c class="mjx-c65"></mjx-c><mjx-c class="mjx-c73"></mjx-c><mjx-c class="mjx-c74"></mjx-c><mjx-c class="mjx-c73"></mjx-c><mjx-c class="mjx-c20"></mjx-c><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c6E"></mjx-c><mjx-c class="mjx-c20"></mjx-c><mjx-c class="mjx-c70"></mjx-c><mjx-c class="mjx-c72"></mjx-c><mjx-c class="mjx-c65"></mjx-c><mjx-c class="mjx-c63"></mjx-c><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c6E"></mjx-c><mjx-c class="mjx-c63"></mjx-c><mjx-c class="mjx-c74"></mjx-c></mjx-mtext><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45D TEX-I"></mjx-c></mjx-mi><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mtext class="mjx-n"><mjx-c class="mjx-c64"></mjx-c><mjx-c class="mjx-c75"></mjx-c><mjx-c class="mjx-c72"></mjx-c><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c6E"></mjx-c><mjx-c class="mjx-c67"></mjx-c><mjx-c class="mjx-c20"></mjx-c><mjx-c class="mjx-c74"></mjx-c><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c6D"></mjx-c><mjx-c class="mjx-c65"></mjx-c></mjx-mtext><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D461 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>Y</mi><mrow data-mjx-texclass="ORD"><mi>p</mi><mo>,</mo><mi>t</mi></mrow></msub><mo>=</mo><mtext>arrests in precinct</mtext><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mi>p</mi><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mtext>during time</mtext><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mi>t</mi></math></mjx-assistive-mml></mjx-container></span></p></li>
<li><p>Construct a feature vector:</p></li>
</ol>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="39" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.024em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45D TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D461 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mrow space="4"><mjx-mo class="mjx-n"><mjx-stretchy-v class="mjx-c5B" style="height: 5.2em; vertical-align: -2.35em;"><mjx-beg><mjx-c></mjx-c></mjx-beg><mjx-ext><mjx-c></mjx-c></mjx-ext><mjx-end><mjx-c></mjx-c></mjx-end><mjx-mark></mjx-mark></mjx-stretchy-v></mjx-mo><mjx-mtable style="min-width: 8.697em;"><mjx-table><mjx-itable><mjx-mtr><mjx-mtd style="padding-bottom: 0.2em;"><mjx-mtext class="mjx-n"><mjx-c class="mjx-c43"></mjx-c><mjx-c class="mjx-c72"></mjx-c><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c6D"></mjx-c><mjx-c class="mjx-c65"></mjx-c><mjx-c class="mjx-c20"></mjx-c><mjx-c class="mjx-c66"></mjx-c><mjx-c class="mjx-c61"></mjx-c><mjx-c class="mjx-c6D"></mjx-c><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c6C"></mjx-c><mjx-c class="mjx-c79"></mjx-c><mjx-c class="mjx-c20"></mjx-c><mjx-c class="mjx-c73"></mjx-c><mjx-c class="mjx-c68"></mjx-c><mjx-c class="mjx-c61"></mjx-c><mjx-c class="mjx-c72"></mjx-c><mjx-c class="mjx-c65"></mjx-c><mjx-c class="mjx-c73"></mjx-c></mjx-mtext><mjx-tstrut></mjx-tstrut></mjx-mtd></mjx-mtr><mjx-mtr><mjx-mtd style="padding-top: 0.2em; padding-bottom: 0.2em;"><mjx-mtext class="mjx-n"><mjx-c class="mjx-c53"></mjx-c><mjx-c class="mjx-c65"></mjx-c><mjx-c class="mjx-c61"></mjx-c><mjx-c class="mjx-c73"></mjx-c><mjx-c class="mjx-c6F"></mjx-c><mjx-c class="mjx-c6E"></mjx-c><mjx-c class="mjx-c61"></mjx-c><mjx-c class="mjx-c6C"></mjx-c><mjx-c class="mjx-c20"></mjx-c><mjx-c class="mjx-c73"></mjx-c><mjx-c class="mjx-c68"></mjx-c><mjx-c class="mjx-c61"></mjx-c><mjx-c class="mjx-c72"></mjx-c><mjx-c class="mjx-c65"></mjx-c><mjx-c class="mjx-c73"></mjx-c></mjx-mtext><mjx-tstrut></mjx-tstrut></mjx-mtd></mjx-mtr><mjx-mtr><mjx-mtd style="padding-top: 0.2em; padding-bottom: 0.2em;"><mjx-mtext class="mjx-n"><mjx-c class="mjx-c44"></mjx-c><mjx-c class="mjx-c65"></mjx-c><mjx-c class="mjx-c6D"></mjx-c><mjx-c class="mjx-c6F"></mjx-c><mjx-c class="mjx-c67"></mjx-c><mjx-c class="mjx-c72"></mjx-c><mjx-c class="mjx-c61"></mjx-c><mjx-c class="mjx-c70"></mjx-c><mjx-c class="mjx-c68"></mjx-c><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c63"></mjx-c><mjx-c class="mjx-c20"></mjx-c><mjx-c class="mjx-c73"></mjx-c><mjx-c class="mjx-c68"></mjx-c><mjx-c class="mjx-c61"></mjx-c><mjx-c class="mjx-c72"></mjx-c><mjx-c class="mjx-c65"></mjx-c><mjx-c class="mjx-c73"></mjx-c></mjx-mtext><mjx-tstrut></mjx-tstrut></mjx-mtd></mjx-mtr><mjx-mtr><mjx-mtd style="padding-top: 0.2em;"><mjx-mtext class="mjx-n"><mjx-c class="mjx-c53"></mjx-c><mjx-c class="mjx-c70"></mjx-c><mjx-c class="mjx-c61"></mjx-c><mjx-c class="mjx-c74"></mjx-c><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c61"></mjx-c><mjx-c class="mjx-c6C"></mjx-c><mjx-c class="mjx-c20"></mjx-c><mjx-c class="mjx-c63"></mjx-c><mjx-c class="mjx-c6F"></mjx-c><mjx-c class="mjx-c6F"></mjx-c><mjx-c class="mjx-c72"></mjx-c><mjx-c class="mjx-c64"></mjx-c><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c6E"></mjx-c><mjx-c class="mjx-c61"></mjx-c><mjx-c class="mjx-c74"></mjx-c><mjx-c class="mjx-c65"></mjx-c><mjx-c class="mjx-c73"></mjx-c></mjx-mtext><mjx-tstrut></mjx-tstrut></mjx-mtd></mjx-mtr></mjx-itable></mjx-table></mjx-mtable><mjx-mo class="mjx-n"><mjx-stretchy-v class="mjx-c5D" style="height: 5.2em; vertical-align: -2.35em;"><mjx-beg><mjx-c></mjx-c></mjx-beg><mjx-ext><mjx-c></mjx-c></mjx-ext><mjx-end><mjx-c></mjx-c></mjx-end><mjx-mark></mjx-mark></mjx-stretchy-v></mjx-mo></mjx-mrow></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>X</mi><mrow data-mjx-texclass="ORD"><mi>p</mi><mo>,</mo><mi>t</mi></mrow></msub><mo>=</mo><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mtext>Crime family shares</mtext></mtd></mtr><mtr><mtd><mtext>Seasonal shares</mtext></mtd></mtr><mtr><mtd><mtext>Demographic shares</mtext></mtd></mtr><mtr><mtd><mtext>Spatial coordinates</mtext></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow></math></mjx-assistive-mml></mjx-container></span></p>
<p>Precinct–Month Feature Matrix:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="http://localhost:3787/#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mapping_df,<span class="at">n=</span><span class="dv">29</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 29 × 3
   variable     value                           code
   &lt;chr&gt;        &lt;chr&gt;                          &lt;int&gt;
 1 AGE_GROUP    18-24                              1
 2 AGE_GROUP    25-44                              2
 3 AGE_GROUP    45-64                              3
 4 AGE_GROUP    65+                                4
 5 AGE_GROUP    &lt;18                                5
 6 ARREST_BORO  B                                  1
 7 ARREST_BORO  K                                  2
 8 ARREST_BORO  M                                  3
 9 ARREST_BORO  Q                                  4
10 ARREST_BORO  S                                  5
11 CRIME_FAMILY Drug/Vice Crime                    1
12 CRIME_FAMILY Financial/Administrative           2
13 CRIME_FAMILY Other/Public Order                 3
14 CRIME_FAMILY Property Crime                     4
15 CRIME_FAMILY Violent Crime                      5
16 CRIME_FAMILY Weapons Crime                      6
17 PERP_RACE    AMERICAN INDIAN/ALASKAN NATIVE     1
18 PERP_RACE    ASIAN / PACIFIC ISLANDER           2
19 PERP_RACE    BLACK                              3
20 PERP_RACE    BLACK HISPANIC                     4
21 PERP_RACE    UNKNOWN                            5
22 PERP_RACE    WHITE                              6
23 PERP_RACE    WHITE HISPANIC                     7
24 PERP_SEX     F                                  1
25 PERP_SEX     M                                  2
26 SEASON       Fall                               1
27 SEASON       Spring                             2
28 SEASON       Summer                             3
29 SEASON       Winter                             4</code></pre>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="http://localhost:3787/#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In the following code, with categorical features one isn't taking the mean of the category, rather, taking the mean of a logical vector:</span></span>
<span id="cb160-2"><a href="http://localhost:3787/#cb160-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-3"><a href="http://localhost:3787/#cb160-3" aria-hidden="true" tabindex="-1"></a>precinct_features <span class="ot">&lt;-</span> data_stat_analy <span class="sc">|&gt;</span></span>
<span id="cb160-4"><a href="http://localhost:3787/#cb160-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">MONTH =</span> <span class="fu">floor_date</span>(ARREST_DATE, <span class="st">"month"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb160-5"><a href="http://localhost:3787/#cb160-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ARREST_PRECINCT, MONTH) <span class="sc">|&gt;</span></span>
<span id="cb160-6"><a href="http://localhost:3787/#cb160-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb160-7"><a href="http://localhost:3787/#cb160-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_arrests =</span> <span class="fu">n</span>(),</span>
<span id="cb160-8"><a href="http://localhost:3787/#cb160-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb160-9"><a href="http://localhost:3787/#cb160-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Crime family shares</span></span>
<span id="cb160-10"><a href="http://localhost:3787/#cb160-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">pct_crime_family_1 =</span> <span class="fu">mean</span>(CRIME_FAMILY_code <span class="sc">==</span> <span class="dv">1</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb160-11"><a href="http://localhost:3787/#cb160-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">pct_crime_family_2 =</span> <span class="fu">mean</span>(CRIME_FAMILY_code <span class="sc">==</span> <span class="dv">2</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb160-12"><a href="http://localhost:3787/#cb160-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">pct_crime_family_3 =</span> <span class="fu">mean</span>(CRIME_FAMILY_code <span class="sc">==</span> <span class="dv">3</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb160-13"><a href="http://localhost:3787/#cb160-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">pct_crime_family_4 =</span> <span class="fu">mean</span>(CRIME_FAMILY_code <span class="sc">==</span> <span class="dv">4</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb160-14"><a href="http://localhost:3787/#cb160-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">pct_crime_family_5 =</span> <span class="fu">mean</span>(CRIME_FAMILY_code <span class="sc">==</span> <span class="dv">5</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb160-15"><a href="http://localhost:3787/#cb160-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">pct_crime_family_6 =</span> <span class="fu">mean</span>(CRIME_FAMILY_code <span class="sc">==</span> <span class="dv">6</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb160-16"><a href="http://localhost:3787/#cb160-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb160-17"><a href="http://localhost:3787/#cb160-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Season shares</span></span>
<span id="cb160-18"><a href="http://localhost:3787/#cb160-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">pct_season_1 =</span> <span class="fu">mean</span>(SEASON_code <span class="sc">==</span> <span class="dv">1</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb160-19"><a href="http://localhost:3787/#cb160-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">pct_season_2 =</span> <span class="fu">mean</span>(SEASON_code <span class="sc">==</span> <span class="dv">2</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb160-20"><a href="http://localhost:3787/#cb160-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">pct_season_3 =</span> <span class="fu">mean</span>(SEASON_code <span class="sc">==</span> <span class="dv">3</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb160-21"><a href="http://localhost:3787/#cb160-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">pct_season_4 =</span> <span class="fu">mean</span>(SEASON_code <span class="sc">==</span> <span class="dv">4</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb160-22"><a href="http://localhost:3787/#cb160-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb160-23"><a href="http://localhost:3787/#cb160-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">pct_male =</span> <span class="fu">mean</span>(PERP_SEX_code <span class="sc">==</span> <span class="dv">2</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb160-24"><a href="http://localhost:3787/#cb160-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">pct_female =</span> <span class="fu">mean</span>(PERP_SEX_code <span class="sc">==</span> <span class="dv">1</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb160-25"><a href="http://localhost:3787/#cb160-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_lon =</span> <span class="fu">mean</span>(Longitude, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb160-26"><a href="http://localhost:3787/#cb160-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_lat =</span> <span class="fu">mean</span>(Latitude, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb160-27"><a href="http://localhost:3787/#cb160-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb160-28"><a href="http://localhost:3787/#cb160-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb160-29"><a href="http://localhost:3787/#cb160-29" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb160-30"><a href="http://localhost:3787/#cb160-30" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(precinct_features)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [702 × 17] (S3: tbl_df/tbl/data.frame)
 $ ARREST_PRECINCT   : num [1:702] 1 1 1 1 1 1 1 1 1 5 ...
 $ MONTH             : Date[1:702], format: "2025-01-01" "2025-02-01" ...
 $ total_arrests     : int [1:702] 151 140 136 184 195 186 250 204 302 168 ...
 $ pct_crime_family_1: num [1:702] 0.0331 0 0.0221 0.0598 0.0667 ...
 $ pct_crime_family_2: num [1:702] 0.0397 0.0286 0.1029 0.1033 0.0923 ...
 $ pct_crime_family_3: num [1:702] 0.126 0.164 0.11 0.168 0.21 ...
 $ pct_crime_family_4: num [1:702] 0.656 0.664 0.529 0.478 0.462 ...
 $ pct_crime_family_5: num [1:702] 0.146 0.114 0.228 0.163 0.149 ...
 $ pct_crime_family_6: num [1:702] 0 0.02857 0.00735 0.02717 0.02051 ...
 $ pct_season_1      : num [1:702] 0 0 0 0 0 ...
 $ pct_season_2      : num [1:702] 0 0 0.39 1 1 ...
 $ pct_season_3      : num [1:702] 0 0 0 0 0 ...
 $ pct_season_4      : num [1:702] 1 1 0.61 0 0 ...
 $ pct_male          : num [1:702] 0.894 0.843 0.882 0.875 0.79 ...
 $ pct_female        : num [1:702] 0.106 0.157 0.118 0.125 0.21 ...
 $ mean_lon          : num [1:702] -74 -73.5 -74 -74 -74 ...
 $ mean_lat          : num [1:702] 40.7 40.4 40.7 40.7 40.7 ...</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="http://localhost:3787/#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(precinct_features, <span class="dv">10</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 17
   ARREST_PRECINCT MONTH      total_arrests pct_crime_family_1
             &lt;dbl&gt; &lt;date&gt;             &lt;int&gt;              &lt;dbl&gt;
 1               1 2025-01-01           151             0.0331
 2               1 2025-02-01           140             0     
 3               1 2025-03-01           136             0.0221
 4               1 2025-04-01           184             0.0598
 5               1 2025-05-01           195             0.0667
 6               1 2025-06-01           186             0.0215
 7               1 2025-07-01           250             0.004 
 8               1 2025-08-01           204             0.0294
 9               1 2025-09-01           302             0.0199
10               5 2025-01-01           168             0.0476
# ℹ 13 more variables: pct_crime_family_2 &lt;dbl&gt;, pct_crime_family_3 &lt;dbl&gt;,
#   pct_crime_family_4 &lt;dbl&gt;, pct_crime_family_5 &lt;dbl&gt;,
#   pct_crime_family_6 &lt;dbl&gt;, pct_season_1 &lt;dbl&gt;, pct_season_2 &lt;dbl&gt;,
#   pct_season_3 &lt;dbl&gt;, pct_season_4 &lt;dbl&gt;, pct_male &lt;dbl&gt;, pct_female &lt;dbl&gt;,
#   mean_lon &lt;dbl&gt;, mean_lat &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="supervised-learning---tree-based-models" class="level3">
<h3 class="anchored" data-anchor-id="supervised-learning---tree-based-models">Supervised Learning - Tree Based Models<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#supervised-learning---tree-based-models" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<p>Targets (three tasks)</p>
<ol type="1">
<li><p>Crime Family (multiclass)</p>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="40" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c2208"></mjx-c></mjx-mo><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c7B"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c2E"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c2E"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c2E"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D43E TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c7D"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>Y</mi><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mo>∈</mo><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mo fence="false" stretchy="false">{</mo><mn>1</mn><mo>,</mo><mo>.</mo><mo>.</mo><mo>.</mo><mo>,</mo><mi>K</mi><mo fence="false" stretchy="false">}</mo></math></mjx-assistive-mml></mjx-container></span></p></li>
<li><p>Borough (multiclass)</p></li>
<li><p>High-risk precint (binary)</p>
<p>Define:</p>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="41" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.182em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45D TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D461 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mrow space="4"><mjx-mo class="mjx-s3"><mjx-c class="mjx-c7B TEX-S3"></mjx-c></mjx-mo><mjx-mtable style="min-width: 9.519em;"><mjx-table><mjx-itable><mjx-mtr><mjx-mtd style="text-align: left; padding-right: 0.5em; padding-bottom: 0.1em;"><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-tstrut></mjx-tstrut></mjx-mtd><mjx-mtd style="text-align: left; padding-left: 0.5em; padding-bottom: 0.1em;"><mjx-mtext class="mjx-n"><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c66"></mjx-c><mjx-c class="mjx-cA0"></mjx-c></mjx-mtext><mjx-msub><mjx-mtext class="mjx-n"><mjx-c class="mjx-c61"></mjx-c><mjx-c class="mjx-c72"></mjx-c><mjx-c class="mjx-c72"></mjx-c><mjx-c class="mjx-c65"></mjx-c><mjx-c class="mjx-c73"></mjx-c><mjx-c class="mjx-c74"></mjx-c><mjx-c class="mjx-c73"></mjx-c></mjx-mtext><mjx-script style="vertical-align: -0.15em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45D TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D461 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3E"></mjx-c></mjx-mo><mjx-msub space="4"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D444 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-texatom size="s" texclass="ORD"><mjx-mn class="mjx-n"><mjx-c class="mjx-c30"></mjx-c><mjx-c class="mjx-c2E"></mjx-c><mjx-c class="mjx-c39"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub><mjx-tstrut></mjx-tstrut></mjx-mtd></mjx-mtr><mjx-mtr><mjx-mtd style="text-align: left; padding-right: 0.5em; padding-top: 0.1em;"><mjx-mn class="mjx-n"><mjx-c class="mjx-c30"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-tstrut></mjx-tstrut></mjx-mtd><mjx-mtd style="text-align: left; padding-left: 0.5em; padding-top: 0.1em;"><mjx-mtext class="mjx-n"><mjx-c class="mjx-c6F"></mjx-c><mjx-c class="mjx-c74"></mjx-c><mjx-c class="mjx-c68"></mjx-c><mjx-c class="mjx-c65"></mjx-c><mjx-c class="mjx-c72"></mjx-c><mjx-c class="mjx-c77"></mjx-c><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c73"></mjx-c><mjx-c class="mjx-c65"></mjx-c></mjx-mtext><mjx-tstrut></mjx-tstrut></mjx-mtd></mjx-mtr></mjx-itable></mjx-table></mjx-mtable><mjx-mo class="mjx-n" style="vertical-align: 0.25em;"></mjx-mo></mjx-mrow></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>Y</mi><mrow data-mjx-texclass="ORD"><mi>p</mi><mo>,</mo><mi>t</mi></mrow></msub><mo>=</mo><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">{</mo><mtable columnalign="left left" columnspacing="1em" rowspacing=".2em"><mtr><mtd><mn>1</mn><mo>,</mo></mtd><mtd><mtext>if&nbsp;</mtext><msub><mtext>arrests</mtext><mrow data-mjx-texclass="ORD"><mi>p</mi><mo>,</mo><mi>t</mi></mrow></msub><mo>&gt;</mo><msub><mi>Q</mi><mrow data-mjx-texclass="ORD"><mn>0.9</mn></mrow></msub></mtd></mtr><mtr><mtd><mn>0</mn><mo>,</mo></mtd><mtd><mtext>otherwise</mtext></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE" fence="true" stretchy="true" symmetric="true"></mo></mrow></math></mjx-assistive-mml></mjx-container></span></p></li>
</ol>
<p>High-Risk Indicator:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb164"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="http://localhost:3787/#cb164-1" aria-hidden="true" tabindex="-1"></a>threshold <span class="ot">&lt;-</span> <span class="fu">quantile</span>(precinct_features<span class="sc">$</span>total_arrests, <span class="fl">0.9</span>)</span>
<span id="cb164-2"><a href="http://localhost:3787/#cb164-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-3"><a href="http://localhost:3787/#cb164-3" aria-hidden="true" tabindex="-1"></a>precinct_features <span class="ot">&lt;-</span> precinct_features <span class="sc">|&gt;</span></span>
<span id="cb164-4"><a href="http://localhost:3787/#cb164-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">high_risk =</span> <span class="fu">as.integer</span>(total_arrests <span class="sc">&gt;</span> threshold))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="random-forest-baseline-robust" class="level3">
<h3 class="anchored" data-anchor-id="random-forest-baseline-robust">Random Forest (Baseline, Robust)<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#random-forest-baseline-robust" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<p>Random Forest approximates:</p>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="42" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-texatom texclass="ORD"><mjx-mover><mjx-over style="padding-bottom: 0.105em; padding-left: 0.457em; margin-bottom: -0.531em;"><mjx-mo class="mjx-n" style="width: 0px; margin-left: -0.25em;"><mjx-c class="mjx-c5E"></mjx-c></mjx-mo></mjx-over><mjx-base><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi></mjx-base></mjx-mover></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mfrac space="4"><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D435 TEX-I"></mjx-c></mjx-mi></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac><mjx-munderover space="2"><mjx-over style="padding-bottom: 0.2em; padding-left: 0.454em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D435 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-over><mjx-box><mjx-munder><mjx-row><mjx-base><mjx-mo class="mjx-lop"><mjx-c class="mjx-c2211 TEX-S2"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top: 0.167em; padding-left: 0.118em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-under></mjx-row></mjx-munder></mjx-box></mjx-munderover><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D447 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.12em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow data-mjx-texclass="ORD"><mover><mi>f</mi><mo stretchy="false">^</mo></mover></mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mi>B</mi></mfrac><munderover><mo data-mjx-texclass="OP">∑</mo><mrow data-mjx-texclass="ORD"><mi>b</mi><mo>=</mo><mn>1</mn></mrow><mrow data-mjx-texclass="ORD"><mi>B</mi></mrow></munderover><msub><mi>T</mi><mi>b</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span></p>
<p>where each <span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="43" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D447 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.12em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>T</mi><mi>b</mi></msub></math></mjx-assistive-mml></mjx-container></span> is a bootstrapped decision tree.</p>
<p>Why RF first:</p>
<ol type="1">
<li>Stable</li>
<li>Nonlinear</li>
<li>Built-in importance</li>
<li>Low tuning risk</li>
</ol>
<p>Random Forest (High-Risk Prediction):</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="http://localhost:3787/#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ranger)</span>
<span id="cb165-2"><a href="http://localhost:3787/#cb165-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb165-3"><a href="http://localhost:3787/#cb165-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-4"><a href="http://localhost:3787/#cb165-4" aria-hidden="true" tabindex="-1"></a>rf_model <span class="ot">&lt;-</span> <span class="fu">ranger</span>(</span>
<span id="cb165-5"><a href="http://localhost:3787/#cb165-5" aria-hidden="true" tabindex="-1"></a>  high_risk <span class="sc">~</span> .,</span>
<span id="cb165-6"><a href="http://localhost:3787/#cb165-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> precinct_features <span class="sc">|&gt;</span></span>
<span id="cb165-7"><a href="http://localhost:3787/#cb165-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>MONTH),</span>
<span id="cb165-8"><a href="http://localhost:3787/#cb165-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">probability =</span> <span class="cn">TRUE</span>,</span>
<span id="cb165-9"><a href="http://localhost:3787/#cb165-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">importance =</span> <span class="st">"permutation"</span></span>
<span id="cb165-10"><a href="http://localhost:3787/#cb165-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb165-11"><a href="http://localhost:3787/#cb165-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-12"><a href="http://localhost:3787/#cb165-12" aria-hidden="true" tabindex="-1"></a>importance_df <span class="ot">&lt;-</span> rf_model<span class="sc">$</span>variable.importance <span class="sc">|&gt;</span></span>
<span id="cb165-13"><a href="http://localhost:3787/#cb165-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">enframe</span>(<span class="at">name =</span> <span class="st">"feature"</span>, <span class="at">value =</span> <span class="st">"importance"</span>) <span class="sc">|&gt;</span></span>
<span id="cb165-14"><a href="http://localhost:3787/#cb165-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(importance))</span>
<span id="cb165-15"><a href="http://localhost:3787/#cb165-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-16"><a href="http://localhost:3787/#cb165-16" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(importance_df)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16 × 2
   feature            importance
   &lt;chr&gt;                   &lt;dbl&gt;
 1 total_arrests        0.136   
 2 mean_lon             0.00467 
 3 pct_crime_family_2   0.00456 
 4 pct_female           0.00361 
 5 pct_season_3         0.00347 
 6 pct_male             0.00318 
 7 pct_crime_family_1   0.00307 
 8 ARREST_PRECINCT      0.00251 
 9 mean_lat             0.00215 
10 pct_crime_family_4   0.00124 
11 pct_season_4         0.000855
12 pct_crime_family_5   0.000813
13 pct_crime_family_6   0.000652
14 pct_crime_family_3   0.000546
15 pct_season_2         0.000481
16 pct_season_1         0.000163</code></pre>
</div>
</div>
</section>
<section id="xgboost-primary-model" class="level3">
<h3 class="anchored" data-anchor-id="xgboost-primary-model">XGBoost (Primary Model)<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#xgboost-primary-model" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<p>Boosted Additive model:</p>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="44" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-msub><mjx-texatom texclass="ORD"><mjx-mover><mjx-over style="padding-bottom: 0.105em; padding-left: 0.301em; margin-bottom: -0.531em;"><mjx-mo class="mjx-n" style="width: 0px; margin-left: -0.25em;"><mjx-c class="mjx-c5E"></mjx-c></mjx-mo></mjx-over><mjx-base><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D466 TEX-I"></mjx-c></mjx-mi></mjx-base></mjx-mover></mjx-texatom><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-munderover space="4"><mjx-over style="padding-bottom: 0.2em; padding-left: 0.391em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D440 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-over><mjx-box><mjx-munder><mjx-row><mjx-base style="padding-left: 0.04em;"><mjx-mo class="mjx-lop"><mjx-c class="mjx-c2211 TEX-S2"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top: 0.167em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45A TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-under></mjx-row></mjx-munder></mjx-box></mjx-munderover><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D45A TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mstyle><mjx-mspace style="width: 0.278em;"></mjx-mspace></mjx-mstyle><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D45A TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c2208"></mjx-c></mjx-mo><mjx-texatom space="4" texclass="ORD"><mjx-mi class="mjx-cal mjx-i"><mjx-c class="mjx-c46 TEX-C"></mjx-c></mjx-mi></mjx-texatom></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mrow data-mjx-texclass="ORD"><mover><mi>y</mi><mo stretchy="false">^</mo></mover></mrow><mi>i</mi></msub><mo>=</mo><munderover><mo data-mjx-texclass="OP">∑</mo><mrow data-mjx-texclass="ORD"><mi>m</mi><mo>=</mo><mn>1</mn></mrow><mrow data-mjx-texclass="ORD"><mi>M</mi></mrow></munderover><msub><mi>f</mi><mi>m</mi></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>,</mo><mstyle scriptlevel="0"><mspace width="0.278em"></mspace></mstyle><msub><mi>f</mi><mi>m</mi></msub><mo>∈</mo><mrow data-mjx-texclass="ORD"><mi data-mjx-variant="-tex-calligraphic" mathvariant="script">F</mi></mrow></math></mjx-assistive-mml></mjx-container></span></p>
<p>Objective:</p>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="45" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-cal mjx-i"><mjx-c class="mjx-c4C TEX-C"></mjx-c></mjx-mi></mjx-texatom><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-munderover space="4"><mjx-over style="padding-bottom: 0.2em; padding-left: 0.408em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D441 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-over><mjx-box><mjx-munder><mjx-row><mjx-base><mjx-mo class="mjx-lop"><mjx-c class="mjx-c2211 TEX-S2"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top: 0.167em; padding-left: 0.148em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-under></mjx-row></mjx-munder></mjx-box></mjx-munderover><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c2113"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D466 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-texatom texclass="ORD"><mjx-mover><mjx-over style="padding-bottom: 0.105em; padding-left: 0.301em; margin-bottom: -0.531em;"><mjx-mo class="mjx-n" style="width: 0px; margin-left: -0.25em;"><mjx-c class="mjx-c5E"></mjx-c></mjx-mo></mjx-over><mjx-base><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D466 TEX-I"></mjx-c></mjx-mi></mjx-base></mjx-mover></mjx-texatom><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-munderover space="3"><mjx-over style="padding-bottom: 0.2em; padding-left: 0.391em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D440 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-over><mjx-box><mjx-munder><mjx-row><mjx-base style="padding-left: 0.04em;"><mjx-mo class="mjx-lop"><mjx-c class="mjx-c2211 TEX-S2"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top: 0.167em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45A TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-under></mjx-row></mjx-munder></mjx-box></mjx-munderover><mjx-mi class="mjx-n" space="2"><mjx-c class="mjx-c3A9"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.06em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D45A TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow data-mjx-texclass="ORD"><mi data-mjx-variant="-tex-calligraphic" mathvariant="script">L</mi></mrow><mo>=</mo><munderover><mo data-mjx-texclass="OP">∑</mo><mrow data-mjx-texclass="ORD"><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow data-mjx-texclass="ORD"><mi>N</mi></mrow></munderover><mi>ℓ</mi><mo stretchy="false">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>,</mo><msub><mrow data-mjx-texclass="ORD"><mover><mi>y</mi><mo stretchy="false">^</mo></mover></mrow><mi>i</mi></msub><mo stretchy="false">)</mo><mo>+</mo><munderover><mo data-mjx-texclass="OP">∑</mo><mrow data-mjx-texclass="ORD"><mi>m</mi><mo>=</mo><mn>1</mn></mrow><mrow data-mjx-texclass="ORD"><mi>M</mi></mrow></munderover><mi mathvariant="normal">Ω</mi><mo stretchy="false">(</mo><msub><mi>f</mi><mi>m</mi></msub><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span></p>
<p>XGBoost (Binary):</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="http://localhost:3787/#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xgboost)</span>
<span id="cb167-2"><a href="http://localhost:3787/#cb167-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-3"><a href="http://localhost:3787/#cb167-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-4"><a href="http://localhost:3787/#cb167-4" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">model.matrix</span>(high_risk <span class="sc">~</span> . <span class="sc">-</span> MONTH, precinct_features)[,<span class="sc">-</span><span class="dv">1</span>] </span>
<span id="cb167-5"><a href="http://localhost:3787/#cb167-5" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> precinct_features<span class="sc">$</span>high_risk</span>
<span id="cb167-6"><a href="http://localhost:3787/#cb167-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-7"><a href="http://localhost:3787/#cb167-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-8"><a href="http://localhost:3787/#cb167-8" aria-hidden="true" tabindex="-1"></a>dtrain <span class="ot">&lt;-</span> <span class="fu">xgb.DMatrix</span>(<span class="at">data =</span> X, <span class="at">label =</span> y)</span>
<span id="cb167-9"><a href="http://localhost:3787/#cb167-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-10"><a href="http://localhost:3787/#cb167-10" aria-hidden="true" tabindex="-1"></a>params <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb167-11"><a href="http://localhost:3787/#cb167-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">objective =</span> <span class="st">"binary:logistic"</span>,</span>
<span id="cb167-12"><a href="http://localhost:3787/#cb167-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_depth =</span> <span class="dv">5</span>,</span>
<span id="cb167-13"><a href="http://localhost:3787/#cb167-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">learning_rate =</span> <span class="fl">0.05</span>,</span>
<span id="cb167-14"><a href="http://localhost:3787/#cb167-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">subsample =</span> <span class="fl">0.8</span>,</span>
<span id="cb167-15"><a href="http://localhost:3787/#cb167-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">colsample_bytree =</span> <span class="fl">0.8</span>,</span>
<span id="cb167-16"><a href="http://localhost:3787/#cb167-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">eval_metric =</span> <span class="st">"auc"</span></span>
<span id="cb167-17"><a href="http://localhost:3787/#cb167-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb167-18"><a href="http://localhost:3787/#cb167-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-19"><a href="http://localhost:3787/#cb167-19" aria-hidden="true" tabindex="-1"></a>xgb_model <span class="ot">&lt;-</span> <span class="fu">xgb.train</span>(</span>
<span id="cb167-20"><a href="http://localhost:3787/#cb167-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">params =</span> params,</span>
<span id="cb167-21"><a href="http://localhost:3787/#cb167-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> dtrain,</span>
<span id="cb167-22"><a href="http://localhost:3787/#cb167-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">nrounds =</span> <span class="dv">200</span></span>
<span id="cb167-23"><a href="http://localhost:3787/#cb167-23" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="shap-interpretability-key-part" class="level3">
<h3 class="anchored" data-anchor-id="shap-interpretability-key-part">SHAP Interpretability (Key Part)<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#shap-interpretability-key-part" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<p>SHAP decomposes prediction:</p>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="46" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-msub space="4"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D719 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c30"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-munderover space="3"><mjx-over style="padding-bottom: 0.111em; padding-left: 0.544em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45D TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-over><mjx-box><mjx-munder><mjx-row><mjx-base><mjx-mo class="mjx-lop"><mjx-c class="mjx-c2211 TEX-S2"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top: 0.167em; padding-left: 0.124em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D457 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-under></mjx-row></mjx-munder></mjx-box></mjx-munderover><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D719 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D457 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>ϕ</mi><mn>0</mn></msub><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mo>+</mo><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><munderover><mo data-mjx-texclass="OP">∑</mo><mrow data-mjx-texclass="ORD"><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mrow data-mjx-texclass="ORD"><mi>p</mi></mrow></munderover><msub><mi>ϕ</mi><mi>j</mi></msub></math></mjx-assistive-mml></mjx-container></span></p>
<p>where <span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="47" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D719 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D457 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>ϕ</mi><mi>j</mi></msub></math></mjx-assistive-mml></mjx-container></span> is the marginal contribution of feature <span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="48" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D457 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>j</mi></math></mjx-assistive-mml></mjx-container></span>.</p>
<p>SHAP values:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="http://localhost:3787/#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(SHAPforxgboost)</span>
<span id="cb168-2"><a href="http://localhost:3787/#cb168-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-3"><a href="http://localhost:3787/#cb168-3" aria-hidden="true" tabindex="-1"></a>shap_values <span class="ot">&lt;-</span> <span class="fu">shap.values</span>(</span>
<span id="cb168-4"><a href="http://localhost:3787/#cb168-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">xgb_model =</span> xgb_model,</span>
<span id="cb168-5"><a href="http://localhost:3787/#cb168-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">X_train =</span> X</span>
<span id="cb168-6"><a href="http://localhost:3787/#cb168-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb168-7"><a href="http://localhost:3787/#cb168-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-8"><a href="http://localhost:3787/#cb168-8" aria-hidden="true" tabindex="-1"></a>shap_long <span class="ot">&lt;-</span> <span class="fu">shap.prep</span>(</span>
<span id="cb168-9"><a href="http://localhost:3787/#cb168-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">shap_contrib =</span> shap_values<span class="sc">$</span>shap_score,</span>
<span id="cb168-10"><a href="http://localhost:3787/#cb168-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">X_train =</span> X</span>
<span id="cb168-11"><a href="http://localhost:3787/#cb168-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb168-12"><a href="http://localhost:3787/#cb168-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-13"><a href="http://localhost:3787/#cb168-13" aria-hidden="true" tabindex="-1"></a><span class="fu">shap.plot.summary</span>(shap_long)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/unnamed-chunk-38-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="section" class="level3">
<h3 class="anchored" data-anchor-id="section"><a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#section" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<p>Interpretation examples</p>
<ol type="1">
<li><strong>Positive SHAP</strong> → increases high-risk probability</li>
<li><strong>Negative SHAP</strong> → reduces risk</li>
<li>Nonlinear thresholds emerge naturally</li>
</ol>
<p>This is what makes the model <em>policy-safe</em>.</p>
</section>
<section id="multiclass-targets-crime-family-borough" class="level3">
<h3 class="anchored" data-anchor-id="multiclass-targets-crime-family-borough">Multiclass Targets (Crime Family / Borough)<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#multiclass-targets-crime-family-borough" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<p>XGBoost Multiclass:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="http://localhost:3787/#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xgboost)</span>
<span id="cb169-2"><a href="http://localhost:3787/#cb169-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-3"><a href="http://localhost:3787/#cb169-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------------------------</span></span>
<span id="cb169-4"><a href="http://localhost:3787/#cb169-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Create target labels</span></span>
<span id="cb169-5"><a href="http://localhost:3787/#cb169-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------------------------</span></span>
<span id="cb169-6"><a href="http://localhost:3787/#cb169-6" aria-hidden="true" tabindex="-1"></a>y_multi <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">factor</span>(data_stat_analy<span class="sc">$</span>CRIME_FAMILY_code)) <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb169-7"><a href="http://localhost:3787/#cb169-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-8"><a href="http://localhost:3787/#cb169-8" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------------------------</span></span>
<span id="cb169-9"><a href="http://localhost:3787/#cb169-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Create feature matrix (numeric only)</span></span>
<span id="cb169-10"><a href="http://localhost:3787/#cb169-10" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------------------------</span></span>
<span id="cb169-11"><a href="http://localhost:3787/#cb169-11" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> data_stat_analy[, <span class="fu">setdiff</span>(<span class="fu">names</span>(data_stat_analy), <span class="st">"CRIME_FAMILY_code"</span>)]</span>
<span id="cb169-12"><a href="http://localhost:3787/#cb169-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-13"><a href="http://localhost:3787/#cb169-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert everything to numeric using model.matrix</span></span>
<span id="cb169-14"><a href="http://localhost:3787/#cb169-14" aria-hidden="true" tabindex="-1"></a>X_mat <span class="ot">&lt;-</span> <span class="fu">model.matrix</span>(<span class="sc">~</span> . <span class="sc">-</span> <span class="dv">1</span>, <span class="at">data =</span> X)</span>
<span id="cb169-15"><a href="http://localhost:3787/#cb169-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-16"><a href="http://localhost:3787/#cb169-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------------------------</span></span>
<span id="cb169-17"><a href="http://localhost:3787/#cb169-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Build DMatrix</span></span>
<span id="cb169-18"><a href="http://localhost:3787/#cb169-18" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------------------------</span></span>
<span id="cb169-19"><a href="http://localhost:3787/#cb169-19" aria-hidden="true" tabindex="-1"></a>dtrain <span class="ot">&lt;-</span> <span class="fu">xgb.DMatrix</span>(<span class="at">data =</span> X_mat, <span class="at">label =</span> y_multi)</span>
<span id="cb169-20"><a href="http://localhost:3787/#cb169-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-21"><a href="http://localhost:3787/#cb169-21" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------------------------</span></span>
<span id="cb169-22"><a href="http://localhost:3787/#cb169-22" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Set parameters</span></span>
<span id="cb169-23"><a href="http://localhost:3787/#cb169-23" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------------------------</span></span>
<span id="cb169-24"><a href="http://localhost:3787/#cb169-24" aria-hidden="true" tabindex="-1"></a>params <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb169-25"><a href="http://localhost:3787/#cb169-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">objective =</span> <span class="st">"multi:softprob"</span>,</span>
<span id="cb169-26"><a href="http://localhost:3787/#cb169-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">num_class =</span> <span class="fu">length</span>(<span class="fu">unique</span>(y_multi)),</span>
<span id="cb169-27"><a href="http://localhost:3787/#cb169-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_depth =</span> <span class="dv">6</span>,</span>
<span id="cb169-28"><a href="http://localhost:3787/#cb169-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">learning_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb169-29"><a href="http://localhost:3787/#cb169-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">eval_metric =</span> <span class="st">"mlogloss"</span></span>
<span id="cb169-30"><a href="http://localhost:3787/#cb169-30" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb169-31"><a href="http://localhost:3787/#cb169-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-32"><a href="http://localhost:3787/#cb169-32" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------------------------</span></span>
<span id="cb169-33"><a href="http://localhost:3787/#cb169-33" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Train model (correct API)</span></span>
<span id="cb169-34"><a href="http://localhost:3787/#cb169-34" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------------------------</span></span>
<span id="cb169-35"><a href="http://localhost:3787/#cb169-35" aria-hidden="true" tabindex="-1"></a>xgb_multi <span class="ot">&lt;-</span> <span class="fu">xgb.train</span>(</span>
<span id="cb169-36"><a href="http://localhost:3787/#cb169-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">params =</span> params,</span>
<span id="cb169-37"><a href="http://localhost:3787/#cb169-37" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> dtrain,</span>
<span id="cb169-38"><a href="http://localhost:3787/#cb169-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">nrounds =</span> <span class="dv">150</span>,</span>
<span id="cb169-39"><a href="http://localhost:3787/#cb169-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">verbose =</span> <span class="dv">0</span></span>
<span id="cb169-40"><a href="http://localhost:3787/#cb169-40" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb169-41"><a href="http://localhost:3787/#cb169-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-42"><a href="http://localhost:3787/#cb169-42" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------------------------</span></span>
<span id="cb169-43"><a href="http://localhost:3787/#cb169-43" aria-hidden="true" tabindex="-1"></a><span class="co"># 6. Predictions (optional)</span></span>
<span id="cb169-44"><a href="http://localhost:3787/#cb169-44" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------------------------</span></span>
<span id="cb169-45"><a href="http://localhost:3787/#cb169-45" aria-hidden="true" tabindex="-1"></a>pred_probs <span class="ot">&lt;-</span> <span class="fu">predict</span>(xgb_multi, X_mat)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="unsupervised-learning---crime-regimes" class="level3">
<h3 class="anchored" data-anchor-id="unsupervised-learning---crime-regimes">Unsupervised Learning - Crime Regimes<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#unsupervised-learning---crime-regimes" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<p>Analysis now becomes <strong>structural</strong>, not predictive.</p>
<p><strong>Feature Matrix (Precinct-level)</strong></p>
<p>Aggregate <strong>long-run averages</strong>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="http://localhost:3787/#cb170-1" aria-hidden="true" tabindex="-1"></a>precinct_static <span class="ot">&lt;-</span> precinct_features <span class="sc">|&gt;</span></span>
<span id="cb170-2"><a href="http://localhost:3787/#cb170-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ARREST_PRECINCT) <span class="sc">|&gt;</span></span>
<span id="cb170-3"><a href="http://localhost:3787/#cb170-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb170-4"><a href="http://localhost:3787/#cb170-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">where</span>(is.numeric), \(x) <span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb170-5"><a href="http://localhost:3787/#cb170-5" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Standardize:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="http://localhost:3787/#cb171-1" aria-hidden="true" tabindex="-1"></a>X_cluster <span class="ot">&lt;-</span> <span class="fu">scale</span>(precinct_static <span class="sc">|&gt;</span></span>
<span id="cb171-2"><a href="http://localhost:3787/#cb171-2" aria-hidden="true" tabindex="-1"></a>                     dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>ARREST_PRECINCT))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="k-means" class="level3">
<h3 class="anchored" data-anchor-id="k-means">k-Means<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#k-means" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<p>Mathematical Structure:</p>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="49" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45A TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-munderover space="4"><mjx-over style="padding-bottom: 0.2em; padding-left: 0.408em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43E TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-over><mjx-box><mjx-munder><mjx-row><mjx-base><mjx-mo class="mjx-lop"><mjx-c class="mjx-c2211 TEX-S2"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top: 0.167em; padding-left: 0.086em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-under></mjx-row></mjx-munder></mjx-box></mjx-munderover><mjx-mfrac space="2"><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c7C"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D436 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.045em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c7C"></mjx-c></mjx-mo></mjx-mrow></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac><mjx-munder space="2"><mjx-row><mjx-base style="padding-left: 0.048em;"><mjx-mo class="mjx-lop"><mjx-c class="mjx-c2211 TEX-S2"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top: 0.167em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2208"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D436 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.045em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-texatom></mjx-under></mjx-row></mjx-munder><mjx-msup space="2"><mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c2225"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D707 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2225"></mjx-c></mjx-mo></mjx-mrow><mjx-script style="vertical-align: 0.477em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msup></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>m</mi><mo>=</mo><munderover><mo data-mjx-texclass="OP">∑</mo><mrow data-mjx-texclass="ORD"><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mrow data-mjx-texclass="ORD"><mi>K</mi></mrow></munderover><mfrac><mn>1</mn><mrow><mo data-mjx-texclass="ORD" stretchy="false">|</mo><msub><mi>C</mi><mi>k</mi></msub><mo data-mjx-texclass="ORD" stretchy="false">|</mo></mrow></mfrac><munder><mo data-mjx-texclass="OP">∑</mo><mrow data-mjx-texclass="ORD"><mi>i</mi><mo>∈</mo><msub><mi>C</mi><mi>k</mi></msub></mrow></munder><msup><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN" symmetric="true">‖</mo><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mi>μ</mi><mi>k</mi></msub><mo data-mjx-texclass="CLOSE" symmetric="true">‖</mo></mrow><mn>2</mn></msup></math></mjx-assistive-mml></mjx-container></span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb172"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href="http://localhost:3787/#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb172-2"><a href="http://localhost:3787/#cb172-2" aria-hidden="true" tabindex="-1"></a>km <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(X_cluster, <span class="at">centers =</span> <span class="dv">5</span>, <span class="at">nstart =</span> <span class="dv">25</span>)</span>
<span id="cb172-3"><a href="http://localhost:3787/#cb172-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-4"><a href="http://localhost:3787/#cb172-4" aria-hidden="true" tabindex="-1"></a>precinct_static<span class="sc">$</span>cluster <span class="ot">&lt;-</span> km<span class="sc">$</span>cluster</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="gaussian-mixture-models-soft-regimes" class="level3">
<h3 class="anchored" data-anchor-id="gaussian-mixture-models-soft-regimes">Gaussian Mixture Models (Soft Regimes)<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#gaussian-mixture-models-soft-regimes" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<p>Mathematical Structure:</p>
<p><span class="math display"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="50" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45D TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-munderover space="4"><mjx-over style="padding-bottom: 0.2em; padding-left: 0.408em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43E TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-over><mjx-box><mjx-munder><mjx-row><mjx-base><mjx-mo class="mjx-lop"><mjx-c class="mjx-c2211 TEX-S2"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top: 0.167em; padding-left: 0.086em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-under></mjx-row></mjx-munder></mjx-box></mjx-munderover><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70B TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mstyle><mjx-mspace style="width: 0.167em;"></mjx-mspace></mjx-mstyle><mjx-mfrac><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-msqrt><mjx-sqrt><mjx-surd><mjx-mo class="mjx-sop"><mjx-c class="mjx-c221A TEX-S1"></mjx-c></mjx-mo></mjx-surd><mjx-box style="padding-top: 0.093em;"><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70B TEX-I"></mjx-c></mjx-mi><mjx-msup><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-script style="vertical-align: 0.289em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D451 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msup><mjx-mo class="mjx-n"><mjx-c class="mjx-c7C"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-n"><mjx-c class="mjx-c3A3"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c7C"></mjx-c></mjx-mo></mjx-box></mjx-sqrt></mjx-msqrt></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac><mjx-mi class="mjx-n"><mjx-c class="mjx-c65"></mjx-c><mjx-c class="mjx-c78"></mjx-c><mjx-c class="mjx-c70"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2061"></mjx-c></mjx-mo><mjx-mrow space="2"><mjx-mo class="mjx-s3"><mjx-c class="mjx-c28 TEX-S3"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mfrac><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D707 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-msup><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-script style="vertical-align: 0.413em;"><mjx-mi class="mjx-n" size="s"><mjx-c class="mjx-c22A4"></mjx-c></mjx-mi></mjx-script></mjx-msup><mjx-msubsup><mjx-mi class="mjx-n"><mjx-c class="mjx-c3A3"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.316em; margin-left: 0px;"><mjx-texatom size="s" texclass="ORD"><mjx-mo class="mjx-n"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom><mjx-spacer style="margin-top: 0.18em;"></mjx-spacer><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msubsup><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D707 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-s3"><mjx-c class="mjx-c29 TEX-S3"></mjx-c></mjx-mo></mjx-mrow></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><munderover><mo data-mjx-texclass="OP">∑</mo><mrow data-mjx-texclass="ORD"><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mrow data-mjx-texclass="ORD"><mi>K</mi></mrow></munderover><msub><mi>π</mi><mi>k</mi></msub><mstyle scriptlevel="0"><mspace width="0.167em"></mspace></mstyle><mfrac><mn>1</mn><msqrt><mo stretchy="false">(</mo><mn>2</mn><mi>π</mi><msup><mo stretchy="false">)</mo><mi>d</mi></msup><mo data-mjx-texclass="ORD" stretchy="false">|</mo><msub><mi mathvariant="normal">Σ</mi><mi>k</mi></msub><mo data-mjx-texclass="ORD" stretchy="false">|</mo></msqrt></mfrac><mi>exp</mi><mo data-mjx-texclass="NONE">⁡</mo><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mo>−</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy="false">(</mo><mi>x</mi><mo>−</mo><msub><mi>μ</mi><mi>k</mi></msub><msup><mo stretchy="false">)</mo><mi mathvariant="normal">⊤</mi></msup><msubsup><mi mathvariant="normal">Σ</mi><mi>k</mi><mrow data-mjx-texclass="ORD"><mo>−</mo><mn>1</mn></mrow></msubsup><mo stretchy="false">(</mo><mi>x</mi><mo>−</mo><msub><mi>μ</mi><mi>k</mi></msub><mo stretchy="false">)</mo><mo data-mjx-texclass="CLOSE">)</mo></mrow></math></mjx-assistive-mml></mjx-container></span></p>
<p>GMM:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="http://localhost:3787/#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mclust)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Package 'mclust' version 6.1.2
Type 'citation("mclust")' for citing this R package in publications.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'mclust'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:purrr':

    map</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:dplyr':

    count</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb178"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="http://localhost:3787/#cb178-1" aria-hidden="true" tabindex="-1"></a>gmm <span class="ot">&lt;-</span> <span class="fu">Mclust</span>(X_cluster)</span>
<span id="cb178-2"><a href="http://localhost:3787/#cb178-2" aria-hidden="true" tabindex="-1"></a>precinct_static<span class="sc">$</span>gmm_cluster <span class="ot">&lt;-</span> gmm<span class="sc">$</span>classification</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Advantages:</p>
<ol type="1">
<li>Uncertainty-aware</li>
<li>Overlapping regimes</li>
<li>Better for criminology narratives</li>
</ol>
</section>
<section id="interpreting-crime-regimes" class="level3">
<h3 class="anchored" data-anchor-id="interpreting-crime-regimes">Interpreting Crime Regimes<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#interpreting-crime-regimes" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<p>For each cluster:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="http://localhost:3787/#cb179-1" aria-hidden="true" tabindex="-1"></a>precinct_static <span class="sc">|&gt;</span></span>
<span id="cb179-2"><a href="http://localhost:3787/#cb179-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cluster) <span class="sc">|&gt;</span></span>
<span id="cb179-3"><a href="http://localhost:3787/#cb179-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), mean))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 19
  cluster ARREST_PRECINCT total_arrests pct_crime_family_1 pct_crime_family_2
    &lt;int&gt;           &lt;dbl&gt;         &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;
1       1             7.5          101.             0.164              0.0191
2       2            35.9          115.             0.0703             0.0457
3       3            80.0          123.             0.0949             0.0491
4       4            82.4          390.             0.158              0.0651
5       5            65.3          185.             0.108              0.0626
# ℹ 14 more variables: pct_crime_family_3 &lt;dbl&gt;, pct_crime_family_4 &lt;dbl&gt;,
#   pct_crime_family_5 &lt;dbl&gt;, pct_crime_family_6 &lt;dbl&gt;, pct_season_1 &lt;dbl&gt;,
#   pct_season_2 &lt;dbl&gt;, pct_season_3 &lt;dbl&gt;, pct_season_4 &lt;dbl&gt;, pct_male &lt;dbl&gt;,
#   pct_female &lt;dbl&gt;, mean_lon &lt;dbl&gt;, mean_lat &lt;dbl&gt;, high_risk &lt;dbl&gt;,
#   gmm_cluster &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Typical regimes to observe:</p>
<ol type="1">
<li><strong>High-volume, seasonal violent precincts</strong></li>
<li><strong>Low-volume, stable precincts</strong></li>
<li><strong>Property-crime dominated precincts</strong></li>
<li><strong>Transient / nightlife-driven precincts</strong></li>
</ol>
</section>
<section id="benefits" class="level3">
<h3 class="anchored" data-anchor-id="benefits">Benefits<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#benefits" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h3>
<ol type="1">
<li>Nonlinear but interpretable</li>
<li>SHAP allows legal / policy defensibility</li>
<li>Regime analysis moves beyond prediction</li>
<li>Integrates naturally with spatial models later</li>
</ol>
</section>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:3787/#references" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>(NYPD), P. D. (2025, October 27). <em>NYPD arrest data (year to date): NYC Open Data</em>. NYPD Arrest Data (Year to Date) | NYC Open Data. https://data.cityofnewyork.us/Public-Safety/NYPD-Arrest-Data-Year-to-Date-/uip8-fykc/about_data</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->





<script>
  window.backupDefine = window.define;
  window.define = undefined;
</script>
<script type="text/javascript" src="./Data Wrangling and Statistical Programming for NYPD Arrest Data (Year-to-Date) - Beta_files/quarto-preview.js.download"></script>
<script>
  window.define = window.backupDefine;
  window.backupDefine = undefined;
</script>
<script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    window.QuartoPreview.init({
      origin: "",
      search: "",
      inputFile: "C:\Users\verlene\Documents\AAAAAAAAAA.qmd",
      isPresentation: false
    });
  })
</script>
<div><div dir="ltr" class="fui-FluentProvider fui-FluentProviderr0 ___jdtuxv0 f19n0e5 fxugw4r f1o700av fk6fouc fkhj508 figsok6 f1i3iumi"></div></div><i tabindex="0" role="none" data-tabster-dummy="" aria-hidden="true" style="position: fixed; height: 1px; width: 1px; opacity: 0.001; z-index: -1; content-visibility: hidden; top: 0px; left: 0px;"></i></body></html>